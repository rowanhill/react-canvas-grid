{"version":3,"sources":["../../dist/index.js","../../dist/gridGeometry.js","../../dist/selectionState/cellsSelection.js","../../dist/scrollbarGeometry.js","../../dist/selectionState/selectionState.js","../../dist/selectionState/selectionStateFactory.js","../../dist/gridState.js","../../dist/selectionState/noSelection.js","../../dist/HighlightedGridCanvas.js","../../dist/utils.js","../../dist/selectionState/colsSelection.js","../../dist/selectionState/allGridSelection.js","../../dist/selectionState/rowsSelection.js","../../dist/commonCanvasRenderer.js","../../dist/types.js","../../dist/scrollbars/baseScrollbarRenderer.js","../../dist/eventHandlers/mouseEvents.js","../../dist/eventHandlers/scrolling.js","../../dist/baseGridOffsetRenderer.js","../../dist/highlightCanvasRenderer.js","../../dist/scrollbars/horizontalScrollbarRenderer.js","../../dist/scrollbars/verticalScrollbarRenderer.js","assets/autofill.png","assets/custom-render.png","assets/frozen-rows-cols.png","assets/inline-edit.png","assets/selection-range.png","../../dist/ReactCanvasGrid.js","../../dist/eventHandlers/keyboardEvents.js","../../dist/eventHandlers/autofillMouseEvents.js","../../dist/selectionState/focusOffset.js","../../dist/eventHandlers/gridMouseEvents.js","../../dist/eventHandlers/mouseCellAndRegionCalc.js","../../dist/eventHandlers/scrollingTimer.js","../../dist/eventHandlers/scrollbarMouseEvents.js","../../dist/FrozenCanvas.js","../../dist/FrozenColsCanvas.js","../../dist/GridCanvas.js","../../dist/gridCanvasRenderer.js","../../dist/cellRenderer.js","../../dist/HighlightCanvas.js","../../dist/FrozenCornerCanvas.js","../../dist/FrozenRowsCanvas.js","../../dist/InlineEditor.js","../../dist/MainCanvas.js","../../dist/scrollbars/ScrollbarCanvas.js","../../dist/scrollbars/CornerScrollbarCanvas.js","../../dist/scrollbars/cornerScrollbarRenderer.js","../../dist/scrollbars/HorizontalScrollbarCanvas.js","../../dist/scrollbars/VerticalScrollbarCanvas.js","../../dist/autofill.js","components/ControlsForm.tsx","components/FixedSizeHolder.tsx","data/dataAndColumns.ts","examples/Autofill.data.ts","examples/Autofill.grid.tsx","examples/Autofill.text.tsx","examples/CustomBackground.grid.tsx","examples/CustomText.grid.tsx","examples/DynamicData.grid.tsx","examples/Editable.grid.tsx","components/EventLog.tsx","examples/EditEvents.grid.tsx","examples/Everything.grid.tsx","examples/FocusColumn.grid.tsx","examples/KeyboardEvents.grid.tsx","examples/Resize.grid.tsx","examples/SelectionEvents.grid.tsx","examples/exampleMeta.tsx","examples/SmallGrid.grid.tsx","examples/SmallGrid.text.tsx","examples/Simple.grid.tsx","examples/Simple.text.tsx","examples/Editable.text.tsx","examples/FrozenCells.grid.tsx","examples/FrozenCells.text.tsx","examples/FocusColumn.text.tsx","examples/DynamicData.text.tsx","examples/CustomBackground.text.tsx","examples/CustomText.text.tsx","examples/SelectionEvents.text.tsx","examples/KeyboardEvents.text.tsx","examples/EditEvents.text.tsx","examples/Resize.text.tsx","examples/Index.tsx","Examples.tsx","examples/ExamplePage.tsx","assets/feature-icon-gradient.svg","assets/logo.svg","assets/react-js.svg","assets/rocket-launch-lines.svg","assets/structure.svg","Home.tsx","App.tsx","index.tsx"],"names":["Object","defineProperty","exports","value","ReactCanvasGrid_1","require","ReactCanvasGrid","types_1","getCellText","cellHasTextFunction","cellIsEditable","autofill_1","repeatSelectionIntoFill","__assign","this","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","scrollbarGeometry_1","GridGeometry","calculateColumnBoundaries","columns","borderWidth","curLeft","map","col","boundary","left","right","width","calculateGridSize","data","columnBoundaries","rowHeight","numRows","height","calculateGridPlusGutterSize","gridSize","rootSize","barWidth","barMarginToEdge","calculateCanvasSize","gridPlusGutterSize","Math","min","calculateFrozenRowsHeight","frozenRows","calculateFrozenColsWidth","frozenCols","rightmostColIndex","calculateGridCellCoordsFromGridState","event","rootRef","gridState","calculateGridCellCoords","gridOffset","maxRow","root","Error","gridPixelToGridCell","windowPixelToGridPixel","x","clientX","y","clientY","calculateGridPixelCoords","calculateCellBounds","colIndex","rowIndex","cellLeft","cellRight","top","bottom","calculateGridOffsetFromFraction","fraction","gridLength","canvasLength","floor","truncateGridOffset","oldOffset","canvasSize","maxX","maxY","quantiseGridOffset","offset","dpr","calculateGridOffsetForTargetColumn","frozenColsWidth","targetColIndex","verticalScrollGutter","calculateGridOffsetXForTargetColumn","calculateGridOffsetForTargetRow","frozenRowsHeight","targetRowIndex","horizontalScrollGutter","calculateGridOffsetYForTargetRow","calculateGridOffsetForTargetCell","targetCell","oldX","gutterWidth","targetBoundaries","viewLeft","viewRight","max","oldY","gutterHeight","targetRowTop","targetRowBottom","viewTop","viewBottom","calculateVisibleRect","isWindowPixelWithinComponent","rootClientRect","getBoundingClientRect","calculateComponentPixel","windowPixelToComponentPixel","_a","__extends","extendStatics","d","b","setPrototypeOf","__proto__","Array","__","constructor","create","utils_1","colsSelection_1","focusOffset_1","rowsSelection_1","selectionState_1","selectionStateFactory_1","createSingleCell","cellBounds","cell","truncateCoord","CellsSelection","_super","editCursorCell","selection","focusCell","isSelectionInProgress","autofillDragCell","_this","arrowUp","createSingleColSelection","arrowDown","arrowLeft","createSingleRowSelection","arrowRight","shiftArrowUp","newY","truncateY","bounds","shiftArrowDown","shiftArrowLeft","newX","truncateX","shiftArrowRight","mouseDown","meta","createSelectionStateForMouseDown","shiftMouseDown","region","selectionBoundsTo","mouseMove","equalCoord","equalBounds","mouseUp","fillRange","getAutofillRange","mergedRange","mergeBounds","mouseDownOnAutofillHandle","getSelectionRange","topLeft","bottomRight","getFocusGridOffset","getCursorCell","isAutofillDragging","selRange","BaseSelectionState","coord","numCols","a","barCapMargin","calculateLength","frozenLength","availableLength","contentRatio","round","calculateExtent","barLength","scrollFraction","scrollableCanvasLength","start","end","calculateTransversePosition","canvasTransverse","getHorizontalScrollbarLength","getVerticalScrollbarLength","getHorizontalScrollbarExtent","horizontalBarLength","getVerticalScrollbarExtent","verticalBarLength","getHorizontalScrollbarPos","extent","transverse","getVerticalScrollbarPos","getVerticalGutterBounds","getHorizontalGutterBounds","calculateFractionFromStartPos","getHitScrollBar","horizontalPosition","verticalPosition","halfBarHeight","hTop","hBottom","hExtent","vLeft","vRight","vExtent","allGridSelection_1","cellsSelection_1","RowsSelection","ColsSelection","AllGridSelection","__importDefault","mod","__esModule","__importStar","result","k","instigator_1","shallow_equals_1","gridGeometry_1","ScrollbarGeometry","noSelection_1","refEquals","shallowEqualsExceptFunctions","default","GridState","shouldAllowAutofill","activeSource","window","devicePixelRatio","gridOffsetRaw","selectionState","NoSelection","hoveredScrollbar","autofillHandleIsHovered","transformer","gridInnerSize","c","fr","fc","visibleRect","horizontalScrollbarLength","verticalScrollbarLength","horizontalScrollbarExtent","verticalScrollbarExtent","horizontalScrollbarPos","verticalScrollbarPos","horizontalGutterBounds","verticalGutterBounds","cursorType","h","_","React","GridCanvas_1","HighlightCanvas_1","HighlightedGridCanvas","props","createElement","Fragment","GridCanvas","name","posProps","HighlightCanvas","numberBetween","num","equalSelectRange","newCell","truncateCol","selectionStartColIndex","selectionCursorColIndex","focusColIndex","newColIndex","neColIndex","truncateRow","selectionStartRowIndex","selectionCursorRowIndex","focusRowIndex","newRowIndex","borderColour","CommonCanvasRenderer","canvas","alpha","queuedRender","setCanvas","context","getContext","drawScaled","draw","drawUntranslated","requestAnimationFrame","save","scale","translate","restore","getText","text","editor","commonCanvasRenderer_1","colours","veryLight","light","veryTransparent","transparent","styles","scrollbar","defaultFill","hoverFill","scrollGutters","fill","stroke","BaseScrollbarRenderer","basicProps","updateProps","autofillMouseEvents_1","gridMouseEvents_1","scrollbarMouseEvents_1","scrolling_1","isLeftButton","buttons","handleWheel","e","scaleFactor","0","1","deltaMode","updateOffsetByDelta","deltaX","deltaY","preventDefault","handleMouseDown","editingCell","mouseDownOnScrollbar","mouseDownOnGrid","handleMouseMove","mouseDragOnScrollbar","mouseDragOnGrid","mouseHoverOnAutofillHandle","mouseHoverOnScrollbar","handleMouseUp","mouseUpOnScrollbar","mouseUpOnGrid","defaultPosProps","BaseGridOffsetRenderer","baseGridOffsetRenderer_1","defaultHoverProps","mediumTransparent","medium","selectedCells","autofillCells","autofillHandle","HighlightCanvasRenderer","hoverProps","selectionProps","clearRect","lineCap","fillStyle","strokeStyle","lineWidth","rect","gridCellCoordToGridPixelCoord","strokeRect","selectionRange","tl","br","isSelectionMoreThanOneCell","fillRect","autofillRange","topLeftRect","bottomRightRect","setLineDash","selectProps","shouldSelectionClear","prev","next","ScrollGeometry","baseScrollbarRenderer_1","HorizontalScrollbarRenderer","hBounds","vBounds","beginPath","moveTo","lineTo","drawHScrollbar","scrollPos","VerticalScrollbarRenderer","drawVScrollbar","module","keyboardEvents_1","mouseEvents_1","FrozenCanvas_1","gridState_1","highlightCanvasRenderer_1","InlineEditor_1","MainCanvas_1","ScrollbarCanvas_1","createRef","onWheel","onMouseDown","current","state","onMouseMove","onMouseUp","batch","onDoubleClick","cellCoords","startEditingCell","onKeyDown","keyDownOnGrid","fieldName","setState","cancelEditingCell","focusRoot","stopEditingCell","newData","onCellDataChanged","focus","preventScroll","componentDidMount","rootRect","addEventListener","consumer","componentDidUpdate","prevProps","onSelectionCleared","truncatedOffset","focusedColIndex","focusedOffset","componentWillUnmount","removeEventListener","render","ref","className","tabIndex","style","position","cssWidth","cssHeight","overflow","outline","cursor","MainCanvas","InlineTextEditor","onSubmit","onCancel","FrozenCanvas","ScrollbarCanvas","defaultProps","PureComponent","selectionArrowActions","ArrowRight","shift","noShift","ArrowLeft","ArrowUp","ArrowDown","key","selectionArrowAction","shiftKey","newSelState","newOffset","oldSelectionRange","onStartOrUpdate","onSelectionChangeUpdate","onSelectionChangeStart","onSelectionChangeEnd","isOverAutofillHandle","bottomRightCellBounds","gridPixelCoord","dx","dy","abs","mouseCellAndRegionCalc_1","scrollingTimer_1","componentPixelCoord","getMouseCellCoordAndRegion","truncatedCoord","process","callback","recalculateAndUpdateSelection","startScrollBySelectionDragIfNeeded","clearScrollByDragTimer","rangeToFill","onAutofill","gridCoords","clickInFrozenCols","clickInFrozenRows","scrollBySelectionDragTimerId","clearInterval","updateSelection","options","suppressX","suppressY","setInterval","draggedScrollbar","hitScrollbar","bar","origScrollbarStart","origClick","values","frozenLen","canvasLen","gridLen","barLen","clickCoord","dragDistance","desiredStart","desiredFraction","__rest","indexOf","getOwnPropertySymbols","FrozenColsCanvas_1","FrozenCornerCanvas_1","FrozenRowsCanvas_1","coreProps","FrozenCornerCanvas","FrozenRowsCanvas","FrozenColsCanvas","HighlightedGridCanvas_1","colsVisibleRect","scrollGutterHeight","colsPosProps","gridCanvasRenderer_1","canvasRef","renderer","renderCallback","canvasSizeSource","mergeTransformer","colBoundaries","GridCanvasRenderer","newBasicProps","newPosProps","deregister","cellRenderer_1","prevDraw","xDiff","yDiff","shiftExistingCanvas","drawNewBorderBackground","drawWholeBorderBackground","minRowIndex","maxRowIndex","ceil","_i","_b","drawCell","column","propsWidth","propsHeight","drawImage","top_1","metadata","renderBackground","drawCellBackgroundDefault","renderText","drawCellTextDefault","textBaseline","verticalCentre","fillText","newHoverProps","newSelectionProps","cornerVisibleRect","cornerPosProps","rowsVisibleRect","scrollGutterWidth","rowsPosProps","defaultText","serialise","submit","inputValue","currentTarget","deserialise","type","boxSizing","border","autoFocus","defaultValue","onBlur","onKeyPress","onKeyUp","keyCode","mainVisibleRect","CornerScrollbarCanvas_1","HorizontalScrollbarCanvas_1","VerticalScrollbarCanvas_1","HorizontalScrollbarCanvas","VerticalScrollbarCanvas","CornerScrollbarCanvas","cornerScrollbarRenderer_1","CornerScrollbarRenderer","horizontalScrollbarRenderer_1","verticalScrollbarRenderer_1","selectRange","cloneCellDef","selHeight","selWidth","row","reduce","acc","srcRowIndex","srcColIndex","srcColDef","srcCellDef","destRowIndex","destColIndex","destColDef","destCellDef","ControlsForm","children","InlineGroup","NumberInput","RadioInputs","selectedValue","onSelect","val","toString","checked","onChange","FixedSizeHolder","createFakeDataAndColumns","dataGen","createFakeColumns","rows","createFakeData","cols","push","j","hash","getRandomTextA","substr","getRandomTextB","getData","getTextPair","shouldAllowAutofillMethods","none","single","multi","AutofillGrid","autofillCell","onAutofillModeSelect","autofillMode","renderBackgroundLightGreen","renderTextRed","DynamicDataGrid","changeColsDebounceTimeout","changeRowsDebounceTimeout","changeNumRows","clearTimeout","target","valueAsNumber","numRowsInputValue","setTimeout","changeNumRowsDebounced","changeNumCols","numColsInputValue","changeNumColsDebounced","moveFirstColumnToEnd","slice","modifyTopLeftCell","firstColName","reset","getDefaultState","toggleFrozen","freezeFirstRowAndCol","toggleFilterCols","filterCols","shownCols","filter","id","onClick","htmlFor","EditableDataGrid","match","parseInt","EventLog","logRef","log","readOnly","scrollTop","scrollHeight","EditEventsGrid","eventLog","labels","colour","highlights","renderHeaderBackground","renderCellBackground","highlight","bgColour","closePath","getCustomCellText","shouldReverseText","split","reverse","join","serailiseCustomData","deserialiseCustomData","oldData","reversed","startsWith","createCols","colDefs","createData","date","label","random","Everything","selectionChanged","selectedRange","isDragging","selectionFinished","selectionCleared","focusColumn","focusedCol","replaceDataLarge","replaceDataSmall","updateCell","onKeyPressed","lastKeyPress","colHeaders","cd","headerCell","JSON","stringify","backgroundColor","paddingLeft","paddingRight","Component","FocusColumnGrid","toggleFrozenCols","freezeCols","KeyboardEventsGrid","ResizeGrid","chooseSize","size","exampleMeta","pathFragment","description","grid","fileName","undefined","range","appendToLog","update","eventType","paddedType","newRange","prevState","to","Index","Examples","exact","path","component","Text","Grid","toggleCode","showSource","source","fetch","then","res","theme","nightOwlLight","code","language","tokens","getLineProps","getTokenProps","line","token","activeClassName","_extends","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","x1","y1","x2","y2","stopColor","_ref","svgRef","title","ForwardRef","forwardRef","viewBox","fillOpacity","strokeLinecap","strokeLinejoin","strokeWidth","transform","shapeRendering","textRendering","imageRendering","fillRule","clipRule","Capability","img","src","alt","examples","el","Home","customRender","inlineEdit","frozenRowsCols","autofill","App","href","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.87a1629e.chunk.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ReactCanvasGrid_1 = require(\"./ReactCanvasGrid\");\nexports.ReactCanvasGrid = ReactCanvasGrid_1.ReactCanvasGrid;\nvar types_1 = require(\"./types\");\nexports.getCellText = types_1.getCellText;\nexports.cellHasTextFunction = types_1.cellHasTextFunction;\nexports.cellIsEditable = types_1.cellIsEditable;\nvar autofill_1 = require(\"./autofill\");\nexports.repeatSelectionIntoFill = autofill_1.repeatSelectionIntoFill;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar scrollbarGeometry_1 = require(\"./scrollbarGeometry\");\nvar GridGeometry = /** @class */ (function () {\n    function GridGeometry() {\n    }\n    /**\n     * Calculate the boundaries of all columns in the grid, excluding borders. The 'left's are inclusive,\n     * the 'right's are exclusive.\n     */\n    GridGeometry.calculateColumnBoundaries = function (columns, borderWidth) {\n        var curLeft = 0;\n        return columns.map(function (col) {\n            // Left is 0-indexed and inclusive. Right is exclusive, so we can just add the width\n            var boundary = { left: curLeft, right: curLeft + col.width };\n            // Add the border width on to skip it - the border is not within the range of any column\n            curLeft += col.width + borderWidth;\n            return boundary;\n        });\n    };\n    /**\n     * Calculate the total size of the grid, including borders, but excluding gutters\n     */\n    GridGeometry.calculateGridSize = function (data, columnBoundaries, rowHeight, borderWidth) {\n        var numRows = data.length;\n        var height = (numRows * rowHeight) + ((numRows - 1) * borderWidth);\n        var width = columnBoundaries.length > 0 ? columnBoundaries[columnBoundaries.length - 1].right : 0;\n        return { width: width, height: height };\n    };\n    /**\n     * Calculates the total size of the grid, including scrollbar gutters\n     */\n    GridGeometry.calculateGridPlusGutterSize = function (gridSize, rootSize) {\n        // If we don't know how big the root element is yet, assume no gutters\n        if (rootSize === null) {\n            return gridSize;\n        }\n        return {\n            width: gridSize.width + (gridSize.height > rootSize.height ? scrollbarGeometry_1.barWidth + scrollbarGeometry_1.barMarginToEdge * 2 : 0),\n            height: gridSize.height + (gridSize.width > rootSize.width ? scrollbarGeometry_1.barWidth + scrollbarGeometry_1.barMarginToEdge * 2 : 0),\n        };\n    };\n    GridGeometry.calculateCanvasSize = function (gridPlusGutterSize, rootSize) {\n        // First render is before componentDidMount, so before we have calculated the root element's size.\n        // In this case, we just render as 0x0. componentDidMount will then update state,\n        // and we'll re-render\n        if (rootSize === null) {\n            return { width: 0, height: 0 };\n        }\n        return {\n            width: Math.min(rootSize.width, gridPlusGutterSize.width),\n            height: Math.min(rootSize.height, gridPlusGutterSize.height),\n        };\n    };\n    /*\n     * Calculate the height of all the frozen rows and their bottom borders\n     */\n    GridGeometry.calculateFrozenRowsHeight = function (rowHeight, borderWidth, frozenRows) {\n        return (rowHeight + borderWidth) * frozenRows;\n    };\n    /*\n     * Calculate the width of all the frozen rows and their right borders\n     */\n    GridGeometry.calculateFrozenColsWidth = function (columnBoundaries, frozenCols, borderWidth) {\n        var rightmostColIndex = frozenCols - 1;\n        if (rightmostColIndex < 0) {\n            return 0;\n        }\n        return columnBoundaries[rightmostColIndex].right + borderWidth;\n    };\n    GridGeometry.calculateGridCellCoordsFromGridState = function (event, rootRef, gridState) {\n        return GridGeometry.calculateGridCellCoords(event, gridState.columnBoundaries(), gridState.borderWidth(), gridState.rowHeight(), gridState.gridOffset(), gridState.data().length - 1, rootRef);\n    };\n    /**\n     * Calculate the column & row index (i.e. \"grid cell coordinates\") that contains a click. The click coordinates\n     * are given in the window/viewport's frame of reference.\n     */\n    GridGeometry.calculateGridCellCoords = function (event, columnBoundaries, borderWidth, rowHeight, gridOffset, maxRow, root) {\n        if (!root) {\n            throw new Error('Cannot convert mouse event coords to grid coords because rootRef is not set');\n        }\n        return GridGeometry.gridPixelToGridCell(GridGeometry.windowPixelToGridPixel({ x: event.clientX, y: event.clientY }, gridOffset, root), columnBoundaries, borderWidth, rowHeight, maxRow);\n    };\n    GridGeometry.calculateGridPixelCoords = function (event, gridOffset, root) {\n        if (!root) {\n            throw new Error('Cannot convert mouse event coords to grid coords because rootRef is not set');\n        }\n        return GridGeometry.windowPixelToGridPixel({ x: event.clientX, y: event.clientY }, gridOffset, root);\n    };\n    GridGeometry.calculateCellBounds = function (colIndex, rowIndex, rowHeight, borderWidth, columnBoundaries) {\n        var cellLeft = columnBoundaries[colIndex].left;\n        var cellRight = columnBoundaries[colIndex].right;\n        var cellWidth = cellRight - cellLeft;\n        return {\n            left: cellLeft,\n            top: rowIndex * (rowHeight + borderWidth),\n            right: cellRight,\n            bottom: rowIndex * (rowHeight + borderWidth) + rowHeight,\n            width: cellWidth,\n            height: rowHeight,\n        };\n    };\n    GridGeometry.calculateGridOffsetFromFraction = function (fraction, gridLength, canvasLength) {\n        return Math.floor((gridLength - canvasLength) * fraction);\n    };\n    GridGeometry.truncateGridOffset = function (oldOffset, gridSize, canvasSize) {\n        var maxX = gridSize.width - canvasSize.width;\n        var maxY = gridSize.height - canvasSize.height;\n        if (oldOffset.x > maxX || oldOffset.y > maxY) {\n            return {\n                x: Math.min(maxX, oldOffset.x),\n                y: Math.min(maxY, oldOffset.y),\n            };\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * Takes an offset in CSS pixels and returns an offset also in CSS pixels, but quantised to\n     * values that produce an integer offset in canvas pixels. This avoids the canvas elements trying\n     * to do any sub-pixel rendering, and thus avoids bluriness in the grid.\n     */\n    GridGeometry.quantiseGridOffset = function (offset, dpr) {\n        return {\n            x: Math.floor(offset.x * dpr) / dpr,\n            y: Math.floor(offset.y * dpr) / dpr,\n        };\n    };\n    GridGeometry.calculateGridOffsetForTargetColumn = function (oldOffset, canvasSize, frozenColsWidth, targetColIndex, columnBoundaries, verticalScrollGutter) {\n        return __assign({}, oldOffset, { x: GridGeometry.calculateGridOffsetXForTargetColumn(oldOffset.x, canvasSize, frozenColsWidth, targetColIndex, columnBoundaries, verticalScrollGutter) });\n    };\n    GridGeometry.calculateGridOffsetForTargetRow = function (oldOffset, canvasSize, frozenRowsHeight, targetRowIndex, rowHeight, borderWidth, numRows, horizontalScrollGutter) {\n        return __assign({}, oldOffset, { y: GridGeometry.calculateGridOffsetYForTargetRow(oldOffset.y, canvasSize, frozenRowsHeight, targetRowIndex, rowHeight, borderWidth, numRows, horizontalScrollGutter) });\n    };\n    GridGeometry.calculateGridOffsetForTargetCell = function (oldOffset, canvasSize, frozenColsWidth, frozenRowsHeight, targetCell, columnBoundaries, rowHeight, borderWidth, numRows, verticalScrollGutter, horizontalScrollGutter) {\n        return {\n            x: GridGeometry.calculateGridOffsetXForTargetColumn(oldOffset.x, canvasSize, frozenColsWidth, targetCell.x, columnBoundaries, verticalScrollGutter),\n            y: GridGeometry.calculateGridOffsetYForTargetRow(oldOffset.y, canvasSize, frozenRowsHeight, targetCell.y, rowHeight, borderWidth, numRows, horizontalScrollGutter),\n        };\n    };\n    GridGeometry.calculateGridOffsetXForTargetColumn = function (oldX, canvasSize, frozenColsWidth, targetColIndex, columnBoundaries, verticalScrollGutter) {\n        if (targetColIndex < 0 || targetColIndex >= columnBoundaries.length) {\n            // The target column index is invalid, so ignore it\n            return oldX;\n        }\n        var gutterWidth = verticalScrollGutter ? verticalScrollGutter.width : 0;\n        var targetBoundaries = columnBoundaries[targetColIndex];\n        var viewLeft = oldX + frozenColsWidth;\n        var viewRight = oldX + canvasSize.width - gutterWidth;\n        if (targetBoundaries.left < viewLeft && targetBoundaries.right > viewRight) {\n            // The target column is wider than the canvas, but already visible - no change needed\n            return oldX;\n        }\n        else if (targetBoundaries.left < viewLeft) {\n            // The target column is to the left, so move offset so it's the leftmost column\n            return Math.max(targetBoundaries.left - frozenColsWidth, 0);\n        }\n        else if (targetBoundaries.right > viewRight) {\n            // The target column is to the right, so move offset so it's the rightmost column\n            return targetBoundaries.right - canvasSize.width + gutterWidth;\n        }\n        else {\n            // Otherwise, the target column must be in view, so no change is needed\n            return oldX;\n        }\n    };\n    GridGeometry.calculateGridOffsetYForTargetRow = function (oldY, canvasSize, frozenRowsHeight, targetRowIndex, rowHeight, borderWidth, numRows, horizontalScrollGutter) {\n        if (targetRowIndex < 0 || targetRowIndex >= (rowHeight + borderWidth) * numRows) {\n            // The target row index is invalid, so ignore it\n            return oldY;\n        }\n        var gutterHeight = horizontalScrollGutter ? horizontalScrollGutter.height : 0;\n        var targetRowTop = (rowHeight + borderWidth) * targetRowIndex;\n        var targetRowBottom = targetRowTop + rowHeight;\n        var viewTop = oldY + frozenRowsHeight;\n        var viewBottom = oldY + canvasSize.height - gutterHeight;\n        if (targetRowTop < viewTop && targetRowBottom > viewBottom) {\n            // The target row is taller than the canvas, but already visible - no change needed\n            return oldY;\n        }\n        else if (targetRowTop < viewTop) {\n            // The target column is upwards, so move offset so it's the topmost row\n            return Math.max(targetRowTop - frozenRowsHeight, 0);\n        }\n        else if (targetRowBottom > viewBottom) {\n            // The target row is downwards, so move offset so it's the bottommost column\n            return targetRowBottom - canvasSize.height + gutterHeight;\n        }\n        else {\n            // Otherwise, the target row must be in view, so no change is needed\n            return oldY;\n        }\n    };\n    /**\n     * Calculates the area of the grid visible on the canvas\n     */\n    GridGeometry.calculateVisibleRect = function (gridOffset, canvasSize) {\n        return {\n            top: gridOffset.y,\n            bottom: gridOffset.y + canvasSize.height,\n            height: canvasSize.height,\n            left: gridOffset.x,\n            right: gridOffset.x + canvasSize.width,\n            width: canvasSize.width,\n        };\n    };\n    GridGeometry.isWindowPixelWithinComponent = function (event, root) {\n        if (!root) {\n            throw new Error('Cannot convert window coords to component coords because rootRef is not set');\n        }\n        var rootClientRect = root.getBoundingClientRect();\n        return event.clientX >= rootClientRect.left && event.clientX <= rootClientRect.right &&\n            event.clientY >= rootClientRect.top && event.clientY <= rootClientRect.bottom;\n    };\n    GridGeometry.calculateComponentPixel = function (event, root) {\n        return GridGeometry.windowPixelToComponentPixel({ x: event.clientX, y: event.clientY }, root);\n    };\n    GridGeometry.windowPixelToComponentPixel = function (_a, root) {\n        var x = _a.x, y = _a.y;\n        if (!root) {\n            throw new Error('Cannot convert window coords to component coords because rootRef is not set');\n        }\n        var rootClientRect = root.getBoundingClientRect();\n        return {\n            x: x - rootClientRect.left,\n            y: y - rootClientRect.top,\n        };\n    };\n    GridGeometry.windowPixelToGridPixel = function (_a, gridOffset, root) {\n        var x = _a.x, y = _a.y;\n        var rootClientRect = root.getBoundingClientRect();\n        return {\n            x: x + gridOffset.x - rootClientRect.left,\n            y: y + gridOffset.y - rootClientRect.top,\n        };\n    };\n    GridGeometry.gridPixelToGridCell = function (_a, columnBoundaries, borderWidth, rowHeight, maxRow) {\n        var x = _a.x, y = _a.y;\n        // Start with the rightmost col index; it'll be revised down, unless the coord is to the right of all cols\n        var colIndex = columnBoundaries.length - 1;\n        for (var i = 0; i < columnBoundaries.length; i++) {\n            if (columnBoundaries[i].right > x) {\n                colIndex = i;\n                break;\n            }\n        }\n        /*\n        The following (dodgy?) algebra gives the formula for finding the row index, where borders belong to lower cells:\n            Yclick <= (Ycell-1)b + (Ycell)c\n            Yclick <= Ycell(b) - b + Ycell(c)\n            Yclick <= Ycell(b + c) - b\n            Yclick + b <= Ycell(b + c)\n            (Yclick + b)/(b + c) <= Ycell\n            Ycell >= (Yclick + b)/(b + c)\n            Ycell = floor((Yclick + b)/(b + c))\n        It's then truncated to maxRow, in case the coord is beyond the final row\n        */\n        var rowIndex = Math.min(maxRow, Math.floor((y + borderWidth) / (rowHeight + borderWidth)));\n        return {\n            y: rowIndex,\n            x: colIndex,\n        };\n    };\n    return GridGeometry;\n}());\nexports.GridGeometry = GridGeometry;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"../utils\");\nvar colsSelection_1 = require(\"./colsSelection\");\nvar focusOffset_1 = require(\"./focusOffset\");\nvar rowsSelection_1 = require(\"./rowsSelection\");\nvar selectionState_1 = require(\"./selectionState\");\nvar selectionStateFactory_1 = require(\"./selectionStateFactory\");\nfunction createSingleCell(targetCell, cellBounds) {\n    var cell = truncateCoord({ x: targetCell.x, y: targetCell.y }, cellBounds);\n    return new CellsSelection(cell, { left: cell.x, right: cell.x, top: cell.y, bottom: cell.y }, cell, false);\n}\nexports.createSingleCell = createSingleCell;\nvar CellsSelection = /** @class */ (function (_super) {\n    __extends(CellsSelection, _super);\n    function CellsSelection(editCursorCell, selection, focusCell, isSelectionInProgress, autofillDragCell) {\n        if (autofillDragCell === void 0) { autofillDragCell = null; }\n        var _this = _super.call(this, isSelectionInProgress) || this;\n        _this.arrowUp = function (cellBounds) {\n            var targetCell = { x: _this.editCursorCell.x, y: _this.editCursorCell.y - 1 };\n            if (_this.editCursorCell.y === cellBounds.frozenRows && _this.editCursorCell.y > 0) {\n                return colsSelection_1.createSingleColSelection(targetCell, cellBounds);\n            }\n            else {\n                return createSingleCell(targetCell, cellBounds);\n            }\n        };\n        _this.arrowDown = function (cellBounds) {\n            return createSingleCell({ x: _this.editCursorCell.x, y: _this.editCursorCell.y + 1 }, cellBounds);\n        };\n        _this.arrowLeft = function (cellBounds) {\n            var targetCell = { x: _this.editCursorCell.x - 1, y: _this.editCursorCell.y };\n            if (_this.editCursorCell.x === cellBounds.frozenCols && _this.editCursorCell.x > 0) {\n                return rowsSelection_1.createSingleRowSelection(targetCell, cellBounds);\n            }\n            else {\n                return createSingleCell(targetCell, cellBounds);\n            }\n        };\n        _this.arrowRight = function (cellBounds) {\n            return createSingleCell({ x: _this.editCursorCell.x + 1, y: _this.editCursorCell.y }, cellBounds);\n        };\n        _this.shiftArrowUp = function (cellBounds) {\n            if (_this.editCursorCell.y === _this.selection.bottom) {\n                var newY = truncateY(_this.selection.top - 1, cellBounds);\n                var bounds = __assign({}, _this.selection, { top: newY });\n                var focusCell = { x: _this.focusCell.x, y: newY };\n                return new CellsSelection(_this.editCursorCell, bounds, focusCell, false);\n            }\n            else {\n                var newY = truncateY(_this.selection.bottom - 1, cellBounds);\n                var bounds = __assign({}, _this.selection, { bottom: newY });\n                var focusCell = { x: _this.focusCell.x, y: newY };\n                return new CellsSelection(_this.editCursorCell, bounds, focusCell, false);\n            }\n        };\n        _this.shiftArrowDown = function (cellBounds) {\n            if (_this.editCursorCell.y === _this.selection.top) {\n                var newY = truncateY(_this.selection.bottom + 1, cellBounds);\n                var bounds = __assign({}, _this.selection, { bottom: newY });\n                var focusCell = { x: _this.focusCell.x, y: newY };\n                return new CellsSelection(_this.editCursorCell, bounds, focusCell, false);\n            }\n            else {\n                var newY = truncateY(_this.selection.top + 1, cellBounds);\n                var bounds = __assign({}, _this.selection, { top: newY });\n                var focusCell = { x: _this.focusCell.x, y: newY };\n                return new CellsSelection(_this.editCursorCell, bounds, focusCell, false);\n            }\n        };\n        _this.shiftArrowLeft = function (cellBounds) {\n            if (_this.editCursorCell.x === _this.selection.right) {\n                var newX = truncateX(_this.selection.left - 1, cellBounds);\n                var bounds = __assign({}, _this.selection, { left: newX });\n                var focusCell = { y: _this.focusCell.y, x: newX };\n                return new CellsSelection(_this.editCursorCell, bounds, focusCell, false);\n            }\n            else {\n                var newX = truncateX(_this.selection.right - 1, cellBounds);\n                var bounds = __assign({}, _this.selection, { right: newX });\n                var focusCell = { y: _this.focusCell.y, x: newX };\n                return new CellsSelection(_this.editCursorCell, bounds, focusCell, false);\n            }\n        };\n        _this.shiftArrowRight = function (cellBounds) {\n            if (_this.editCursorCell.x === _this.selection.left) {\n                var newX = truncateX(_this.selection.right + 1, cellBounds);\n                var bounds = __assign({}, _this.selection, { right: newX });\n                var focusCell = { y: _this.focusCell.y, x: newX };\n                return new CellsSelection(_this.editCursorCell, bounds, focusCell, false);\n            }\n            else {\n                var newX = truncateX(_this.selection.left + 1, cellBounds);\n                var bounds = __assign({}, _this.selection, { left: newX });\n                var focusCell = { y: _this.focusCell.y, x: newX };\n                return new CellsSelection(_this.editCursorCell, bounds, focusCell, false);\n            }\n        };\n        _this.mouseDown = function (cell, meta) { return selectionStateFactory_1.createSelectionStateForMouseDown(cell, meta); };\n        _this.shiftMouseDown = function (cell, meta) {\n            if (meta.region !== 'cells') {\n                return _this;\n            }\n            var bounds = _this.selectionBoundsTo(cell);\n            return new CellsSelection(_this.editCursorCell, bounds, cell, true);\n        };\n        _this.mouseMove = function (cell) {\n            if (_this.autofillDragCell !== null) {\n                if (!utils_1.equalCoord(cell, _this.autofillDragCell)) {\n                    return new CellsSelection(_this.editCursorCell, _this.selection, cell, true, cell);\n                }\n            }\n            else if (_this.isSelectionInProgress) {\n                var bounds = _this.selectionBoundsTo(cell);\n                if (!utils_1.equalBounds(_this.selection, bounds)) {\n                    return new CellsSelection(_this.editCursorCell, bounds, cell, true);\n                }\n            }\n            return _this;\n        };\n        _this.mouseUp = function () {\n            if (_this.autofillDragCell !== null) {\n                var fillRange = _this.getAutofillRange();\n                if (fillRange) {\n                    var mergedRange = mergeBounds(_this.selection, fillRange);\n                    return new CellsSelection(_this.editCursorCell, mergedRange, _this.focusCell, false, null);\n                }\n                else {\n                    return new CellsSelection(_this.editCursorCell, _this.selection, _this.focusCell, false, null);\n                }\n            }\n            else if (_this.isSelectionInProgress) {\n                return new CellsSelection(_this.editCursorCell, _this.selection, _this.focusCell, false);\n            }\n            else {\n                return _this;\n            }\n        };\n        _this.mouseDownOnAutofillHandle = function () {\n            return new CellsSelection(_this.editCursorCell, _this.selection, _this.focusCell, true, _this.editCursorCell);\n        };\n        _this.getSelectionRange = function () {\n            return {\n                topLeft: {\n                    x: _this.selection.left,\n                    y: _this.selection.top,\n                },\n                bottomRight: {\n                    x: _this.selection.right,\n                    y: _this.selection.bottom,\n                },\n            };\n        };\n        _this.getFocusGridOffset = function (gridState) {\n            return focusOffset_1.calculateGridOffsetForTargetCell(gridState, _this.focusCell);\n        };\n        _this.getCursorCell = function () { return _this.editCursorCell; };\n        _this.isAutofillDragging = function () { return _this.autofillDragCell !== null; };\n        _this.getAutofillRange = function () {\n            if (_this.autofillDragCell === null) {\n                return null;\n            }\n            var selRange = _this.getSelectionRange();\n            if (_this.autofillDragCell.y > selRange.bottomRight.y) {\n                // Below the selection\n                return {\n                    topLeft: {\n                        x: selRange.topLeft.x,\n                        y: selRange.bottomRight.y + 1,\n                    },\n                    bottomRight: {\n                        x: selRange.bottomRight.x,\n                        y: _this.autofillDragCell.y,\n                    },\n                };\n            }\n            else if (_this.autofillDragCell.y < selRange.topLeft.y) {\n                // Above the selection\n                return {\n                    topLeft: {\n                        x: selRange.topLeft.x,\n                        y: _this.autofillDragCell.y,\n                    },\n                    bottomRight: {\n                        x: selRange.bottomRight.x,\n                        y: selRange.topLeft.y - 1,\n                    },\n                };\n            }\n            else if (_this.autofillDragCell.x > selRange.bottomRight.x) {\n                // Right of the selection\n                return {\n                    topLeft: {\n                        x: selRange.bottomRight.x + 1,\n                        y: selRange.topLeft.y,\n                    },\n                    bottomRight: {\n                        x: _this.autofillDragCell.x,\n                        y: selRange.bottomRight.y,\n                    },\n                };\n            }\n            else if (_this.autofillDragCell.x < selRange.topLeft.x) {\n                // Left of the selection\n                return {\n                    topLeft: {\n                        x: _this.autofillDragCell.x,\n                        y: selRange.topLeft.y,\n                    },\n                    bottomRight: {\n                        x: selRange.topLeft.x - 1,\n                        y: selRange.bottomRight.y,\n                    },\n                };\n            }\n            else {\n                return null;\n            }\n        };\n        _this.selectionBoundsTo = function (cell) {\n            return {\n                left: Math.min(_this.editCursorCell.x, cell.x),\n                right: Math.max(_this.editCursorCell.x, cell.x),\n                top: Math.min(_this.editCursorCell.y, cell.y),\n                bottom: Math.max(_this.editCursorCell.y, cell.y),\n            };\n        };\n        _this.editCursorCell = editCursorCell;\n        _this.selection = selection;\n        _this.focusCell = focusCell,\n            _this.autofillDragCell = autofillDragCell;\n        return _this;\n    }\n    return CellsSelection;\n}(selectionState_1.BaseSelectionState));\nexports.CellsSelection = CellsSelection;\nvar truncateCoord = function (coord, cellBounds) {\n    return {\n        x: Math.min(Math.max(coord.x, cellBounds.frozenCols), cellBounds.numCols - 1),\n        y: Math.min(Math.max(coord.y, cellBounds.frozenRows), cellBounds.numRows - 1),\n    };\n};\nvar truncateX = function (x, cellBounds) {\n    return Math.min(Math.max(x, cellBounds.frozenCols), cellBounds.numCols - 1);\n};\nvar truncateY = function (y, cellBounds) {\n    return Math.min(Math.max(y, cellBounds.frozenRows), cellBounds.numRows - 1);\n};\nvar mergeBounds = function (a, b) {\n    return {\n        top: Math.min(a.top, b.topLeft.y),\n        bottom: Math.max(a.bottom, b.bottomRight.y),\n        left: Math.min(a.left, b.topLeft.x),\n        right: Math.max(a.right, b.bottomRight.x),\n    };\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.barWidth = 7;\nexports.barMarginToEdge = 2;\nexports.barCapMargin = 4;\nvar minBarLength = 10;\nfunction getHorizontalScrollbarLength(canvasSize, gridSize, frozenColsWidth) {\n    return calculateLength(canvasSize.width, gridSize.width, frozenColsWidth);\n}\nexports.getHorizontalScrollbarLength = getHorizontalScrollbarLength;\nfunction getVerticalScrollbarLength(canvasSize, gridSize, frozenRowsHeight) {\n    return calculateLength(canvasSize.height, gridSize.height, frozenRowsHeight);\n}\nexports.getVerticalScrollbarLength = getVerticalScrollbarLength;\nfunction calculateLength(canvasLength, gridLength, frozenLength) {\n    var availableLength = canvasLength - frozenLength - exports.barWidth - 2 * exports.barCapMargin - exports.barMarginToEdge;\n    var contentRatio = canvasLength / gridLength;\n    var length = Math.round(availableLength * contentRatio);\n    return Math.max(length, minBarLength);\n}\nexports.calculateLength = calculateLength;\nfunction getHorizontalScrollbarExtent(gridOffset, canvasSize, gridSize, horizontalBarLength, frozenColsWidth) {\n    return calculateExtent(gridOffset.x, canvasSize.width, gridSize.width, horizontalBarLength, frozenColsWidth);\n}\nexports.getHorizontalScrollbarExtent = getHorizontalScrollbarExtent;\nfunction getVerticalScrollbarExtent(gridOffset, canvasSize, gridSize, verticalBarLength, frozenRowsHeight) {\n    return calculateExtent(gridOffset.y, canvasSize.height, gridSize.height, verticalBarLength, frozenRowsHeight);\n}\nexports.getVerticalScrollbarExtent = getVerticalScrollbarExtent;\nfunction calculateExtent(gridOffset, canvasLength, gridLength, barLength, frozenLength) {\n    var scrollableGridLength = gridLength - canvasLength;\n    var scrollFraction = gridOffset / scrollableGridLength;\n    var scrollableCanvasLength = canvasLength - frozenLength - barLength - exports.barWidth - 2 * exports.barCapMargin - exports.barMarginToEdge;\n    var start = Math.round(scrollableCanvasLength * scrollFraction) + frozenLength + exports.barCapMargin;\n    return { start: start, end: start + barLength };\n}\nexports.calculateExtent = calculateExtent;\nfunction getHorizontalScrollbarPos(extent, canvasSize, gridSize) {\n    if (gridSize.width > canvasSize.width) {\n        var transverse = calculateTransversePosition(canvasSize.height);\n        return { extent: extent, transverse: transverse };\n    }\n    else {\n        return null;\n    }\n}\nexports.getHorizontalScrollbarPos = getHorizontalScrollbarPos;\nfunction getVerticalScrollbarPos(extent, canvasSize, gridSize) {\n    if (gridSize.height > canvasSize.height) {\n        var transverse = calculateTransversePosition(canvasSize.width);\n        return { extent: extent, transverse: transverse };\n    }\n    else {\n        return null;\n    }\n}\nexports.getVerticalScrollbarPos = getVerticalScrollbarPos;\nfunction calculateTransversePosition(canvasTransverse) {\n    return canvasTransverse - (exports.barWidth / 2) - exports.barMarginToEdge;\n}\nfunction getVerticalGutterBounds(canvasSize, gridSize) {\n    if (gridSize.height > canvasSize.height) {\n        return {\n            top: 0,\n            left: canvasSize.width - (exports.barWidth + exports.barMarginToEdge * 2),\n            height: canvasSize.height,\n            width: exports.barWidth + exports.barMarginToEdge * 2,\n            bottom: canvasSize.height,\n            right: canvasSize.width,\n        };\n    }\n    else {\n        return null;\n    }\n}\nexports.getVerticalGutterBounds = getVerticalGutterBounds;\nfunction getHorizontalGutterBounds(canvasSize, gridSize) {\n    if (gridSize.width > canvasSize.width) {\n        return {\n            left: 0,\n            top: canvasSize.height - (exports.barWidth + exports.barMarginToEdge * 2),\n            width: canvasSize.width,\n            height: exports.barWidth + exports.barMarginToEdge * 2,\n            right: canvasSize.width,\n            bottom: canvasSize.height,\n        };\n    }\n    else {\n        return null;\n    }\n}\nexports.getHorizontalGutterBounds = getHorizontalGutterBounds;\nfunction calculateFractionFromStartPos(start, frozenLength, canvasLength, barLength) {\n    var scrollableCanvasLength = canvasLength - frozenLength - barLength - exports.barWidth - 2 * exports.barCapMargin - exports.barMarginToEdge;\n    return Math.min(Math.max((start - frozenLength - exports.barCapMargin) / scrollableCanvasLength, 0), 1);\n}\nexports.calculateFractionFromStartPos = calculateFractionFromStartPos;\nfunction getHitScrollBar(coord, horizontalPosition, verticalPosition) {\n    var halfBarHeight = Math.floor(exports.barWidth / 2);\n    if (horizontalPosition) {\n        var hTop = horizontalPosition.transverse - halfBarHeight;\n        var hBottom = horizontalPosition.transverse + halfBarHeight;\n        var hExtent = horizontalPosition.extent;\n        if (coord.x >= hExtent.start && coord.x <= hExtent.end && coord.y >= hTop && coord.y <= hBottom) {\n            return 'x';\n        }\n    }\n    if (verticalPosition) {\n        var vLeft = verticalPosition.transverse - halfBarHeight;\n        var vRight = verticalPosition.transverse + halfBarHeight;\n        var vExtent = verticalPosition.extent;\n        if (coord.y >= vExtent.start && coord.y <= vExtent.end && coord.x >= vLeft && coord.x <= vRight) {\n            return 'y';\n        }\n    }\n    return null;\n}\nexports.getHitScrollBar = getHitScrollBar;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseSelectionState = /** @class */ (function () {\n    function BaseSelectionState(isSelectionInProgress) {\n        this.isSelectionInProgress = isSelectionInProgress;\n    }\n    return BaseSelectionState;\n}());\nexports.BaseSelectionState = BaseSelectionState;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar allGridSelection_1 = require(\"./allGridSelection\");\nvar cellsSelection_1 = require(\"./cellsSelection\");\nvar colsSelection_1 = require(\"./colsSelection\");\nvar rowsSelection_1 = require(\"./rowsSelection\");\nexports.createSelectionStateForMouseDown = function (cell, meta) {\n    switch (meta.region) {\n        case 'cells':\n            return new cellsSelection_1.CellsSelection(cell, { left: cell.x, right: cell.x, top: cell.y, bottom: cell.y }, cell, true);\n        case 'frozen-cols':\n            return new rowsSelection_1.RowsSelection(cell, cell.y, cell.y, true, cell.y);\n        case 'frozen-rows':\n            return new colsSelection_1.ColsSelection(cell, cell.x, cell.x, true, cell.x);\n        case 'frozen-corner':\n            return new allGridSelection_1.AllGridSelection(true);\n        default:\n            throw new Error(\"Unsupported click meta region: \" + meta.region);\n    }\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar instigator_1 = require(\"instigator\");\nvar shallow_equals_1 = __importDefault(require(\"shallow-equals\"));\nvar gridGeometry_1 = require(\"./gridGeometry\");\nvar ScrollbarGeometry = __importStar(require(\"./scrollbarGeometry\"));\nvar noSelection_1 = require(\"./selectionState/noSelection\");\nexports.refEquals = function (a, b) { return a === b; };\nexports.shallowEqualsExceptFunctions = function (a, b) {\n    if (typeof a === 'function' && typeof b === 'function') {\n        return a === b;\n    }\n    else {\n        return shallow_equals_1.default(a, b);\n    }\n};\nvar GridState = /** @class */ (function () {\n    function GridState(columns, data, rowHeight, borderWidth, frozenRows, frozenCols, shouldAllowAutofill) {\n        this.columns = instigator_1.activeSource(columns);\n        this.data = instigator_1.activeSource(data);\n        this.rowHeight = instigator_1.activeSource(rowHeight);\n        this.borderWidth = instigator_1.activeSource(borderWidth);\n        this.frozenRows = instigator_1.activeSource(frozenRows);\n        this.frozenCols = instigator_1.activeSource(frozenCols);\n        this.shouldAllowAutofill = instigator_1.activeSource(shouldAllowAutofill, exports.refEquals);\n        this.dpr = instigator_1.activeSource(window.devicePixelRatio);\n        this.rootSize = instigator_1.activeSource(null);\n        this.gridOffsetRaw = instigator_1.activeSource({ x: 0, y: 0 });\n        this.selectionState = instigator_1.activeSource(new noSelection_1.NoSelection(false));\n        this.hoveredScrollbar = instigator_1.activeSource(null);\n        this.autofillHandleIsHovered = instigator_1.activeSource(false);\n        this.gridOffset = instigator_1.transformer([this.gridOffsetRaw, this.dpr], gridGeometry_1.GridGeometry.quantiseGridOffset);\n        this.columnBoundaries = instigator_1.transformer([this.columns, this.borderWidth], gridGeometry_1.GridGeometry.calculateColumnBoundaries);\n        this.gridInnerSize = instigator_1.transformer([this.data, this.columnBoundaries, this.rowHeight, this.borderWidth], gridGeometry_1.GridGeometry.calculateGridSize);\n        this.gridSize = instigator_1.transformer([this.gridInnerSize, this.rootSize], gridGeometry_1.GridGeometry.calculateGridPlusGutterSize);\n        this.cellBounds = instigator_1.transformer([this.data, this.columns, this.frozenRows, this.frozenCols], function (d, c, fr, fc) { return ({\n            numCols: c.length,\n            numRows: d.length,\n            frozenCols: fc,\n            frozenRows: fr,\n        }); });\n        this.canvasSize = instigator_1.transformer([this.gridSize, this.rootSize], gridGeometry_1.GridGeometry.calculateCanvasSize);\n        this.visibleRect = instigator_1.transformer([this.gridOffset, this.canvasSize], gridGeometry_1.GridGeometry.calculateVisibleRect);\n        this.frozenColsWidth = instigator_1.transformer([this.columnBoundaries, this.frozenCols, this.borderWidth], gridGeometry_1.GridGeometry.calculateFrozenColsWidth);\n        this.frozenRowsHeight = instigator_1.transformer([this.rowHeight, this.borderWidth, this.frozenRows], gridGeometry_1.GridGeometry.calculateFrozenRowsHeight);\n        this.horizontalScrollbarLength = instigator_1.transformer([this.canvasSize, this.gridSize, this.frozenColsWidth], ScrollbarGeometry.getHorizontalScrollbarLength);\n        this.verticalScrollbarLength = instigator_1.transformer([this.canvasSize, this.gridSize, this.frozenRowsHeight], ScrollbarGeometry.getVerticalScrollbarLength);\n        this.horizontalScrollbarExtent = instigator_1.transformer([this.gridOffset, this.canvasSize, this.gridSize, this.horizontalScrollbarLength, this.frozenColsWidth], ScrollbarGeometry.getHorizontalScrollbarExtent);\n        this.verticalScrollbarExtent = instigator_1.transformer([this.gridOffset, this.canvasSize, this.gridSize, this.verticalScrollbarLength, this.frozenRowsHeight], ScrollbarGeometry.getVerticalScrollbarExtent);\n        this.horizontalScrollbarPos = instigator_1.transformer([this.horizontalScrollbarExtent, this.canvasSize, this.gridSize], ScrollbarGeometry.getHorizontalScrollbarPos);\n        this.verticalScrollbarPos = instigator_1.transformer([this.verticalScrollbarExtent, this.canvasSize, this.gridSize], ScrollbarGeometry.getVerticalScrollbarPos);\n        this.horizontalGutterBounds = instigator_1.transformer([this.canvasSize, this.gridInnerSize], ScrollbarGeometry.getHorizontalGutterBounds);\n        this.verticalGutterBounds = instigator_1.transformer([this.canvasSize, this.gridInnerSize], ScrollbarGeometry.getVerticalGutterBounds);\n        this.cursorType = instigator_1.transformer([this.autofillHandleIsHovered], function (h) { return h ? 'crosshair' : 'default'; });\n    }\n    return GridState;\n}());\nexports.GridState = GridState;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar selectionState_1 = require(\"./selectionState\");\nvar selectionStateFactory_1 = require(\"./selectionStateFactory\");\nvar NoSelection = /** @class */ (function (_super) {\n    __extends(NoSelection, _super);\n    function NoSelection() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.arrowUp = function () { return _this; };\n        _this.arrowDown = function () { return _this; };\n        _this.arrowLeft = function () { return _this; };\n        _this.arrowRight = function () { return _this; };\n        _this.shiftArrowUp = function () { return _this; };\n        _this.shiftArrowDown = function () { return _this; };\n        _this.shiftArrowLeft = function () { return _this; };\n        _this.shiftArrowRight = function () { return _this; };\n        _this.mouseMove = function () { return _this; };\n        _this.mouseUp = function () { return _this; };\n        _this.mouseDown = function (cell, meta) { return selectionStateFactory_1.createSelectionStateForMouseDown(cell, meta); };\n        _this.shiftMouseDown = function (cell, meta) {\n            return _this.mouseDown(cell, meta);\n        };\n        _this.getSelectionRange = function () { return null; };\n        _this.getCursorCell = function () { return null; };\n        _this.getFocusGridOffset = function (_) { return null; };\n        return _this;\n    }\n    return NoSelection;\n}(selectionState_1.BaseSelectionState));\nexports.NoSelection = NoSelection;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nvar GridCanvas_1 = require(\"./GridCanvas\");\nvar HighlightCanvas_1 = require(\"./HighlightCanvas\");\nexports.HighlightedGridCanvas = function (props) {\n    return (React.createElement(React.Fragment, null,\n        React.createElement(GridCanvas_1.GridCanvas, { name: props.name, top: props.top, left: props.left, width: props.width, height: props.height, dpr: props.dpr, gridState: props.gridState, posProps: props.posProps }),\n        React.createElement(HighlightCanvas_1.HighlightCanvas, { name: props.name + \"-highlight\", top: props.top, left: props.left, width: props.width, height: props.height, dpr: props.dpr, gridState: props.gridState, posProps: props.posProps })));\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction numberBetween(num, min, max) {\n    return Math.max(Math.min(num, max), min);\n}\nexports.numberBetween = numberBetween;\nfunction equalCoord(a, b) {\n    return a.x === b.x && a.y === b.y;\n}\nexports.equalCoord = equalCoord;\nfunction equalSelectRange(a, b) {\n    return a === b ||\n        (a !== null && b !== null && equalCoord(a.topLeft, b.topLeft) && equalCoord(a.bottomRight, b.bottomRight));\n}\nexports.equalSelectRange = equalSelectRange;\nfunction equalBounds(a, b) {\n    return a === b || (a !== null &&\n        b !== null &&\n        a.top === b.top &&\n        a.bottom === b.bottom &&\n        a.left === b.left &&\n        a.right === b.right);\n}\nexports.equalBounds = equalBounds;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar gridGeometry_1 = require(\"../gridGeometry\");\nvar allGridSelection_1 = require(\"./allGridSelection\");\nvar cellsSelection_1 = require(\"./cellsSelection\");\nvar selectionState_1 = require(\"./selectionState\");\nvar selectionStateFactory_1 = require(\"./selectionStateFactory\");\nfunction createSingleColSelection(targetCell, cellBounds) {\n    var newCell = { x: truncateCol(targetCell.x, cellBounds), y: cellBounds.frozenRows };\n    return new ColsSelection(newCell, newCell.x, newCell.x, false, newCell.x);\n}\nexports.createSingleColSelection = createSingleColSelection;\nvar ColsSelection = /** @class */ (function (_super) {\n    __extends(ColsSelection, _super);\n    function ColsSelection(editCursorCell, selectionStartColIndex, selectionCursorColIndex, isSelectionInProgress, focusColIndex) {\n        var _this = _super.call(this, isSelectionInProgress) || this;\n        _this.arrowUp = function () {\n            return _this;\n        };\n        _this.arrowDown = function (cellBounds) {\n            return cellsSelection_1.createSingleCell(_this.editCursorCell, cellBounds);\n        };\n        _this.arrowLeft = function (cellBounds) {\n            if (_this.editCursorCell.x <= cellBounds.frozenCols && cellBounds.frozenCols > 0) {\n                return new allGridSelection_1.AllGridSelection(false);\n            }\n            else {\n                return createSingleColSelection({ x: _this.editCursorCell.x - 1, y: _this.editCursorCell.y }, cellBounds);\n            }\n        };\n        _this.arrowRight = function (cellBounds) {\n            return createSingleColSelection({ x: _this.editCursorCell.x + 1, y: _this.editCursorCell.y }, cellBounds);\n        };\n        _this.shiftArrowUp = function () {\n            return _this;\n        };\n        _this.shiftArrowDown = function () {\n            return _this;\n        };\n        _this.shiftArrowLeft = function (cellBounds) {\n            var newColIndex = truncateCol(_this.selectionCursorColIndex - 1, cellBounds);\n            return new ColsSelection(_this.editCursorCell, _this.selectionStartColIndex, newColIndex, false, newColIndex);\n        };\n        _this.shiftArrowRight = function (cellBounds) {\n            var neColIndex = truncateCol(_this.selectionCursorColIndex + 1, cellBounds);\n            return new ColsSelection(_this.editCursorCell, _this.selectionStartColIndex, neColIndex, false, neColIndex);\n        };\n        _this.mouseDown = function (cell, meta) { return selectionStateFactory_1.createSelectionStateForMouseDown(cell, meta); };\n        _this.shiftMouseDown = function (cell, meta) {\n            if (meta.region !== 'frozen-rows') {\n                return _this;\n            }\n            return new ColsSelection(_this.editCursorCell, _this.selectionStartColIndex, cell.x, true, cell.x);\n        };\n        _this.mouseMove = function (cell) {\n            if (_this.isSelectionInProgress && cell.x !== _this.selectionCursorColIndex) {\n                return new ColsSelection(_this.editCursorCell, _this.selectionStartColIndex, cell.x, true, cell.x);\n            }\n            else {\n                return _this;\n            }\n        };\n        _this.mouseUp = function () {\n            if (!_this.isSelectionInProgress) {\n                return _this;\n            }\n            else {\n                return new ColsSelection(_this.editCursorCell, _this.selectionStartColIndex, _this.selectionCursorColIndex, false, _this.selectionCursorColIndex);\n            }\n        };\n        _this.getSelectionRange = function (cellBounds) {\n            return {\n                topLeft: {\n                    x: Math.min(_this.selectionStartColIndex, _this.selectionCursorColIndex),\n                    y: 0,\n                },\n                bottomRight: {\n                    x: Math.max(_this.selectionStartColIndex, _this.selectionCursorColIndex),\n                    y: cellBounds.numRows - 1,\n                },\n            };\n        };\n        _this.getFocusGridOffset = function (gridState) {\n            return gridGeometry_1.GridGeometry.calculateGridOffsetForTargetColumn(gridState.gridOffset(), gridState.canvasSize(), gridState.frozenColsWidth(), _this.focusColIndex, gridState.columnBoundaries(), gridState.verticalGutterBounds());\n        };\n        _this.getCursorCell = function () { return _this.editCursorCell; };\n        _this.editCursorCell = editCursorCell;\n        _this.selectionStartColIndex = selectionStartColIndex;\n        _this.selectionCursorColIndex = selectionCursorColIndex;\n        _this.focusColIndex = focusColIndex;\n        return _this;\n    }\n    return ColsSelection;\n}(selectionState_1.BaseSelectionState));\nexports.ColsSelection = ColsSelection;\nvar truncateCol = function (colIndex, cellBounds) {\n    return Math.min(Math.max(colIndex, cellBounds.frozenCols), cellBounds.numCols - 1);\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar colsSelection_1 = require(\"./colsSelection\");\nvar rowsSelection_1 = require(\"./rowsSelection\");\nvar selectionState_1 = require(\"./selectionState\");\nvar selectionStateFactory_1 = require(\"./selectionStateFactory\");\nvar AllGridSelection = /** @class */ (function (_super) {\n    __extends(AllGridSelection, _super);\n    function AllGridSelection() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.arrowDown = function (cellBounds) {\n            return rowsSelection_1.createSingleRowSelection({ x: cellBounds.frozenCols, y: cellBounds.frozenRows }, cellBounds);\n        };\n        _this.arrowRight = function (cellBounds) {\n            return colsSelection_1.createSingleColSelection({ x: cellBounds.frozenCols, y: cellBounds.frozenRows }, cellBounds);\n        };\n        _this.arrowUp = function () { return _this; };\n        _this.arrowLeft = function () { return _this; };\n        _this.shiftArrowUp = function () { return _this; };\n        _this.shiftArrowDown = function () { return _this; };\n        _this.shiftArrowLeft = function () { return _this; };\n        _this.shiftArrowRight = function () { return _this; };\n        _this.mouseMove = function () { return _this; };\n        _this.mouseUp = function () {\n            if (!_this.isSelectionInProgress) {\n                return _this;\n            }\n            else {\n                return new AllGridSelection(false);\n            }\n        };\n        _this.mouseDown = function (cell, meta) { return selectionStateFactory_1.createSelectionStateForMouseDown(cell, meta); };\n        _this.shiftMouseDown = function (cell, meta) {\n            return _this.mouseDown(cell, meta);\n        };\n        _this.getSelectionRange = function (cellBounds) {\n            return {\n                topLeft: {\n                    x: 0,\n                    y: 0,\n                },\n                bottomRight: {\n                    x: cellBounds.numCols - 1,\n                    y: cellBounds.numRows - 1,\n                },\n            };\n        };\n        _this.getCursorCell = function (cellBounds) { return ({\n            x: cellBounds.frozenCols,\n            y: cellBounds.frozenRows,\n        }); };\n        _this.getFocusGridOffset = function (_) { return null; };\n        return _this;\n    }\n    return AllGridSelection;\n}(selectionState_1.BaseSelectionState));\nexports.AllGridSelection = AllGridSelection;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar gridGeometry_1 = require(\"../gridGeometry\");\nvar allGridSelection_1 = require(\"./allGridSelection\");\nvar cellsSelection_1 = require(\"./cellsSelection\");\nvar selectionState_1 = require(\"./selectionState\");\nvar selectionStateFactory_1 = require(\"./selectionStateFactory\");\nfunction createSingleRowSelection(targetCell, cellBounds) {\n    var newCell = { x: cellBounds.frozenCols, y: truncateRow(targetCell.y, cellBounds) };\n    return new RowsSelection(newCell, newCell.y, newCell.y, false, newCell.y);\n}\nexports.createSingleRowSelection = createSingleRowSelection;\nvar RowsSelection = /** @class */ (function (_super) {\n    __extends(RowsSelection, _super);\n    function RowsSelection(editCursorCell, selectionStartRowIndex, selectionCursorRowIndex, isSelectionInProgress, focusRowIndex) {\n        var _this = _super.call(this, isSelectionInProgress) || this;\n        _this.arrowUp = function (cellBounds) {\n            if (_this.editCursorCell.y === cellBounds.frozenRows && _this.editCursorCell.y > 0) {\n                return new allGridSelection_1.AllGridSelection(false);\n            }\n            else {\n                return createSingleRowSelection({ x: _this.editCursorCell.x, y: _this.editCursorCell.y - 1 }, cellBounds);\n            }\n        };\n        _this.arrowDown = function (cellBounds) {\n            return createSingleRowSelection({ x: _this.editCursorCell.x, y: _this.editCursorCell.y + 1 }, cellBounds);\n        };\n        _this.arrowLeft = function () {\n            return _this;\n        };\n        _this.arrowRight = function (cellBounds) {\n            return cellsSelection_1.createSingleCell(_this.editCursorCell, cellBounds);\n        };\n        _this.shiftArrowUp = function (cellBounds) {\n            var newRowIndex = truncateRow(_this.selectionCursorRowIndex - 1, cellBounds);\n            return new RowsSelection(_this.editCursorCell, _this.selectionStartRowIndex, newRowIndex, false, newRowIndex);\n        };\n        _this.shiftArrowDown = function (cellBounds) {\n            var newRowIndex = truncateRow(_this.selectionCursorRowIndex + 1, cellBounds);\n            return new RowsSelection(_this.editCursorCell, _this.selectionStartRowIndex, newRowIndex, false, newRowIndex);\n        };\n        _this.shiftArrowLeft = function () {\n            return _this;\n        };\n        _this.shiftArrowRight = function () {\n            return _this;\n        };\n        _this.mouseDown = function (cell, meta) { return selectionStateFactory_1.createSelectionStateForMouseDown(cell, meta); };\n        _this.shiftMouseDown = function (cell, meta) {\n            if (meta.region !== 'frozen-cols') {\n                return _this;\n            }\n            return new RowsSelection(_this.editCursorCell, _this.selectionStartRowIndex, cell.y, true, cell.y);\n        };\n        _this.mouseMove = function (cell) {\n            if (_this.isSelectionInProgress && cell.y !== _this.selectionCursorRowIndex) {\n                return new RowsSelection(_this.editCursorCell, _this.selectionStartRowIndex, cell.y, true, cell.y);\n            }\n            else {\n                return _this;\n            }\n        };\n        _this.mouseUp = function () {\n            if (!_this.isSelectionInProgress) {\n                return _this;\n            }\n            else {\n                return new RowsSelection(_this.editCursorCell, _this.selectionStartRowIndex, _this.selectionCursorRowIndex, false, _this.selectionCursorRowIndex);\n            }\n        };\n        _this.getSelectionRange = function (cellBounds) {\n            return {\n                topLeft: {\n                    x: 0,\n                    y: Math.min(_this.selectionStartRowIndex, _this.selectionCursorRowIndex),\n                },\n                bottomRight: {\n                    x: cellBounds.numCols - 1,\n                    y: Math.max(_this.selectionStartRowIndex, _this.selectionCursorRowIndex),\n                },\n            };\n        };\n        _this.getFocusGridOffset = function (gridState) {\n            return gridGeometry_1.GridGeometry.calculateGridOffsetForTargetRow(gridState.gridOffset(), gridState.canvasSize(), gridState.frozenRowsHeight(), _this.focusRowIndex, gridState.rowHeight(), gridState.borderWidth(), gridState.data().length, gridState.horizontalGutterBounds());\n        };\n        _this.getCursorCell = function () { return _this.editCursorCell; };\n        _this.editCursorCell = editCursorCell;\n        _this.selectionStartRowIndex = selectionStartRowIndex;\n        _this.selectionCursorRowIndex = selectionCursorRowIndex;\n        _this.focusRowIndex = focusRowIndex;\n        return _this;\n    }\n    return RowsSelection;\n}(selectionState_1.BaseSelectionState));\nexports.RowsSelection = RowsSelection;\nvar truncateRow = function (rowIndex, cellBounds) {\n    return Math.min(Math.max(rowIndex, cellBounds.frozenRows), cellBounds.numRows - 1);\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.borderColour = 'lightgrey';\nvar CommonCanvasRenderer = /** @class */ (function () {\n    function CommonCanvasRenderer(name, canvas, dpr, alpha) {\n        var _this = this;\n        this.queuedRender = null;\n        this.setCanvas = function (canvas) {\n            _this.canvas = canvas;\n            var context = _this.canvas.getContext('2d', { alpha: _this.alpha });\n            if (!context) {\n                throw new Error('Could not create canvas contex');\n            }\n            _this.context = context;\n        };\n        this.name = name;\n        this.alpha = alpha;\n        this.dpr = dpr;\n        // Below is same as setCanvas, copied here to appease compiler\n        this.canvas = canvas;\n        var context = this.canvas.getContext('2d', { alpha: this.alpha });\n        if (!context) {\n            throw new Error('Could not create canvas contex');\n        }\n        this.context = context;\n    }\n    CommonCanvasRenderer.prototype.drawScaled = function (draw, drawUntranslated) {\n        var _this = this;\n        if (this.queuedRender !== null) {\n            return;\n        }\n        this.queuedRender = window.requestAnimationFrame(function () {\n            _this.context.save();\n            _this.context.scale(_this.dpr, _this.dpr);\n            try {\n                if (drawUntranslated) {\n                    drawUntranslated();\n                }\n                _this.context.save();\n                _this.translate();\n                try {\n                    draw();\n                }\n                finally {\n                    _this.context.restore();\n                }\n            }\n            finally {\n                _this.context.restore();\n                _this.queuedRender = null;\n            }\n        });\n    };\n    return CommonCanvasRenderer;\n}());\nexports.CommonCanvasRenderer = CommonCanvasRenderer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cellHasTextFunction = function (cell) {\n    return !!cell.getText;\n};\nexports.getCellText = function (cell) {\n    return exports.cellHasTextFunction(cell) ? cell.getText(cell.data) : cell.text;\n};\nexports.cellIsEditable = function (cell) {\n    return !!cell.editor;\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar commonCanvasRenderer_1 = require(\"../commonCanvasRenderer\");\nvar colours = {\n    grey: {\n        veryLight: 'hsla(0, 0%, 93%, 1)',\n        light: 'hsla(0, 0%, 83%, 1)',\n    },\n    black: {\n        veryTransparent: 'hsla(0, 0%, 0%, 0.4)',\n        transparent: 'hsla(0, 0%, 0%, 0.55)',\n    },\n};\nexports.styles = {\n    scrollbar: {\n        defaultFill: colours.black.veryTransparent,\n        hoverFill: colours.black.transparent,\n    },\n    scrollGutters: {\n        fill: colours.grey.veryLight,\n        stroke: colours.grey.light,\n    },\n};\nvar BaseScrollbarRenderer = /** @class */ (function (_super) {\n    __extends(BaseScrollbarRenderer, _super);\n    function BaseScrollbarRenderer(name, canvas, basicProps) {\n        var _this = _super.call(this, name, canvas, basicProps.dpr, false) || this;\n        _this.updateProps = function (canvas, basicProps) {\n            if (_this.canvas !== canvas) {\n                _this.setCanvas(canvas);\n            }\n            _this.basicProps = basicProps;\n            _this.drawScaled(_this.draw);\n        };\n        _this.setCanvas = function (canvas) {\n            _this.canvas = canvas;\n            var context = _this.canvas.getContext('2d', { alpha: false });\n            if (!context) {\n                throw new Error('Could not create canvas contex');\n            }\n            _this.context = context;\n        };\n        _this.basicProps = basicProps;\n        return _this;\n    }\n    return BaseScrollbarRenderer;\n}(commonCanvasRenderer_1.CommonCanvasRenderer));\nexports.BaseScrollbarRenderer = BaseScrollbarRenderer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar autofillMouseEvents_1 = require(\"./autofillMouseEvents\");\nvar gridMouseEvents_1 = require(\"./gridMouseEvents\");\nvar scrollbarMouseEvents_1 = require(\"./scrollbarMouseEvents\");\nvar scrolling_1 = require(\"./scrolling\");\nfunction isLeftButton(event) {\n    // tslint:disable-next-line: no-bitwise\n    return (event.buttons & 1) === 1;\n}\nexports.isLeftButton = isLeftButton;\nfunction handleWheel(e, gridState) {\n    // Browsers may use a 'delta mode' when wheeling, requesting multi-pixel movement\n    // See https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/deltaMode\n    var scaleFactors = {\n        0: 1,\n        1: 16,\n    };\n    var scaleFactor = scaleFactors[e.deltaMode || 0];\n    var willUpdate = scrolling_1.updateOffsetByDelta(e.deltaX * scaleFactor, e.deltaY * scaleFactor, gridState);\n    if (willUpdate) {\n        // The grid is going to move, so we want to prevent any other scrolling from happening\n        e.preventDefault();\n    }\n}\nexports.handleWheel = handleWheel;\nfunction handleMouseDown(event, coord, rootRef, gridState, props, editingCell) {\n    if (scrollbarMouseEvents_1.mouseDownOnScrollbar(coord, gridState)) {\n        return;\n    }\n    else if (autofillMouseEvents_1.mouseDownOnAutofillHandle(event, gridState, rootRef)) {\n        return;\n    }\n    else {\n        gridMouseEvents_1.mouseDownOnGrid(event, coord, rootRef, props, gridState, editingCell);\n    }\n}\nexports.handleMouseDown = handleMouseDown;\nfunction handleMouseMove(event, coord, rootRef, gridState, props, editingCell) {\n    if (scrollbarMouseEvents_1.mouseDragOnScrollbar(coord, gridState)) {\n        return;\n    }\n    else if (gridMouseEvents_1.mouseDragOnGrid(event, rootRef, props, gridState, editingCell)) {\n        return;\n    }\n    else if (autofillMouseEvents_1.mouseHoverOnAutofillHandle(event, gridState, rootRef)) {\n        return;\n    }\n    else {\n        scrollbarMouseEvents_1.mouseHoverOnScrollbar(coord, gridState);\n    }\n}\nexports.handleMouseMove = handleMouseMove;\nfunction handleMouseUp(coord, gridState, props, editingCell) {\n    if (scrollbarMouseEvents_1.mouseUpOnScrollbar()) {\n        scrollbarMouseEvents_1.mouseHoverOnScrollbar(coord, gridState);\n        return;\n    }\n    else {\n        gridMouseEvents_1.mouseUpOnGrid(props, gridState, editingCell);\n    }\n}\nexports.handleMouseUp = handleMouseUp;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"../utils\");\nexports.updateOffsetByDelta = function (deltaX, deltaY, gridState) {\n    if (!gridState.rootSize()) {\n        return false;\n    }\n    var canvasSize = gridState.canvasSize();\n    var gridSize = gridState.gridSize();\n    var gridOffset = gridState.gridOffset();\n    var newX = utils_1.numberBetween(gridOffset.x + deltaX, 0, gridSize.width - canvasSize.width);\n    var newY = utils_1.numberBetween(gridOffset.y + deltaY, 0, gridSize.height - canvasSize.height);\n    if (newX === gridOffset.x && newY === gridOffset.y) {\n        // We won't be moving, so return false\n        return false;\n    }\n    gridState.gridOffsetRaw({ x: newX, y: newY });\n    // We did move, so return true\n    return true;\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar commonCanvasRenderer_1 = require(\"./commonCanvasRenderer\");\nvar defaultPosProps = {\n    gridOffset: { x: 0, y: 0 },\n    visibleRect: { left: 0, top: 0, right: 0, bottom: 0, height: 0, width: 0 },\n};\nvar BaseGridOffsetRenderer = /** @class */ (function (_super) {\n    __extends(BaseGridOffsetRenderer, _super);\n    function BaseGridOffsetRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.posProps = defaultPosProps;\n        return _this;\n    }\n    BaseGridOffsetRenderer.prototype.translate = function () {\n        this.context.translate(-this.posProps.gridOffset.x, -this.posProps.gridOffset.y);\n    };\n    return BaseGridOffsetRenderer;\n}(commonCanvasRenderer_1.CommonCanvasRenderer));\nexports.BaseGridOffsetRenderer = BaseGridOffsetRenderer;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar shallow_equals_1 = __importDefault(require(\"shallow-equals\"));\nvar baseGridOffsetRenderer_1 = require(\"./baseGridOffsetRenderer\");\nvar gridGeometry_1 = require(\"./gridGeometry\");\nvar cellsSelection_1 = require(\"./selectionState/cellsSelection\");\nvar noSelection_1 = require(\"./selectionState/noSelection\");\nvar defaultHoverProps = {\n    autofillHandleIsHovered: false,\n};\nvar colours = {\n    blue: {\n        mediumTransparent: 'hsla(214, 78%, 51%, 0.25)',\n        medium: 'hsla(214, 78%, 51%, 1)',\n        light: 'hsla(214, 93%, 64%, 1)',\n    },\n};\nvar styles = {\n    selectedCells: {\n        fill: colours.blue.mediumTransparent,\n        stroke: colours.blue.medium,\n    },\n    autofillCells: {\n        stroke: colours.blue.medium,\n    },\n    autofillHandle: {\n        defaultFill: colours.blue.medium,\n        hoverFill: colours.blue.light,\n    },\n};\nvar HighlightCanvasRenderer = /** @class */ (function (_super) {\n    __extends(HighlightCanvasRenderer, _super);\n    function HighlightCanvasRenderer(name, canvas, basicProps, dpr) {\n        var _this = _super.call(this, name, canvas, dpr, true) || this;\n        _this.hoverProps = defaultHoverProps;\n        _this.selectionProps = {\n            selectionState: new noSelection_1.NoSelection(false),\n        };\n        _this.drawUntranslated = function () {\n            // Clear the higlight layer\n            _this.context.clearRect(0, 0, _this.canvas.width, _this.canvas.height);\n        };\n        _this.draw = function () {\n            var context = _this.context;\n            context.lineCap = 'butt';\n            context.fillStyle = styles.selectedCells.fill;\n            context.strokeStyle = styles.selectedCells.stroke;\n            // Draw edit cursor cell outline\n            var editCursorCell = _this.selectionProps.selectionState.getCursorCell(_this.basicProps.cellBounds);\n            if (editCursorCell) {\n                context.lineWidth = 2;\n                var rect = _this.gridCellCoordToGridPixelCoord(editCursorCell);\n                context.strokeRect(rect.left, rect.top, rect.width, rect.height);\n                context.lineWidth = 1;\n            }\n            // Draw selected cell highlights\n            var selectionRange = _this.selectionProps.selectionState.getSelectionRange(_this.basicProps.cellBounds);\n            if (selectionRange && isSelectionMoreThanOneCell(selectionRange)) {\n                var tl = _this.gridCellCoordToGridPixelCoord(selectionRange.topLeft);\n                var br = _this.gridCellCoordToGridPixelCoord(selectionRange.bottomRight);\n                context.fillRect(tl.left, tl.top, br.right - tl.left, br.bottom - tl.top);\n                context.strokeRect(tl.left, tl.top, br.right - tl.left, br.bottom - tl.top);\n            }\n            if (_this.selectionProps.selectionState instanceof cellsSelection_1.CellsSelection) {\n                if (selectionRange && _this.basicProps.shouldAllowAutofill(selectionRange)) {\n                    // Draw autofill handle\n                    context.fillStyle = _this.hoverProps.autofillHandleIsHovered ?\n                        styles.autofillHandle.hoverFill :\n                        styles.autofillHandle.defaultFill;\n                    var rect = _this.gridCellCoordToGridPixelCoord(selectionRange.bottomRight);\n                    context.fillRect(rect.right - 3, rect.bottom - 3, 6, 6);\n                    context.strokeRect(rect.right - 3, rect.bottom - 3, 6, 6);\n                }\n                var autofillRange = _this.selectionProps.selectionState.getAutofillRange();\n                if (autofillRange) {\n                    var topLeftRect = _this.gridCellCoordToGridPixelCoord(autofillRange.topLeft);\n                    var bottomRightRect = _this.gridCellCoordToGridPixelCoord(autofillRange.bottomRight);\n                    // Draw the currently dragged autofill range\n                    context.strokeStyle = styles.autofillCells.stroke;\n                    context.setLineDash([5, 7]);\n                    context.strokeRect(topLeftRect.left, topLeftRect.top, bottomRightRect.right - topLeftRect.left, bottomRightRect.bottom - topLeftRect.top);\n                    context.setLineDash([]);\n                }\n            }\n        };\n        _this.gridCellCoordToGridPixelCoord = function (_a) {\n            var x = _a.x, y = _a.y;\n            return gridGeometry_1.GridGeometry.calculateCellBounds(x, y, _this.basicProps.rowHeight, _this.basicProps.borderWidth, _this.basicProps.columnBoundaries);\n        };\n        _this.basicProps = basicProps;\n        return _this;\n    }\n    HighlightCanvasRenderer.prototype.updateProps = function (canvas, basicProps, posProps, hoverProps, selectProps) {\n        if (this.canvas !== canvas) {\n            this.setCanvas(canvas);\n        }\n        this.basicProps = basicProps;\n        this.posProps = posProps;\n        this.hoverProps = hoverProps;\n        this.selectionProps = selectProps;\n        this.drawScaled(this.draw, this.drawUntranslated);\n    };\n    return HighlightCanvasRenderer;\n}(baseGridOffsetRenderer_1.BaseGridOffsetRenderer));\nexports.HighlightCanvasRenderer = HighlightCanvasRenderer;\nfunction isSelectionMoreThanOneCell(selection) {\n    var tl = selection.topLeft;\n    var br = selection.bottomRight;\n    return tl.x !== br.x || tl.y !== br.y;\n}\nfunction shouldSelectionClear(prev, next) {\n    return (!shallow_equals_1.default(prev.columns, next.columns) || prev.data.length !== next.data.length);\n}\nexports.shouldSelectionClear = shouldSelectionClear;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ScrollGeometry = __importStar(require(\"../scrollbarGeometry\"));\nvar baseScrollbarRenderer_1 = require(\"./baseScrollbarRenderer\");\nvar HorizontalScrollbarRenderer = /** @class */ (function (_super) {\n    __extends(HorizontalScrollbarRenderer, _super);\n    function HorizontalScrollbarRenderer(canvas, basicProps) {\n        var _this = _super.call(this, 'horizontal scrollbar', canvas, basicProps) || this;\n        _this.draw = function () {\n            var context = _this.context;\n            // Draw scrollbar gutters\n            var hBounds = _this.basicProps.horizontalGutterBounds;\n            var vBounds = _this.basicProps.verticalGutterBounds;\n            if (hBounds) {\n                _this.context.fillStyle = baseScrollbarRenderer_1.styles.scrollGutters.fill;\n                _this.context.fillRect(hBounds.left, hBounds.top, hBounds.width, hBounds.height);\n                _this.context.strokeStyle = baseScrollbarRenderer_1.styles.scrollGutters.stroke;\n                _this.context.lineWidth = 1;\n                _this.context.beginPath();\n                _this.context.moveTo(0, hBounds.top);\n                _this.context.lineTo(hBounds.width - (vBounds ? vBounds.width : 0), hBounds.top);\n                _this.context.moveTo(0, hBounds.bottom);\n                _this.context.lineTo(hBounds.width, hBounds.bottom);\n                _this.context.stroke();\n            }\n            // Draw horizontal scrollbar (if needed)\n            drawHScrollbar(context, _this.basicProps.horizontalScrollbarPos, _this.basicProps.hoveredScrollbar);\n        };\n        return _this;\n    }\n    HorizontalScrollbarRenderer.prototype.translate = function () {\n        var hBounds = this.basicProps.horizontalGutterBounds;\n        if (hBounds) {\n            this.context.translate(-hBounds.left, -hBounds.top);\n        }\n    };\n    return HorizontalScrollbarRenderer;\n}(baseScrollbarRenderer_1.BaseScrollbarRenderer));\nexports.HorizontalScrollbarRenderer = HorizontalScrollbarRenderer;\nfunction drawHScrollbar(context, horizontalScrollbarPos, hoveredScrollbar) {\n    // Set up for drawing scrollbars\n    context.lineCap = 'round';\n    if (horizontalScrollbarPos) {\n        if (hoveredScrollbar === 'x') {\n            context.strokeStyle = baseScrollbarRenderer_1.styles.scrollbar.hoverFill;\n            context.lineWidth = ScrollGeometry.barWidth + 3;\n        }\n        else {\n            context.strokeStyle = baseScrollbarRenderer_1.styles.scrollbar.defaultFill;\n            context.lineWidth = ScrollGeometry.barWidth;\n        }\n        var scrollPos = horizontalScrollbarPos;\n        context.beginPath();\n        context.moveTo(scrollPos.extent.start, scrollPos.transverse);\n        context.lineTo(scrollPos.extent.end, scrollPos.transverse);\n        context.stroke();\n    }\n}\nexports.drawHScrollbar = drawHScrollbar;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ScrollGeometry = __importStar(require(\"../scrollbarGeometry\"));\nvar baseScrollbarRenderer_1 = require(\"./baseScrollbarRenderer\");\nvar VerticalScrollbarRenderer = /** @class */ (function (_super) {\n    __extends(VerticalScrollbarRenderer, _super);\n    function VerticalScrollbarRenderer(canvas, basicProps) {\n        var _this = _super.call(this, 'vertical scrollbar', canvas, basicProps) || this;\n        _this.draw = function () {\n            var context = _this.context;\n            // Draw scrollbar gutters\n            var vBounds = _this.basicProps.verticalGutterBounds;\n            var hBounds = _this.basicProps.horizontalGutterBounds;\n            if (vBounds) {\n                _this.context.fillStyle = baseScrollbarRenderer_1.styles.scrollGutters.fill;\n                _this.context.fillRect(vBounds.left, vBounds.top, vBounds.width, vBounds.height);\n                _this.context.strokeStyle = baseScrollbarRenderer_1.styles.scrollGutters.stroke;\n                _this.context.lineWidth = 1;\n                _this.context.beginPath();\n                _this.context.moveTo(vBounds.left, 0);\n                _this.context.lineTo(vBounds.left, vBounds.height - (hBounds ? hBounds.height : 0));\n                _this.context.moveTo(vBounds.right, 0);\n                _this.context.lineTo(vBounds.right, vBounds.height);\n                _this.context.stroke();\n            }\n            // Draw vertical scrollbar (if needed)\n            drawVScrollbar(context, _this.basicProps.verticalScrollbarPos, _this.basicProps.hoveredScrollbar);\n        };\n        return _this;\n    }\n    VerticalScrollbarRenderer.prototype.translate = function () {\n        var vBounds = this.basicProps.verticalGutterBounds;\n        if (vBounds) {\n            this.context.translate(-vBounds.left, -vBounds.top);\n        }\n    };\n    return VerticalScrollbarRenderer;\n}(baseScrollbarRenderer_1.BaseScrollbarRenderer));\nexports.VerticalScrollbarRenderer = VerticalScrollbarRenderer;\nfunction drawVScrollbar(context, verticalScrollbarPos, hoveredScrollbar) {\n    // Set up for drawing scrollbars\n    context.lineCap = 'round';\n    if (verticalScrollbarPos) {\n        if (hoveredScrollbar === 'y') {\n            context.strokeStyle = baseScrollbarRenderer_1.styles.scrollbar.hoverFill;\n            context.lineWidth = ScrollGeometry.barWidth + 3;\n        }\n        else {\n            context.strokeStyle = baseScrollbarRenderer_1.styles.scrollbar.defaultFill;\n            context.lineWidth = ScrollGeometry.barWidth;\n        }\n        var scrollPos = verticalScrollbarPos;\n        context.beginPath();\n        context.moveTo(scrollPos.transverse, scrollPos.extent.start);\n        context.lineTo(scrollPos.transverse, scrollPos.extent.end);\n        context.stroke();\n    }\n}\nexports.drawVScrollbar = drawVScrollbar;\n","module.exports = __webpack_public_path__ + \"static/media/autofill.3e882d5d.png\";","module.exports = __webpack_public_path__ + \"static/media/custom-render.77a9d979.png\";","module.exports = __webpack_public_path__ + \"static/media/frozen-rows-cols.f29a6071.png\";","module.exports = __webpack_public_path__ + \"static/media/inline-edit.98a1853c.png\";","module.exports = __webpack_public_path__ + \"static/media/selection-range.ffec50f5.png\";","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar instigator_1 = require(\"instigator\");\nvar React = __importStar(require(\"react\"));\nvar keyboardEvents_1 = require(\"./eventHandlers/keyboardEvents\");\nvar mouseEvents_1 = require(\"./eventHandlers/mouseEvents\");\nvar FrozenCanvas_1 = require(\"./FrozenCanvas\");\nvar gridGeometry_1 = require(\"./gridGeometry\");\nvar gridState_1 = require(\"./gridState\");\nvar highlightCanvasRenderer_1 = require(\"./highlightCanvasRenderer\");\nvar InlineEditor_1 = require(\"./InlineEditor\");\nvar MainCanvas_1 = require(\"./MainCanvas\");\nvar ScrollbarCanvas_1 = require(\"./scrollbars/ScrollbarCanvas\");\nvar noSelection_1 = require(\"./selectionState/noSelection\");\nvar types_1 = require(\"./types\");\nvar ReactCanvasGrid = /** @class */ (function (_super) {\n    __extends(ReactCanvasGrid, _super);\n    function ReactCanvasGrid(props) {\n        var _this = _super.call(this, props) || this;\n        _this.rootRef = React.createRef();\n        _this.onWheel = function (e) {\n            mouseEvents_1.handleWheel(e, _this.gridState);\n        };\n        _this.onMouseDown = function (event) {\n            var gridSize = _this.gridState.gridSize();\n            var coord = gridGeometry_1.GridGeometry.calculateComponentPixel(event, _this.rootRef.current);\n            if (coord.x >= gridSize.width || coord.y >= gridSize.height) {\n                // The click happened within the component but outside the grid, so ignore it\n                return;\n            }\n            mouseEvents_1.handleMouseDown(event, coord, _this.rootRef, _this.gridState, _this.props, _this.state.editingCell);\n        };\n        _this.onMouseMove = function (event) {\n            var coord = gridGeometry_1.GridGeometry.calculateComponentPixel(event, _this.rootRef.current);\n            var gridSize = _this.gridState.gridSize();\n            if (coord.x >= gridSize.width || coord.y >= gridSize.height) {\n                // The drag has gone beyond the edge of the grid (even if still in the component), so ignore it\n                return;\n            }\n            mouseEvents_1.handleMouseMove(event, coord, _this.rootRef, _this.gridState, _this.props, _this.state.editingCell);\n        };\n        _this.onMouseUp = function (event) {\n            instigator_1.batch(function () {\n                var coord = gridGeometry_1.GridGeometry.calculateComponentPixel(event, _this.rootRef.current);\n                mouseEvents_1.handleMouseUp(coord, _this.gridState, _this.props, _this.state.editingCell);\n            });\n        };\n        _this.onDoubleClick = function (event) {\n            var cellCoords = gridGeometry_1.GridGeometry.calculateGridCellCoordsFromGridState(event, _this.rootRef.current, _this.gridState);\n            _this.startEditingCell(cellCoords);\n        };\n        _this.onKeyDown = function (event) {\n            if (!_this.state.editingCell) {\n                keyboardEvents_1.keyDownOnGrid(event, _this.props, _this.gridState);\n            }\n        };\n        _this.startEditingCell = function (cellCoords) {\n            var cellBounds = gridGeometry_1.GridGeometry.calculateCellBounds(cellCoords.x, cellCoords.y, _this.props.rowHeight, _this.props.borderWidth, _this.gridState.columnBoundaries());\n            var col = _this.props.columns[cellCoords.x];\n            var cell = _this.props.data[cellCoords.y][col.fieldName];\n            if (!types_1.cellIsEditable(cell)) {\n                return;\n            }\n            _this.setState({\n                editingCell: __assign({ cell: cell, colIndex: cellCoords.x, rowIndex: cellCoords.y }, cellBounds, { fieldName: col.fieldName }),\n            });\n        };\n        _this.cancelEditingCell = function () {\n            _this.setState({ editingCell: null }, _this.focusRoot);\n        };\n        _this.stopEditingCell = function (newData) {\n            if (_this.state.editingCell === null) {\n                return;\n            }\n            if (_this.props.onCellDataChanged) {\n                _this.props.onCellDataChanged({\n                    cell: _this.state.editingCell.cell,\n                    colIndex: _this.state.editingCell.colIndex,\n                    rowIndex: _this.state.editingCell.rowIndex,\n                    fieldName: _this.state.editingCell.fieldName,\n                    newData: newData,\n                });\n            }\n            _this.setState({ editingCell: null }, _this.focusRoot);\n        };\n        _this.focusRoot = function () {\n            if (_this.rootRef.current) {\n                _this.rootRef.current.focus({ preventScroll: true });\n            }\n        };\n        _this.gridState = new gridState_1.GridState(props.columns, props.data, props.rowHeight, props.borderWidth, props.frozenRows, props.frozenCols, props.shouldAllowAutofill);\n        _this.state = {\n            rootSize: null,\n            gridOffset: _this.gridState.gridOffset(),\n            editingCell: null,\n            cursorType: 'default',\n            dpr: window.devicePixelRatio,\n            horizontalGutterBounds: null,\n            verticalGutterBounds: null,\n        };\n        return _this;\n    }\n    ReactCanvasGrid.prototype.componentDidMount = function () {\n        var _this = this;\n        if (!this.rootRef.current) {\n            throw new Error('root element ref not set in componentDidMount, so cannot determine canvas size');\n        }\n        var rootRect = this.rootRef.current.getBoundingClientRect();\n        this.rootRef.current.addEventListener('wheel', this.onWheel);\n        window.addEventListener('mousemove', this.onMouseMove);\n        window.addEventListener('mouseup', this.onMouseUp);\n        // Set the rootSize, causing a re-render, at which point the canvases will be properly sized.\n        // Once the state has been set and everything has re-rendered, we can set the rootSize, causing\n        // the renderers to redraw.\n        this.setState({ rootSize: { width: rootRect.width, height: rootRect.height } }, function () {\n            _this.gridState.rootSize({ width: rootRect.width, height: rootRect.height });\n        });\n        // Synchronise properties calculated in GridState into react state, to be passed down as props\n        instigator_1.consumer([this.gridState.gridOffset], function (gridOffset) { return _this.setState({ gridOffset: gridOffset }); });\n        instigator_1.consumer([this.gridState.cursorType], function (cursorType) { return _this.setState({ cursorType: cursorType }); });\n        instigator_1.consumer([this.gridState.dpr], function (dpr) { return _this.setState({ dpr: dpr }); });\n        instigator_1.consumer([this.gridState.horizontalGutterBounds], function (horizontalGutterBounds) {\n            return _this.setState({ horizontalGutterBounds: horizontalGutterBounds });\n        });\n        instigator_1.consumer([this.gridState.verticalGutterBounds], function (verticalGutterBounds) {\n            return _this.setState({ verticalGutterBounds: verticalGutterBounds });\n        });\n    };\n    ReactCanvasGrid.prototype.componentDidUpdate = function (prevProps) {\n        var _this = this;\n        if (!this.rootRef.current) {\n            throw new Error('root element ref not set in componentDidMount, so cannot determine canvas size');\n        }\n        var rootRect = this.rootRef.current.getBoundingClientRect();\n        // If the rootSize has changed, set it in state. This will cause a re-render, and the canvas\n        // elements will resize correctly. Once state is set, we can also update the rootSize in\n        // gridState to cause a grid redraw, to update the contents of the canvases.\n        if (this.state.rootSize === null ||\n            this.state.rootSize.width !== rootRect.width ||\n            this.state.rootSize.height !== rootRect.height) {\n            this.setState({ rootSize: { width: rootRect.width, height: rootRect.height } }, function () {\n                _this.gridState.rootSize({ width: rootRect.width, height: rootRect.height });\n            });\n        }\n        instigator_1.batch(function () {\n            _this.gridState.columns(_this.props.columns);\n            _this.gridState.data(_this.props.data);\n            _this.gridState.rowHeight(_this.props.rowHeight);\n            _this.gridState.borderWidth(_this.props.borderWidth);\n            _this.gridState.frozenRows(_this.props.frozenRows);\n            _this.gridState.frozenCols(_this.props.frozenCols);\n            _this.gridState.shouldAllowAutofill(_this.props.shouldAllowAutofill);\n            if (highlightCanvasRenderer_1.shouldSelectionClear(prevProps, _this.props)) {\n                _this.gridState.selectionState(new noSelection_1.NoSelection(false));\n                if (_this.props.onSelectionCleared) {\n                    _this.props.onSelectionCleared();\n                }\n            }\n            var gridSize = _this.gridState.gridSize();\n            var canvasSize = _this.gridState.canvasSize();\n            var truncatedOffset = gridGeometry_1.GridGeometry.truncateGridOffset(_this.gridState.gridOffset(), gridSize, canvasSize);\n            if (truncatedOffset) {\n                _this.gridState.gridOffsetRaw(truncatedOffset);\n            }\n            if (_this.props.focusedColIndex !== null && _this.props.focusedColIndex !== prevProps.focusedColIndex) {\n                var focusedOffset = gridGeometry_1.GridGeometry.calculateGridOffsetForTargetColumn(_this.gridState.gridOffset(), canvasSize, _this.gridState.frozenColsWidth(), _this.props.focusedColIndex, _this.gridState.columnBoundaries(), _this.gridState.verticalGutterBounds());\n                _this.gridState.gridOffsetRaw(focusedOffset);\n            }\n        });\n    };\n    ReactCanvasGrid.prototype.componentWillUnmount = function () {\n        if (this.rootRef.current) {\n            this.rootRef.current.removeEventListener('wheel', this.onWheel);\n        }\n        window.removeEventListener('mousemove', this.onMouseMove);\n        window.removeEventListener('mouseup', this.onMouseUp);\n    };\n    ReactCanvasGrid.prototype.render = function () {\n        // Since we're rendering, the props have just changed. The values in gridState won't update until\n        // componentDidMount is run, however, so we can't use them, and have to calculate fresh values\n        // here in render and throw them away. Props changes should be rare, and unlikely to be extremely\n        // performance sensitive, so this probably won't cause noticeable problems.\n        var columnBoundaries = gridGeometry_1.GridGeometry.calculateColumnBoundaries(this.props.columns, this.props.borderWidth);\n        var gridSize = gridGeometry_1.GridGeometry.calculateGridSize(this.props.data, columnBoundaries, this.props.rowHeight, this.props.borderWidth);\n        var gridPlusGutterSize = gridGeometry_1.GridGeometry.calculateGridPlusGutterSize(gridSize, this.state.rootSize);\n        var canvasSize = gridGeometry_1.GridGeometry.calculateCanvasSize(gridPlusGutterSize, this.state.rootSize);\n        var frozenColsWidth = gridGeometry_1.GridGeometry.calculateFrozenColsWidth(columnBoundaries, this.props.frozenCols, this.props.borderWidth);\n        var frozenRowsHeight = gridGeometry_1.GridGeometry.calculateFrozenRowsHeight(this.props.rowHeight, this.props.borderWidth, this.props.frozenRows);\n        return (React.createElement(\"div\", { ref: this.rootRef, className: \"react-canvas-grid\", onMouseDown: this.onMouseDown, onDoubleClick: this.onDoubleClick, onKeyDown: this.onKeyDown, tabIndex: 1, style: {\n                position: 'relative',\n                width: this.props.cssWidth,\n                height: this.props.cssHeight,\n                overflow: 'hidden',\n                outline: 'none',\n                cursor: this.state.cursorType,\n            } },\n            React.createElement(MainCanvas_1.MainCanvas, { width: canvasSize.width, height: canvasSize.height, frozenColsWidth: frozenColsWidth, frozenRowsHeight: frozenRowsHeight, dpr: this.state.dpr, gridState: this.gridState }),\n            this.state.editingCell &&\n                React.createElement(InlineEditor_1.InlineTextEditor, { cell: this.state.editingCell.cell, left: this.state.editingCell.left, top: this.state.editingCell.top, width: this.state.editingCell.width, height: this.state.editingCell.height, gridOffset: this.state.gridOffset, onSubmit: this.stopEditingCell, onCancel: this.cancelEditingCell }),\n            React.createElement(FrozenCanvas_1.FrozenCanvas, { width: canvasSize.width, height: canvasSize.height, frozenColsWidth: frozenColsWidth, frozenRowsHeight: frozenRowsHeight, dpr: this.state.dpr, gridState: this.gridState, horizontalGutterBounds: this.state.horizontalGutterBounds, verticalGutterBounds: this.state.verticalGutterBounds }),\n            React.createElement(ScrollbarCanvas_1.ScrollbarCanvas, { dpr: this.state.dpr, gridState: this.gridState, horizontalGutterBounds: this.state.horizontalGutterBounds, verticalGutterBounds: this.state.verticalGutterBounds })));\n    };\n    ReactCanvasGrid.defaultProps = {\n        cssWidth: '100%',\n        cssHeight: '100%',\n        borderWidth: 1,\n        frozenRows: 0,\n        frozenCols: 0,\n        focusedColIndex: null,\n        shouldAllowAutofill: function () { return false; },\n    };\n    return ReactCanvasGrid;\n}(React.PureComponent));\nexports.ReactCanvasGrid = ReactCanvasGrid;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"../utils\");\nexports.keyDownOnGrid = function (event, props, gridState) {\n    var selectionState = gridState.selectionState();\n    // Find the appropriate method to call on the selection state\n    var actions = {\n        ArrowRight: { shift: selectionState.shiftArrowRight, noShift: selectionState.arrowRight },\n        ArrowLeft: { shift: selectionState.shiftArrowLeft, noShift: selectionState.arrowLeft },\n        ArrowUp: { shift: selectionState.shiftArrowUp, noShift: selectionState.arrowUp },\n        ArrowDown: { shift: selectionState.shiftArrowDown, noShift: selectionState.arrowDown },\n    };\n    var selectionArrowActions = actions[event.key];\n    if (!selectionArrowActions) {\n        return;\n    }\n    var selectionArrowAction = selectionArrowActions[event.shiftKey ? 'shift' : 'noShift'];\n    var cellBounds = gridState.cellBounds();\n    // Create the new state\n    var newSelState = selectionArrowAction(cellBounds);\n    var selectionRange = newSelState.getSelectionRange(cellBounds);\n    var newOffset = newSelState.getFocusGridOffset(gridState);\n    var oldSelectionRange = selectionState.getSelectionRange(cellBounds);\n    if (selectionRange !== null && !utils_1.equalSelectRange(oldSelectionRange, selectionRange)) {\n        // Start / update prop callback\n        var onStartOrUpdate = event.shiftKey ? props.onSelectionChangeUpdate : props.onSelectionChangeStart;\n        if (onStartOrUpdate) {\n            onStartOrUpdate(selectionRange);\n        }\n        // Scroll\n        if (newOffset !== null) {\n            gridState.gridOffsetRaw(newOffset);\n        }\n        // End prop callback\n        if (props.onSelectionChangeEnd) {\n            props.onSelectionChangeEnd(selectionRange);\n        }\n        // Update selection state\n        gridState.selectionState(newSelState);\n        // Prevent the arrow key from scrolling the page (as we've scrolled in the grid instead)\n        event.preventDefault();\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar gridGeometry_1 = require(\"../gridGeometry\");\nvar cellsSelection_1 = require(\"../selectionState/cellsSelection\");\nexports.mouseDownOnAutofillHandle = function (event, gridState, rootRef) {\n    var selectionState = gridState.selectionState();\n    if (!(selectionState instanceof cellsSelection_1.CellsSelection)) {\n        return false;\n    }\n    var selectionRange = selectionState.getSelectionRange();\n    var shouldAllowAutofill = gridState.shouldAllowAutofill();\n    if (!shouldAllowAutofill(selectionRange)) {\n        return false;\n    }\n    var isHandleHit = isOverAutofillHandle(selectionState, event, gridState, rootRef);\n    if (isHandleHit) {\n        // Start tracking autofill drag\n        var newSelState = selectionState.mouseDownOnAutofillHandle();\n        gridState.selectionState(newSelState);\n        return true;\n    }\n    else {\n        return false;\n    }\n};\nexports.mouseHoverOnAutofillHandle = function (event, gridState, rootRef) {\n    var selectionState = gridState.selectionState();\n    if (selectionState instanceof cellsSelection_1.CellsSelection) {\n        var selectionRange = selectionState.getSelectionRange();\n        var shouldAllowAutofill = gridState.shouldAllowAutofill();\n        if (shouldAllowAutofill(selectionRange)) {\n            var isHandleHit = isOverAutofillHandle(selectionState, event, gridState, rootRef);\n            if (isHandleHit) {\n                gridState.autofillHandleIsHovered(true);\n                return true;\n            }\n        }\n    }\n    gridState.autofillHandleIsHovered(false);\n    return false;\n};\nvar isOverAutofillHandle = function (selectionState, event, gridState, rootRef) {\n    var selectionRange = selectionState.getSelectionRange();\n    var bottomRightCellBounds = gridGeometry_1.GridGeometry.calculateCellBounds(selectionRange.bottomRight.x, selectionRange.bottomRight.y, gridState.rowHeight(), gridState.borderWidth(), gridState.columnBoundaries());\n    var gridPixelCoord = gridGeometry_1.GridGeometry.calculateGridPixelCoords(event, gridState.gridOffset(), rootRef.current);\n    var dx = gridPixelCoord.x - bottomRightCellBounds.right;\n    var dy = gridPixelCoord.y - bottomRightCellBounds.bottom;\n    return Math.abs(dx) <= 3 && Math.abs(dy) <= 3;\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar gridGeometry_1 = require(\"../gridGeometry\");\nfunction calculateGridOffsetForTargetCell(gridState, focusCell) {\n    return gridGeometry_1.GridGeometry.calculateGridOffsetForTargetCell(gridState.gridOffset(), gridState.canvasSize(), gridState.frozenColsWidth(), gridState.frozenRowsHeight(), focusCell, gridState.columnBoundaries(), gridState.rowHeight(), gridState.borderWidth(), gridState.data().length, gridState.verticalGutterBounds(), gridState.horizontalGutterBounds());\n}\nexports.calculateGridOffsetForTargetCell = calculateGridOffsetForTargetCell;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar gridGeometry_1 = require(\"../gridGeometry\");\nvar cellsSelection_1 = require(\"../selectionState/cellsSelection\");\nvar noSelection_1 = require(\"../selectionState/noSelection\");\nvar mouseCellAndRegionCalc_1 = require(\"./mouseCellAndRegionCalc\");\nvar mouseEvents_1 = require(\"./mouseEvents\");\nvar scrollingTimer_1 = require(\"./scrollingTimer\");\nexports.mouseDownOnGrid = function (event, componentPixelCoord, rootRef, props, gridState, editingCell) {\n    if (!mouseEvents_1.isLeftButton(event)) {\n        return;\n    }\n    if (editingCell !== null) {\n        // We're editing a cell, so ignore clicks on grid\n        return;\n    }\n    var _a = mouseCellAndRegionCalc_1.getMouseCellCoordAndRegion(event, componentPixelCoord, rootRef, props, gridState), truncatedCoord = _a.truncatedCoord, region = _a.region;\n    // Now we can process the click and update the selection state\n    var selectionState = gridState.selectionState();\n    var process = event.shiftKey ? selectionState.shiftMouseDown : selectionState.mouseDown;\n    var callback = event.shiftKey && !(selectionState instanceof noSelection_1.NoSelection) ?\n        props.onSelectionChangeUpdate :\n        props.onSelectionChangeStart;\n    var newSelState = process(truncatedCoord, { region: region });\n    if (selectionState !== newSelState) {\n        if (callback) {\n            callback(newSelState.getSelectionRange(gridState.cellBounds()));\n        }\n        gridState.selectionState(newSelState);\n    }\n};\nexports.mouseDragOnGrid = function (event, rootRef, props, gridState, editingCell) {\n    if (!mouseEvents_1.isLeftButton(event)) {\n        return false;\n    }\n    if (editingCell !== null) {\n        // We're editing a cell, so ignore grid drags\n        return false;\n    }\n    var selectionState = gridState.selectionState();\n    if (!selectionState.isSelectionInProgress) {\n        // We're not dragging anything, so ignore the mouse move\n        return false;\n    }\n    var componentPixelCoord = gridGeometry_1.GridGeometry.calculateComponentPixel(event, rootRef.current);\n    var recalculateAndUpdateSelection = function () {\n        var truncatedCoord = mouseCellAndRegionCalc_1.getMouseCellCoordAndRegion(event, componentPixelCoord, rootRef, props, gridState).truncatedCoord;\n        // Now we can process the click and update the selection state\n        var newSelState = selectionState.mouseMove(truncatedCoord);\n        var selectionRange = newSelState.getSelectionRange(gridState.cellBounds());\n        if (selectionState !== newSelState && selectionRange !== null) {\n            if (props.onSelectionChangeUpdate) {\n                props.onSelectionChangeUpdate(selectionRange);\n            }\n            gridState.selectionState(newSelState);\n        }\n    };\n    scrollingTimer_1.startScrollBySelectionDragIfNeeded(gridState, componentPixelCoord, recalculateAndUpdateSelection);\n    recalculateAndUpdateSelection();\n    return true;\n};\nexports.mouseUpOnGrid = function (props, gridState, editingCell) {\n    scrollingTimer_1.clearScrollByDragTimer();\n    if (editingCell !== null) {\n        // We're editing a cell, so ignore grid clicks\n        return;\n    }\n    var selectionState = gridState.selectionState();\n    if (!selectionState.isSelectionInProgress) {\n        return;\n    }\n    var newSelState = selectionState.mouseUp();\n    if (selectionState !== newSelState) {\n        if (props.onSelectionChangeEnd) {\n            props.onSelectionChangeEnd(newSelState.getSelectionRange(gridState.cellBounds()));\n        }\n        gridState.selectionState(newSelState);\n    }\n    if (selectionState instanceof cellsSelection_1.CellsSelection && selectionState.isAutofillDragging() &&\n        newSelState instanceof cellsSelection_1.CellsSelection && !newSelState.isAutofillDragging()) {\n        var rangeToFill = selectionState.getAutofillRange();\n        if (rangeToFill && props.onAutofill) {\n            props.onAutofill(selectionState.getSelectionRange(), rangeToFill);\n        }\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar gridGeometry_1 = require(\"../gridGeometry\");\nexports.getMouseCellCoordAndRegion = function (event, componentPixelCoord, rootRef, props, gridState) {\n    // Find the cell coordinates of the mouse event. This is untruncated, and ignoring frozen cell overlays\n    var gridCoords = gridGeometry_1.GridGeometry.calculateGridCellCoordsFromGridState(event, rootRef.current, gridState);\n    // Figure out if the mouse event is in a frozen cell to determine the region\n    var clickInFrozenCols = componentPixelCoord.x < gridState.frozenColsWidth();\n    var clickInFrozenRows = componentPixelCoord.y < gridState.frozenRowsHeight();\n    var region = clickInFrozenCols ?\n        (clickInFrozenRows ? 'frozen-corner' : 'frozen-cols') :\n        (clickInFrozenRows ? 'frozen-rows' : 'cells');\n    // If the mouse event was on a frozen cell, the gridCoords will be for the cell coords 'underneath' the\n    // frozen cell, so we need to update to coordinate to zero\n    switch (region) {\n        case 'frozen-corner':\n            gridCoords.x = 0;\n            gridCoords.y = 0;\n            break;\n        case 'frozen-rows':\n            gridCoords.y = 0;\n            break;\n        case 'frozen-cols':\n            gridCoords.x = 0;\n            break;\n    }\n    // The mouse event may be beyond the grid's actual size, so we need to truncate it (to avoid selections that\n    // include fictional cells)\n    return {\n        truncatedCoord: truncateCoord(gridCoords, props),\n        region: region,\n    };\n};\nvar truncateCoord = function (coord, props) {\n    return {\n        x: Math.min(Math.max(coord.x, props.frozenCols), props.columns.length - 1),\n        y: Math.min(Math.max(coord.y, props.frozenRows), props.data.length - 1),\n    };\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar scrolling_1 = require(\"./scrolling\");\nvar scrollBySelectionDragTimerId = null;\nexports.clearScrollByDragTimer = function () {\n    if (scrollBySelectionDragTimerId) {\n        clearInterval(scrollBySelectionDragTimerId);\n        scrollBySelectionDragTimerId = null;\n    }\n};\nexports.startScrollBySelectionDragIfNeeded = function (gridState, componentPixelCoord, updateSelection, options) {\n    if (options === void 0) { options = {}; }\n    var rootSize = gridState.rootSize();\n    if (!rootSize) {\n        return;\n    }\n    // Clear any old scroll timer - the mouse pos has changed, so we'll set up a new timer if needed\n    exports.clearScrollByDragTimer();\n    var deltaX = 0;\n    if (options.suppressX !== true) {\n        if (componentPixelCoord.x < 10) {\n            deltaX = -15;\n        }\n        else if (componentPixelCoord.x < 20) {\n            deltaX = -10;\n        }\n        else if (componentPixelCoord.x < 40) {\n            deltaX = -5;\n        }\n        else if (componentPixelCoord.x < 50) {\n            deltaX = -1;\n        }\n        else if (componentPixelCoord.x > rootSize.width - 10) {\n            deltaX = 15;\n        }\n        else if (componentPixelCoord.x > rootSize.width - 20) {\n            deltaX = 10;\n        }\n        else if (componentPixelCoord.x > rootSize.width - 40) {\n            deltaX = 5;\n        }\n        else if (componentPixelCoord.x > rootSize.width - 50) {\n            deltaX = 1;\n        }\n    }\n    var deltaY = 0;\n    if (options.suppressY !== true) {\n        if (componentPixelCoord.y < 10) {\n            deltaY = -15;\n        }\n        else if (componentPixelCoord.y < 20) {\n            deltaY = -10;\n        }\n        else if (componentPixelCoord.y < 40) {\n            deltaY = -5;\n        }\n        else if (componentPixelCoord.y < 50) {\n            deltaY = -1;\n        }\n        else if (componentPixelCoord.y > rootSize.height - 10) {\n            deltaY = 15;\n        }\n        else if (componentPixelCoord.y > rootSize.height - 20) {\n            deltaY = 10;\n        }\n        else if (componentPixelCoord.y > rootSize.height - 40) {\n            deltaY = 5;\n        }\n        else if (componentPixelCoord.y > rootSize.height - 50) {\n            deltaY = 1;\n        }\n    }\n    if (deltaX !== 0 || deltaY !== 0) {\n        var updateOffsetByDeltaAndUpdateSelection = function () {\n            scrolling_1.updateOffsetByDelta(deltaX, deltaY, gridState);\n            updateSelection();\n        };\n        scrollBySelectionDragTimerId = setInterval(updateOffsetByDeltaAndUpdateSelection, 10);\n        scrolling_1.updateOffsetByDelta(deltaX, deltaY, gridState);\n    }\n};\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar gridGeometry_1 = require(\"../gridGeometry\");\nvar ScrollbarGeometry = __importStar(require(\"../scrollbarGeometry\"));\nvar draggedScrollbar = null;\nexports.mouseDownOnScrollbar = function (coord, gridState) {\n    var hitScrollbar = ScrollbarGeometry.getHitScrollBar(coord, gridState.horizontalScrollbarPos(), gridState.verticalScrollbarPos());\n    if (hitScrollbar) {\n        draggedScrollbar = {\n            bar: hitScrollbar,\n            origScrollbarStart: hitScrollbar === 'x' ?\n                gridState.horizontalScrollbarPos().extent.start :\n                gridState.verticalScrollbarPos().extent.start,\n            origClick: hitScrollbar === 'x' ? coord.x : coord.y,\n        };\n        return true;\n    }\n    else {\n        return false;\n    }\n};\nexports.mouseDragOnScrollbar = function (coord, gridState) {\n    if (!draggedScrollbar) {\n        return false;\n    }\n    var values = draggedScrollbar.bar === 'x' ?\n        {\n            frozenLen: gridState.frozenColsWidth(),\n            canvasLen: gridState.canvasSize().width,\n            gridLen: gridState.gridSize().width,\n            barLen: gridState.horizontalScrollbarLength(),\n            clickCoord: coord.x,\n        } :\n        {\n            frozenLen: gridState.frozenRowsHeight(),\n            canvasLen: gridState.canvasSize().height,\n            gridLen: gridState.gridSize().height,\n            barLen: gridState.verticalScrollbarLength(),\n            clickCoord: coord.y,\n        };\n    var dragDistance = values.clickCoord - draggedScrollbar.origClick;\n    var desiredStart = draggedScrollbar.origScrollbarStart + dragDistance;\n    var desiredFraction = ScrollbarGeometry.calculateFractionFromStartPos(desiredStart, values.frozenLen, values.canvasLen, values.barLen);\n    var newOffset = gridGeometry_1.GridGeometry.calculateGridOffsetFromFraction(desiredFraction, values.gridLen, values.canvasLen);\n    if (draggedScrollbar.bar === 'x') {\n        gridState.gridOffsetRaw({ x: newOffset, y: gridState.gridOffset().y });\n    }\n    else {\n        gridState.gridOffsetRaw({ x: gridState.gridOffset().x, y: newOffset });\n    }\n    return true;\n};\nexports.mouseHoverOnScrollbar = function (coord, gridState) {\n    var hoveredScrollbar = ScrollbarGeometry.getHitScrollBar(coord, gridState.horizontalScrollbarPos(), gridState.verticalScrollbarPos());\n    gridState.hoveredScrollbar(hoveredScrollbar);\n};\nexports.mouseUpOnScrollbar = function () {\n    if (draggedScrollbar) {\n        draggedScrollbar = null;\n        return true;\n    }\n    else {\n        return false;\n    }\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nvar FrozenColsCanvas_1 = require(\"./FrozenColsCanvas\");\nvar FrozenCornerCanvas_1 = require(\"./FrozenCornerCanvas\");\nvar FrozenRowsCanvas_1 = require(\"./FrozenRowsCanvas\");\nvar FrozenCanvas = /** @class */ (function (_super) {\n    __extends(FrozenCanvas, _super);\n    function FrozenCanvas() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FrozenCanvas.prototype.render = function () {\n        var _a = this.props, horizontalGutterBounds = _a.horizontalGutterBounds, verticalGutterBounds = _a.verticalGutterBounds, coreProps = __rest(_a, [\"horizontalGutterBounds\", \"verticalGutterBounds\"]);\n        return (React.createElement(React.Fragment, null,\n            (this.props.frozenRowsHeight > 0 && this.props.frozenColsWidth > 0) &&\n                React.createElement(FrozenCornerCanvas_1.FrozenCornerCanvas, __assign({}, coreProps)),\n            this.props.frozenRowsHeight > 0 &&\n                React.createElement(FrozenRowsCanvas_1.FrozenRowsCanvas, __assign({}, coreProps, { verticalGutterBounds: verticalGutterBounds })),\n            this.props.frozenColsWidth > 0 &&\n                React.createElement(FrozenColsCanvas_1.FrozenColsCanvas, __assign({}, coreProps, { horizontalGutterBounds: horizontalGutterBounds }))));\n    };\n    return FrozenCanvas;\n}(React.PureComponent));\nexports.FrozenCanvas = FrozenCanvas;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar instigator_1 = require(\"instigator\");\nvar React = __importStar(require(\"react\"));\nvar HighlightedGridCanvas_1 = require(\"./HighlightedGridCanvas\");\nvar FrozenColsCanvas = /** @class */ (function (_super) {\n    __extends(FrozenColsCanvas, _super);\n    function FrozenColsCanvas(props) {\n        var _this = _super.call(this, props) || this;\n        var colsVisibleRect = instigator_1.transformer([props.gridState.visibleRect, props.gridState.frozenRowsHeight, props.gridState.horizontalGutterBounds], function (visibleRect, frozenRowsHeight, horizontalGutterBounds) {\n            var scrollGutterHeight = horizontalGutterBounds ? horizontalGutterBounds.height : 0;\n            return __assign({}, visibleRect, { left: 0, right: visibleRect.width, top: visibleRect.top + frozenRowsHeight, bottom: visibleRect.bottom - scrollGutterHeight, height: visibleRect.height - frozenRowsHeight - scrollGutterHeight });\n        });\n        _this.colsPosProps = instigator_1.transformer([colsVisibleRect], function (visibleRect) { return ({\n            gridOffset: { x: visibleRect.left, y: visibleRect.top },\n            visibleRect: visibleRect,\n        }); });\n        return _this;\n    }\n    FrozenColsCanvas.prototype.render = function () {\n        var horizontalGutterBounds = this.props.horizontalGutterBounds;\n        var scrollGutterHeight = horizontalGutterBounds ? horizontalGutterBounds.height : 0;\n        var props = __assign({}, this.props, { top: this.props.frozenRowsHeight, left: 0, height: this.props.height - this.props.frozenRowsHeight - scrollGutterHeight, width: this.props.frozenColsWidth, posProps: this.colsPosProps });\n        return (React.createElement(HighlightedGridCanvas_1.HighlightedGridCanvas, __assign({}, props, { name: \"cols\" })));\n    };\n    return FrozenColsCanvas;\n}(React.PureComponent));\nexports.FrozenColsCanvas = FrozenColsCanvas;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar instigator_1 = require(\"instigator\");\nvar React = __importStar(require(\"react\"));\nvar gridCanvasRenderer_1 = require(\"./gridCanvasRenderer\");\nvar GridCanvas = /** @class */ (function (_super) {\n    __extends(GridCanvas, _super);\n    function GridCanvas(props) {\n        var _this = _super.call(this, props) || this;\n        _this.canvasRef = React.createRef();\n        _this.renderer = null;\n        _this.renderCallback = null;\n        _this.canvasSizeSource = instigator_1.activeSource({\n            width: props.width,\n            height: props.height,\n        });\n        return _this;\n    }\n    GridCanvas.prototype.render = function () {\n        return (React.createElement(\"canvas\", { ref: this.canvasRef, \"data-name\": this.props.name, width: this.props.width * this.props.dpr, height: this.props.height * this.props.dpr, style: {\n                position: 'absolute',\n                top: this.props.top + \"px\",\n                left: this.props.left + \"px\",\n                width: this.props.width + \"px\",\n                height: this.props.height + \"px\",\n            } }));\n    };\n    GridCanvas.prototype.componentDidMount = function () {\n        var _this = this;\n        if (!this.canvasRef.current) {\n            throw new Error('canvasRef is null in componentDidMount - cannot create renderer');\n        }\n        var gridState = this.props.gridState;\n        var basicProps = instigator_1.mergeTransformer({\n            data: gridState.data,\n            rowHeight: gridState.rowHeight,\n            colBoundaries: gridState.columnBoundaries,\n            columns: gridState.columns,\n            gridInnerSize: gridState.gridInnerSize,\n            borderWidth: gridState.borderWidth,\n        });\n        {\n            var canvasSize = { width: this.props.width, height: this.props.height };\n            this.renderer = new gridCanvasRenderer_1.GridCanvasRenderer(this.canvasRef.current, canvasSize, basicProps(), gridState.dpr(), this.props.name);\n        }\n        var renderCallback = instigator_1.consumer([basicProps, this.props.posProps, this.canvasSizeSource], function (newBasicProps, newPosProps, canvasSize) {\n            if (_this.renderer) {\n                if (!_this.canvasRef.current) {\n                    throw new Error('canvasRef is null in componentDidMount - cannot create renderer');\n                }\n                _this.renderer.updateProps(_this.canvasRef.current, canvasSize, newBasicProps, newPosProps);\n            }\n        });\n        // Force the render - there's no guarantee the consumer's inputs will ever update, so we need to ensure\n        // something is painted to the canvas.\n        renderCallback();\n        this.renderCallback = renderCallback;\n    };\n    GridCanvas.prototype.componentDidUpdate = function () {\n        this.canvasSizeSource({ width: this.props.width, height: this.props.height });\n    };\n    GridCanvas.prototype.componentWillUnmount = function () {\n        if (this.renderCallback) {\n            this.renderCallback.deregister();\n        }\n    };\n    return GridCanvas;\n}(React.PureComponent));\nexports.GridCanvas = GridCanvas;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar shallow_equals_1 = __importDefault(require(\"shallow-equals\"));\nvar baseGridOffsetRenderer_1 = require(\"./baseGridOffsetRenderer\");\nvar cellRenderer_1 = require(\"./cellRenderer\");\nvar commonCanvasRenderer_1 = require(\"./commonCanvasRenderer\");\nvar GridCanvasRenderer = /** @class */ (function (_super) {\n    __extends(GridCanvasRenderer, _super);\n    function GridCanvasRenderer(canvas, canvasSize, basicProps, dpr, name) {\n        var _this = _super.call(this, name, canvas, dpr, false) || this;\n        _this.prevDraw = null;\n        _this.updateProps = function (canvas, canvasSize, basicProps, posProps) {\n            if (_this.canvas !== canvas) {\n                _this.setCanvas(canvas);\n            }\n            if (!shallow_equals_1.default(_this.canvasSize, canvasSize) || !shallow_equals_1.default(_this.basicProps, basicProps)) {\n                _this.prevDraw = null;\n            }\n            _this.canvasSize = canvasSize;\n            _this.basicProps = basicProps;\n            _this.posProps = posProps;\n            _this.drawScaled(_this.draw, _this.drawUntranslated);\n        };\n        _this.drawUntranslated = function () {\n            var prevDraw = _this.prevDraw;\n            var posProps = _this.posProps;\n            if (prevDraw) {\n                // Translate according to difference from previous draw\n                var xDiff = (prevDraw.gridOffset.x - posProps.gridOffset.x);\n                var yDiff = (prevDraw.gridOffset.y - posProps.gridOffset.y);\n                _this.shiftExistingCanvas(xDiff, yDiff);\n                _this.drawNewBorderBackground(xDiff, yDiff, _this.canvasSize.width, _this.canvasSize.height);\n            }\n            else {\n                _this.drawWholeBorderBackground(_this.canvasSize.width, _this.canvasSize.height);\n            }\n        };\n        _this.draw = function () {\n            var prevDraw = _this.prevDraw;\n            var basicProps = _this.basicProps;\n            var posProps = _this.posProps;\n            // Draw cells\n            var colIndex = 0;\n            var minRowIndex = Math.floor(posProps.visibleRect.top / (basicProps.rowHeight + basicProps.borderWidth));\n            var maxRowIndex = Math.min(Math.ceil(posProps.visibleRect.bottom / (basicProps.rowHeight + basicProps.borderWidth)), basicProps.gridInnerSize.height / (basicProps.rowHeight + basicProps.borderWidth));\n            for (var _i = 0, _a = basicProps.colBoundaries; _i < _a.length; _i++) {\n                var _b = _a[_i], cellLeft = _b.left, cellRight = _b.right;\n                if (cellRight < posProps.visibleRect.left) {\n                    // Cell is off screen to left, so skip this column\n                    colIndex++;\n                    continue;\n                }\n                if (cellLeft > posProps.visibleRect.right) {\n                    // Cell is off screen to right, so skip this and all future columns\n                    break;\n                }\n                var col = basicProps.columns[colIndex];\n                for (var rowIndex = minRowIndex; rowIndex < maxRowIndex; rowIndex++) {\n                    var row = basicProps.data[rowIndex];\n                    var cell = row[col.fieldName];\n                    var cellBounds = {\n                        left: cellLeft,\n                        top: rowIndex * (basicProps.rowHeight + basicProps.borderWidth),\n                        right: cellLeft + col.width,\n                        bottom: rowIndex * (basicProps.rowHeight + basicProps.borderWidth) + basicProps.rowHeight,\n                        width: col.width,\n                        height: basicProps.rowHeight,\n                    };\n                    if (prevDraw &&\n                        Math.max(cellLeft, posProps.visibleRect.left) >= prevDraw.rect.left &&\n                        Math.min(cellRight, posProps.visibleRect.right) <= prevDraw.rect.right &&\n                        Math.max(cellBounds.top, posProps.visibleRect.top) >= prevDraw.rect.top &&\n                        Math.min(cellBounds.bottom, posProps.visibleRect.bottom) <= prevDraw.rect.bottom) {\n                        // Visible portion of cell is entirely contained within previously drawn region, so we can skip\n                        continue;\n                    }\n                    cellRenderer_1.drawCell(_this.context, cell, cellBounds, { column: col, rowIndex: rowIndex, colIndex: colIndex });\n                }\n                colIndex++;\n            }\n            // Remember what area is now drawn\n            _this.prevDraw = {\n                gridOffset: posProps.gridOffset,\n                rect: {\n                    left: Math.max(posProps.gridOffset.x, posProps.visibleRect.left),\n                    top: Math.max(posProps.gridOffset.y, posProps.visibleRect.top),\n                    right: Math.min(posProps.gridOffset.x + _this.canvasSize.width, posProps.visibleRect.right),\n                    bottom: Math.min(posProps.gridOffset.y + _this.canvasSize.height, posProps.visibleRect.bottom),\n                },\n            };\n        };\n        _this.canvasSize = canvasSize;\n        _this.basicProps = basicProps;\n        return _this;\n    }\n    /*\n     * Fill the entire canvas with the border colour\n     */\n    GridCanvasRenderer.prototype.drawWholeBorderBackground = function (propsWidth, propsHeight) {\n        // Draw base in border colour; cells will draw over this, leaving only the borders\n        this.context.fillStyle = commonCanvasRenderer_1.borderColour;\n        this.context.fillRect(0, 0, propsWidth, propsHeight);\n    };\n    /*\n     * Copy the current image on the canvas back onto the canvas, shifted by the given delta\n     */\n    GridCanvasRenderer.prototype.shiftExistingCanvas = function (xDiff, yDiff) {\n        this.context.drawImage(this.canvas, 0, 0, this.canvas.width * this.dpr, this.canvas.height * this.dpr, xDiff, yDiff, this.canvas.width, this.canvas.height);\n    };\n    /*\n     * Fill with the border colour along any areas of the canvas that are 'new', i.e. need repainting\n     * because they represent areas of the grid that have just become visible after a scroll\n     */\n    GridCanvasRenderer.prototype.drawNewBorderBackground = function (xDiff, yDiff, propsWidth, propsHeight) {\n        // Draw base in border colour in new areas; cells will draw over this, leaving only the borders\n        // (Note, we might fill a corner twice if scrolling diagnally, but the perf cost seems minimal)\n        this.context.fillStyle = commonCanvasRenderer_1.borderColour;\n        if (yDiff < 0) {\n            // Moved down - draw bottom\n            var top_1 = propsHeight + yDiff;\n            var height = -yDiff;\n            this.context.fillRect(0, top_1, propsWidth, height);\n        }\n        else if (yDiff > 0) {\n            // Moved up - draw top\n            var top_2 = 0;\n            var height = yDiff;\n            this.context.fillRect(0, top_2, propsWidth, height);\n        }\n        if (xDiff < 0) {\n            // Moved right - draw right\n            var left = propsWidth + xDiff;\n            var width = -xDiff;\n            this.context.fillRect(left, 0, width, propsHeight);\n        }\n        else if (xDiff > 0) {\n            // Moved left - draw left\n            var left = 0;\n            var width = xDiff;\n            this.context.fillRect(left, 0, width, propsHeight);\n        }\n    };\n    return GridCanvasRenderer;\n}(baseGridOffsetRenderer_1.BaseGridOffsetRenderer));\nexports.GridCanvasRenderer = GridCanvasRenderer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"./types\");\nexports.drawCell = function (context, cell, cellBounds, metadata) {\n    var renderBackground = cell.renderBackground || drawCellBackgroundDefault;\n    var renderText = cell.renderText || drawCellTextDefault;\n    renderBackground(context, cellBounds, cell, metadata);\n    renderText(context, cellBounds, cell, metadata);\n};\nvar drawCellBackgroundDefault = function (context, cellBounds) {\n    context.fillStyle = 'white';\n    context.fillRect(cellBounds.left, cellBounds.top, cellBounds.width, cellBounds.height);\n};\nvar drawCellTextDefault = function (context, cellBounds, cell) {\n    context.fillStyle = 'black';\n    context.textBaseline = 'middle';\n    var verticalCentre = cellBounds.top + (cellBounds.height / 2);\n    var text = types_1.getCellText(cell);\n    context.fillText(text, cellBounds.left + 2, verticalCentre, cellBounds.width - 4);\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar instigator_1 = require(\"instigator\");\nvar React = __importStar(require(\"react\"));\nvar gridState_1 = require(\"./gridState\");\nvar highlightCanvasRenderer_1 = require(\"./highlightCanvasRenderer\");\nvar HighlightCanvas = /** @class */ (function (_super) {\n    __extends(HighlightCanvas, _super);\n    function HighlightCanvas(props) {\n        var _this = _super.call(this, props) || this;\n        _this.canvasRef = React.createRef();\n        _this.renderer = null;\n        _this.renderCallback = null;\n        return _this;\n    }\n    HighlightCanvas.prototype.render = function () {\n        return (React.createElement(\"canvas\", { ref: this.canvasRef, \"data-name\": this.props.name, width: this.props.width * this.props.dpr, height: this.props.height * this.props.dpr, style: {\n                position: 'absolute',\n                top: this.props.top + \"px\",\n                left: this.props.left + \"px\",\n                width: this.props.width + \"px\",\n                height: this.props.height + \"px\",\n            } }));\n    };\n    HighlightCanvas.prototype.componentDidMount = function () {\n        var _this = this;\n        if (!this.canvasRef.current) {\n            throw new Error('canvasRef is null in componentDidMount - cannot create renderer');\n        }\n        var gridState = this.props.gridState;\n        var basicProps = instigator_1.mergeTransformer({\n            rowHeight: gridState.rowHeight,\n            columnBoundaries: gridState.columnBoundaries,\n            borderWidth: gridState.borderWidth,\n            cellBounds: gridState.cellBounds,\n            shouldAllowAutofill: gridState.shouldAllowAutofill,\n        }, gridState_1.shallowEqualsExceptFunctions);\n        var hoverProps = instigator_1.mergeTransformer({\n            autofillHandleIsHovered: gridState.autofillHandleIsHovered,\n        });\n        var selectionProps = instigator_1.mergeTransformer({ selectionState: gridState.selectionState });\n        this.renderer = new highlightCanvasRenderer_1.HighlightCanvasRenderer(this.props.name, this.canvasRef.current, basicProps(), gridState.dpr());\n        this.renderCallback = instigator_1.consumer([basicProps, this.props.posProps, hoverProps, selectionProps], function (newBasicProps, newPosProps, newHoverProps, newSelectionProps) {\n            if (_this.renderer) {\n                if (!_this.canvasRef.current) {\n                    throw new Error('canvasRef is null in componentDidMount - cannot create renderer');\n                }\n                _this.renderer.updateProps(_this.canvasRef.current, newBasicProps, newPosProps, newHoverProps, newSelectionProps);\n            }\n        });\n    };\n    HighlightCanvas.prototype.componentWillUnmount = function () {\n        if (this.renderCallback) {\n            this.renderCallback.deregister();\n        }\n    };\n    return HighlightCanvas;\n}(React.PureComponent));\nexports.HighlightCanvas = HighlightCanvas;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar instigator_1 = require(\"instigator\");\nvar React = __importStar(require(\"react\"));\nvar HighlightedGridCanvas_1 = require(\"./HighlightedGridCanvas\");\nvar FrozenCornerCanvas = /** @class */ (function (_super) {\n    __extends(FrozenCornerCanvas, _super);\n    function FrozenCornerCanvas(props) {\n        var _this = _super.call(this, props) || this;\n        var cornerVisibleRect = instigator_1.transformer([props.gridState.visibleRect], function (visibleRect) {\n            return __assign({}, visibleRect, { top: 0, left: 0, right: visibleRect.width, bottom: visibleRect.height });\n        });\n        _this.cornerPosProps = instigator_1.transformer([cornerVisibleRect], function (visibleRect) { return ({\n            gridOffset: { x: visibleRect.left, y: visibleRect.top },\n            visibleRect: visibleRect,\n        }); });\n        return _this;\n    }\n    FrozenCornerCanvas.prototype.render = function () {\n        var props = __assign({}, this.props, { top: 0, left: 0, height: this.props.frozenRowsHeight, width: this.props.frozenColsWidth, posProps: this.cornerPosProps });\n        return (React.createElement(HighlightedGridCanvas_1.HighlightedGridCanvas, __assign({}, props, { name: \"corner\" })));\n    };\n    return FrozenCornerCanvas;\n}(React.PureComponent));\nexports.FrozenCornerCanvas = FrozenCornerCanvas;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar instigator_1 = require(\"instigator\");\nvar React = __importStar(require(\"react\"));\nvar HighlightedGridCanvas_1 = require(\"./HighlightedGridCanvas\");\nvar FrozenRowsCanvas = /** @class */ (function (_super) {\n    __extends(FrozenRowsCanvas, _super);\n    function FrozenRowsCanvas(props) {\n        var _this = _super.call(this, props) || this;\n        var rowsVisibleRect = instigator_1.transformer([props.gridState.visibleRect, props.gridState.frozenColsWidth, props.gridState.verticalGutterBounds], function (visibleRect, frozenColsWidth, verticalGutterBounds) {\n            var scrollGutterWidth = verticalGutterBounds ? verticalGutterBounds.width : 0;\n            return __assign({}, visibleRect, { top: 0, bottom: visibleRect.height, left: visibleRect.left + frozenColsWidth, right: visibleRect.right - scrollGutterWidth, width: visibleRect.width - frozenColsWidth - scrollGutterWidth });\n        });\n        _this.rowsPosProps = instigator_1.transformer([rowsVisibleRect], function (visibleRect) { return ({\n            gridOffset: { x: visibleRect.left, y: visibleRect.top },\n            visibleRect: visibleRect,\n        }); });\n        return _this;\n    }\n    FrozenRowsCanvas.prototype.render = function () {\n        var verticalGutterBounds = this.props.verticalGutterBounds;\n        var scrollGutterWidth = verticalGutterBounds ? verticalGutterBounds.width : 0;\n        var props = __assign({}, this.props, { top: 0, left: this.props.frozenColsWidth, height: this.props.frozenRowsHeight, width: this.props.width - this.props.frozenColsWidth - scrollGutterWidth, posProps: this.rowsPosProps });\n        return (React.createElement(HighlightedGridCanvas_1.HighlightedGridCanvas, __assign({}, props, { name: \"rows\" })));\n    };\n    return FrozenRowsCanvas;\n}(React.PureComponent));\nexports.FrozenRowsCanvas = FrozenRowsCanvas;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nexports.InlineTextEditor = function (props) {\n    var defaultText = props.cell.editor.serialise(props.cell.data);\n    var submit = function (e) {\n        var inputValue = e.currentTarget.value;\n        var newData = props.cell.editor.deserialise(inputValue, props.cell.data);\n        props.onSubmit(newData);\n    };\n    var handleKeyPress = function (e) {\n        if (e.key === 'Enter') {\n            submit(e);\n        }\n    };\n    var handleKeyUp = function (e) {\n        if (e.keyCode === 27) {\n            props.onCancel();\n        }\n    };\n    return React.createElement(\"input\", { type: \"text\", style: {\n            position: 'absolute',\n            boxSizing: 'border-box',\n            top: props.top - props.gridOffset.y + \"px\",\n            left: props.left - props.gridOffset.x + \"px\",\n            width: props.width + \"px\",\n            height: props.height + \"px\",\n            border: '0',\n        }, autoFocus: true, defaultValue: defaultText, onBlur: submit, onKeyPress: handleKeyPress, onKeyUp: handleKeyUp });\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar instigator_1 = require(\"instigator\");\nvar React = __importStar(require(\"react\"));\nvar HighlightedGridCanvas_1 = require(\"./HighlightedGridCanvas\");\nvar MainCanvas = /** @class */ (function (_super) {\n    __extends(MainCanvas, _super);\n    function MainCanvas(props) {\n        var _this = _super.call(this, props) || this;\n        var mainVisibleRect = instigator_1.transformer([props.gridState.visibleRect, props.gridState.frozenRowsHeight, props.gridState.frozenColsWidth], function (visibleRect, frozenRowsHeight, frozenColsWidth) {\n            return __assign({}, visibleRect, { top: visibleRect.top + frozenRowsHeight, left: visibleRect.left + frozenColsWidth, height: visibleRect.height - frozenRowsHeight, width: visibleRect.width - frozenColsWidth });\n        });\n        _this.posProps = instigator_1.transformer([mainVisibleRect], function (visibleRect) { return ({\n            gridOffset: { x: visibleRect.left, y: visibleRect.top },\n            visibleRect: visibleRect,\n        }); });\n        return _this;\n    }\n    MainCanvas.prototype.render = function () {\n        var props = __assign({}, this.props, { top: this.props.frozenRowsHeight, left: this.props.frozenColsWidth, height: Math.max(this.props.height - this.props.frozenRowsHeight, 0), width: Math.max(this.props.width - this.props.frozenColsWidth, 0), posProps: this.posProps });\n        return (React.createElement(HighlightedGridCanvas_1.HighlightedGridCanvas, __assign({}, props, { name: \"main\" })));\n    };\n    return MainCanvas;\n}(React.PureComponent));\nexports.MainCanvas = MainCanvas;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nvar CornerScrollbarCanvas_1 = require(\"./CornerScrollbarCanvas\");\nvar HorizontalScrollbarCanvas_1 = require(\"./HorizontalScrollbarCanvas\");\nvar VerticalScrollbarCanvas_1 = require(\"./VerticalScrollbarCanvas\");\nvar ScrollbarCanvas = /** @class */ (function (_super) {\n    __extends(ScrollbarCanvas, _super);\n    function ScrollbarCanvas() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ScrollbarCanvas.prototype.render = function () {\n        var _a = this.props, horizontalGutterBounds = _a.horizontalGutterBounds, verticalGutterBounds = _a.verticalGutterBounds, coreProps = __rest(_a, [\"horizontalGutterBounds\", \"verticalGutterBounds\"]);\n        return (React.createElement(React.Fragment, null,\n            horizontalGutterBounds &&\n                React.createElement(HorizontalScrollbarCanvas_1.HorizontalScrollbarCanvas, __assign({}, coreProps, { horizontalGutterBounds: horizontalGutterBounds })),\n            verticalGutterBounds &&\n                React.createElement(VerticalScrollbarCanvas_1.VerticalScrollbarCanvas, __assign({}, coreProps, { verticalGutterBounds: verticalGutterBounds })),\n            horizontalGutterBounds && verticalGutterBounds &&\n                React.createElement(CornerScrollbarCanvas_1.CornerScrollbarCanvas, __assign({}, coreProps, { horizontalGutterBounds: horizontalGutterBounds, verticalGutterBounds: verticalGutterBounds }))));\n    };\n    return ScrollbarCanvas;\n}(React.PureComponent));\nexports.ScrollbarCanvas = ScrollbarCanvas;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar instigator_1 = require(\"instigator\");\nvar React = __importStar(require(\"react\"));\nvar gridState_1 = require(\"../gridState\");\nvar cornerScrollbarRenderer_1 = require(\"./cornerScrollbarRenderer\");\nvar CornerScrollbarCanvas = /** @class */ (function (_super) {\n    __extends(CornerScrollbarCanvas, _super);\n    function CornerScrollbarCanvas() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.canvasRef = React.createRef();\n        _this.renderer = null;\n        _this.renderCallback = null;\n        return _this;\n    }\n    CornerScrollbarCanvas.prototype.render = function () {\n        return (React.createElement(\"canvas\", { ref: this.canvasRef, \"data-name\": \"corner-scrollbar\", width: this.props.verticalGutterBounds.width * this.props.dpr, height: this.props.horizontalGutterBounds.height * this.props.dpr, style: {\n                position: 'absolute',\n                top: this.props.horizontalGutterBounds.top + \"px\",\n                left: this.props.verticalGutterBounds.left + \"px\",\n                width: this.props.verticalGutterBounds.width + \"px\",\n                height: this.props.horizontalGutterBounds.height + \"px\",\n            } }));\n    };\n    CornerScrollbarCanvas.prototype.componentDidMount = function () {\n        var _this = this;\n        if (!this.canvasRef.current) {\n            throw new Error('canvasRef is null in componentDidMount - cannot create renderer');\n        }\n        var gridState = this.props.gridState;\n        var basicProps = instigator_1.mergeTransformer({\n            dpr: gridState.dpr,\n            horizontalGutterBounds: gridState.horizontalGutterBounds,\n            verticalGutterBounds: gridState.verticalGutterBounds,\n            horizontalScrollbarPos: gridState.horizontalScrollbarPos,\n            verticalScrollbarPos: gridState.verticalScrollbarPos,\n            hoveredScrollbar: gridState.hoveredScrollbar,\n        }, gridState_1.shallowEqualsExceptFunctions);\n        this.renderer = new cornerScrollbarRenderer_1.CornerScrollbarRenderer(this.canvasRef.current, basicProps());\n        this.renderCallback = instigator_1.consumer([basicProps], function (newBasicProps) {\n            if (_this.renderer) {\n                if (!_this.canvasRef.current) {\n                    throw new Error('canvasRef is null in componentDidMount - cannot create renderer');\n                }\n                _this.renderer.updateProps(_this.canvasRef.current, newBasicProps);\n            }\n        });\n        this.renderCallback();\n    };\n    CornerScrollbarCanvas.prototype.componentWillUnmount = function () {\n        if (this.renderCallback) {\n            this.renderCallback.deregister();\n        }\n    };\n    return CornerScrollbarCanvas;\n}(React.PureComponent));\nexports.CornerScrollbarCanvas = CornerScrollbarCanvas;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar baseScrollbarRenderer_1 = require(\"./baseScrollbarRenderer\");\nvar horizontalScrollbarRenderer_1 = require(\"./horizontalScrollbarRenderer\");\nvar verticalScrollbarRenderer_1 = require(\"./verticalScrollbarRenderer\");\nvar CornerScrollbarRenderer = /** @class */ (function (_super) {\n    __extends(CornerScrollbarRenderer, _super);\n    function CornerScrollbarRenderer(canvas, basicProps) {\n        var _this = _super.call(this, 'scrollbar corner', canvas, basicProps) || this;\n        _this.draw = function () {\n            var context = _this.context;\n            // Draw scrollbar gutters\n            var vBounds = _this.basicProps.verticalGutterBounds;\n            var hBounds = _this.basicProps.horizontalGutterBounds;\n            if (hBounds && vBounds) {\n                _this.context.fillStyle = baseScrollbarRenderer_1.styles.scrollGutters.fill;\n                _this.context.fillRect(vBounds.left, hBounds.top, vBounds.width, hBounds.height);\n                _this.context.strokeStyle = baseScrollbarRenderer_1.styles.scrollGutters.stroke;\n                _this.context.lineWidth = 1;\n                _this.context.beginPath();\n                _this.context.moveTo(vBounds.right, hBounds.top);\n                _this.context.lineTo(vBounds.right, hBounds.bottom);\n                _this.context.moveTo(vBounds.left, vBounds.bottom);\n                _this.context.lineTo(vBounds.right, vBounds.bottom);\n                _this.context.stroke();\n            }\n            // Draw (the ends of) the scrollbars (if needed)\n            horizontalScrollbarRenderer_1.drawHScrollbar(context, _this.basicProps.horizontalScrollbarPos, _this.basicProps.hoveredScrollbar);\n            verticalScrollbarRenderer_1.drawVScrollbar(context, _this.basicProps.verticalScrollbarPos, _this.basicProps.hoveredScrollbar);\n        };\n        _this.translate = function () {\n            var hBounds = _this.basicProps.horizontalGutterBounds;\n            var vBounds = _this.basicProps.verticalGutterBounds;\n            if (hBounds && vBounds) {\n                _this.context.translate(-vBounds.left, -hBounds.top);\n            }\n        };\n        return _this;\n    }\n    return CornerScrollbarRenderer;\n}(baseScrollbarRenderer_1.BaseScrollbarRenderer));\nexports.CornerScrollbarRenderer = CornerScrollbarRenderer;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar instigator_1 = require(\"instigator\");\nvar React = __importStar(require(\"react\"));\nvar gridState_1 = require(\"../gridState\");\nvar horizontalScrollbarRenderer_1 = require(\"./horizontalScrollbarRenderer\");\nvar HorizontalScrollbarCanvas = /** @class */ (function (_super) {\n    __extends(HorizontalScrollbarCanvas, _super);\n    function HorizontalScrollbarCanvas() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.canvasRef = React.createRef();\n        _this.renderer = null;\n        _this.renderCallback = null;\n        return _this;\n    }\n    HorizontalScrollbarCanvas.prototype.render = function () {\n        return (React.createElement(\"canvas\", { ref: this.canvasRef, \"data-name\": \"horizontal-scrollbar\", width: this.props.horizontalGutterBounds.width * this.props.dpr, height: this.props.horizontalGutterBounds.height * this.props.dpr, style: {\n                position: 'absolute',\n                top: this.props.horizontalGutterBounds.top + \"px\",\n                left: this.props.horizontalGutterBounds.left + \"px\",\n                width: this.props.horizontalGutterBounds.width + \"px\",\n                height: this.props.horizontalGutterBounds.height + \"px\",\n            } }));\n    };\n    HorizontalScrollbarCanvas.prototype.componentDidMount = function () {\n        var _this = this;\n        if (!this.canvasRef.current) {\n            throw new Error('canvasRef is null in componentDidMount - cannot create renderer');\n        }\n        var gridState = this.props.gridState;\n        var basicProps = instigator_1.mergeTransformer({\n            dpr: gridState.dpr,\n            horizontalGutterBounds: gridState.horizontalGutterBounds,\n            verticalGutterBounds: gridState.verticalGutterBounds,\n            horizontalScrollbarPos: gridState.horizontalScrollbarPos,\n            verticalScrollbarPos: gridState.verticalScrollbarPos,\n            hoveredScrollbar: gridState.hoveredScrollbar,\n        }, gridState_1.shallowEqualsExceptFunctions);\n        this.renderer = new horizontalScrollbarRenderer_1.HorizontalScrollbarRenderer(this.canvasRef.current, basicProps());\n        this.renderCallback = instigator_1.consumer([basicProps], function (newBasicProps) {\n            if (_this.renderer) {\n                if (!_this.canvasRef.current) {\n                    throw new Error('canvasRef is null in componentDidMount - cannot create renderer');\n                }\n                _this.renderer.updateProps(_this.canvasRef.current, newBasicProps);\n            }\n        });\n        this.renderCallback();\n    };\n    HorizontalScrollbarCanvas.prototype.componentWillUnmount = function () {\n        if (this.renderCallback) {\n            this.renderCallback.deregister();\n        }\n    };\n    return HorizontalScrollbarCanvas;\n}(React.PureComponent));\nexports.HorizontalScrollbarCanvas = HorizontalScrollbarCanvas;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar instigator_1 = require(\"instigator\");\nvar React = __importStar(require(\"react\"));\nvar gridState_1 = require(\"../gridState\");\nvar verticalScrollbarRenderer_1 = require(\"./verticalScrollbarRenderer\");\nvar VerticalScrollbarCanvas = /** @class */ (function (_super) {\n    __extends(VerticalScrollbarCanvas, _super);\n    function VerticalScrollbarCanvas() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.canvasRef = React.createRef();\n        _this.renderer = null;\n        _this.renderCallback = null;\n        return _this;\n    }\n    VerticalScrollbarCanvas.prototype.render = function () {\n        return (React.createElement(\"canvas\", { ref: this.canvasRef, \"data-name\": \"vertical-scrollbar\", width: this.props.verticalGutterBounds.width * this.props.dpr, height: this.props.verticalGutterBounds.height * this.props.dpr, style: {\n                position: 'absolute',\n                top: this.props.verticalGutterBounds.top + \"px\",\n                left: this.props.verticalGutterBounds.left + \"px\",\n                width: this.props.verticalGutterBounds.width + \"px\",\n                height: this.props.verticalGutterBounds.height + \"px\",\n            } }));\n    };\n    VerticalScrollbarCanvas.prototype.componentDidMount = function () {\n        var _this = this;\n        if (!this.canvasRef.current) {\n            throw new Error('canvasRef is null in componentDidMount - cannot create renderer');\n        }\n        var gridState = this.props.gridState;\n        var basicProps = instigator_1.mergeTransformer({\n            dpr: gridState.dpr,\n            horizontalGutterBounds: gridState.horizontalGutterBounds,\n            verticalGutterBounds: gridState.verticalGutterBounds,\n            horizontalScrollbarPos: gridState.horizontalScrollbarPos,\n            verticalScrollbarPos: gridState.verticalScrollbarPos,\n            hoveredScrollbar: gridState.hoveredScrollbar,\n        }, gridState_1.shallowEqualsExceptFunctions);\n        this.renderer = new verticalScrollbarRenderer_1.VerticalScrollbarRenderer(this.canvasRef.current, basicProps());\n        this.renderCallback = instigator_1.consumer([basicProps], function (newBasicProps) {\n            if (_this.renderer) {\n                if (!_this.canvasRef.current) {\n                    throw new Error('canvasRef is null in componentDidMount - cannot create renderer');\n                }\n                _this.renderer.updateProps(_this.canvasRef.current, newBasicProps);\n            }\n        });\n        this.renderCallback();\n    };\n    VerticalScrollbarCanvas.prototype.componentWillUnmount = function () {\n        if (this.renderCallback) {\n            this.renderCallback.deregister();\n        }\n    };\n    return VerticalScrollbarCanvas;\n}(React.PureComponent));\nexports.VerticalScrollbarCanvas = VerticalScrollbarCanvas;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction repeatSelectionIntoFill(selectRange, fillRange, data, columns, cloneCellDef) {\n    var selHeight = selectRange.bottomRight.y - selectRange.topLeft.y + 1;\n    var selWidth = selectRange.bottomRight.x - selectRange.topLeft.x + 1;\n    return data.map(function (row, y) {\n        if (y >= fillRange.topLeft.y && y <= fillRange.bottomRight.y) {\n            return columns.reduce(function (acc, col, x) {\n                if (x >= fillRange.topLeft.x && x <= fillRange.bottomRight.x) {\n                    var srcRowIndex = ((y - fillRange.topLeft.y) % selHeight) + selectRange.topLeft.y;\n                    var srcColIndex = ((x - fillRange.topLeft.x) % selWidth) + selectRange.topLeft.x;\n                    var srcColDef = columns[srcColIndex];\n                    var srcCellDef = data[srcRowIndex][srcColDef.fieldName];\n                    var destRowIndex = y;\n                    var destColIndex = x;\n                    var destColDef = columns[destColIndex];\n                    var destCellDef = data[destRowIndex][destColDef.fieldName];\n                    acc[col.fieldName] = cloneCellDef({\n                        srcRowIndex: srcRowIndex,\n                        srcColIndex: srcColIndex,\n                        srcColDef: srcColDef,\n                        srcCellDef: srcCellDef,\n                        destRowIndex: destRowIndex,\n                        destColIndex: destColIndex,\n                        destColDef: destColDef,\n                        destCellDef: destCellDef,\n                    });\n                }\n                else {\n                    acc[col.fieldName] = row[col.fieldName];\n                }\n                return acc;\n            }, {});\n        }\n        else {\n            return row;\n        }\n    });\n}\nexports.repeatSelectionIntoFill = repeatSelectionIntoFill;\n","import * as React from 'react';\nimport './ControlsForm.css';\n\nexport const ControlsForm = (props: { children?: React.ReactNode }) => {\n    return (\n        <form className=\"controls\">\n            {props.children}\n        </form>\n    );\n};\n\nexport const InlineGroup = (props: { children?: React.ReactNode }) => {\n    return (\n        <span className=\"inline-controls-group\">\n            {props.children}\n        </span>\n    );\n};\n\nexport const NumberInput = (props: Partial<React.InputHTMLAttributes<HTMLInputElement>>) =>\n    <input type=\"number\" {...props} />;\n\ninterface SelectInputProps<T> {\n    values: T[];\n    selectedValue: T;\n    onSelect: (event: React.ChangeEvent<HTMLInputElement>) => void;\n}\nexport const RadioInputs = <T extends {}>(\n    { values, selectedValue, onSelect}: SelectInputProps<T>,\n) => {\n    return <React.Fragment>\n        {values.map((val) =>\n            <label key={val.toString()}>\n                <input type=\"radio\" value={val.toString()} checked={val === selectedValue} onChange={onSelect} />\n                {val}\n            </label>)}\n    </React.Fragment>;\n};\n","import * as React from 'react';\nimport './FixedSizeHolder.css';\n\nexport const FixedSizeHolder = (props: {children?: React.ReactNode}) => {\n    return (\n        <div className=\"fixed-size-holder\">\n            {props.children}\n        </div>\n    );\n};\n","import { CellDef, ColumnDef, DataRow } from '../../../src/types';\n\nexport function createFakeDataAndColumns<T>(\n    numRows: number,\n    numCols: number,\n    dataGen: (x: number, y: number) => T,\n    options: Partial<CellDef<T>> = {},\n) {\n    return {\n        columns: createFakeColumns(numCols),\n        rows: createFakeData(numRows, numCols, dataGen, options),\n    };\n}\n\nexport function createFakeColumns(numCols: number) {\n    const cols: ColumnDef[] = [];\n    for (let i = 0; i < numCols; i++) {\n        cols.push({\n            fieldName: `col-${i}`,\n            width: 50,\n        });\n    }\n    return cols;\n}\n\nexport function createFakeData<T>(\n    numRows: number,\n    numCols: number,\n    dataGen: (x: number, y: number) => T,\n    options: Partial<CellDef<T>> = {},\n) {\n    const rows: Array<DataRow<T>> = [];\n    for (let i = 0; i < numRows; i++) {\n        const row: DataRow<T> = {};\n        for (let j = 0; j < numCols; j++) {\n            row[`col-${j}`] = {\n                getText: () => `${i + 1}x${j + 1}`,\n                data: dataGen(j, i),\n                ...options,\n            };\n        }\n        rows.push(row);\n    }\n    return rows;\n}\n","import { CellDef } from 'react-canvas-grid';\nimport { createFakeColumns, createFakeData } from '../data/dataAndColumns';\n\nexport type TextPair = [string, string];\n\nconst numRows = 100;\nconst numCols = 200;\n\n// Hash one int into another - just a cheap way of producing random-looking but deterministic numbers\n/* tslint:disable:no-bitwise */\nfunction hash(x: number): number {\n    x = ((x >> 16) ^ x) * 0x45d9f3b;\n    x = ((x >> 16) ^ x) * 0x45d9f3b;\n    x = (x >> 16) ^ x;\n    return x;\n}\n/* tslint:enable:no-bitwise */\n\nfunction getRandomTextA(x: number, y: number): string {\n    return hash(x + y * numCols + 1).toString(36).substr(0, 3);\n}\nfunction getRandomTextB(x: number, y: number): string {\n    return hash(x + y * numCols + numRows * numCols + 1).toString(36).substr(0, 3);\n}\n\nfunction getTextPair(x: number, y: number): TextPair {\n    return [getRandomTextA(x, y), getRandomTextB(x, y)];\n}\n\nconst options: Partial<CellDef<TextPair>> = {\n    getText: ([a, b]: TextPair) => `${a}/${b}`,\n};\nexport function getData() {\n    return createFakeData(numRows, numCols, (x, y) => getTextPair(x, y), options);\n}\n\nexport function getColumns() {\n    return createFakeColumns(numCols);\n}\n","import * as React from 'react';\nimport {\n    AutofillContext,\n    CellDef,\n    ColumnDef,\n    DataRow,\n    ReactCanvasGrid,\n    repeatSelectionIntoFill,\n    SelectRange,\n} from 'react-canvas-grid';\nimport { ControlsForm, InlineGroup, RadioInputs } from '../components/ControlsForm';\nimport { FixedSizeHolder } from '../components/FixedSizeHolder';\nimport { getColumns, getData, TextPair } from './Autofill.data';\n\ntype AutofillMode = 'none' | 'single' | 'multi';\n\ninterface AutofillableGridState {\n    data: Array<DataRow<TextPair>>;\n    columns: ColumnDef[];\n    autofillMode: AutofillMode;\n}\n\nconst shouldAllowAutofillMethods: { [mode in AutofillMode]: (selectRange: SelectRange) => boolean } = {\n    none: (_) => {\n        return false;\n    },\n    single: (selectRange: SelectRange) => {\n        const width = selectRange.bottomRight.x - selectRange.topLeft.x + 1;\n        const height = selectRange.bottomRight.y - selectRange.topLeft.y + 1;\n        const numCells = width * height;\n        return numCells === 1;\n    },\n    multi: (_) => {\n        return true;\n    },\n};\n\nexport class AutofillGrid extends React.Component<{}, AutofillableGridState> {\n    constructor(props: {}) {\n        super(props);\n\n        this.state = {\n            data: getData(),\n            columns: getColumns(),\n            autofillMode: 'multi',\n        };\n    }\n\n    public render() {\n        return (\n            <>\n                <ControlsForm>\n                    <div>\n                        <InlineGroup>\n                            <span>Allowed autofill mode: </span>\n                            <RadioInputs\n                                values={['none', 'single', 'multi']}\n                                selectedValue={this.state.autofillMode}\n                                onSelect={this.onAutofillModeSelect}\n                            />\n                        </InlineGroup>\n                    </div>\n                </ControlsForm>\n\n                <FixedSizeHolder>\n                    <ReactCanvasGrid<TextPair>\n                        columns={this.state.columns}\n                        data={this.state.data}\n                        rowHeight={20}\n                        shouldAllowAutofill={shouldAllowAutofillMethods[this.state.autofillMode]}\n                        onAutofill={this.onAutofill}\n                        frozenCols={1}\n                        frozenRows={1}\n                    />\n                </FixedSizeHolder>\n            </>\n        );\n    }\n\n    private onAutofill = (selectRange: SelectRange, fillRange: SelectRange) => {\n        const data = repeatSelectionIntoFill(\n            selectRange,\n            fillRange,\n            this.state.data,\n            this.state.columns,\n            autofillCell,\n        );\n        this.setState({ data });\n    }\n\n    private onAutofillModeSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const autofillMode = event.currentTarget.value as AutofillMode;\n        this.setState({ autofillMode });\n    }\n}\n\nfunction autofillCell(context: AutofillContext<TextPair>): CellDef<TextPair> {\n    return {\n        ...context.destCellDef,\n        data: [context.srcCellDef.data[0], context.destCellDef.data[1]],\n    };\n}\n","import * as React from 'react';\n\nexport const AutofillText = () => {\n    return (\n        <>\n        <h1>Autofill</h1>\n        <p>\n            ReactCanvasGrid can 'autofill' values - i.e. copy the values from the current\n            selection into a new area - when the autofill handle is dragged to define the new area.\n            The callback <code>shouldAllowAutofill</code> must be supplied to control when the autofill handle\n            is shown, along with the <code>onAutofill</code> callback to update the data.\n        </p>\n        <p>\n            The <code>shouldAllowAutofill</code> callback is passed the currently selected range, and\n            must return a boolean (<code>true</code> to show allow autofill and show the autofill\n            handle, <code>false</code> to disallow and hide).\n        </p>\n        <p>\n            The <code>onAutofill</code> is passed both the currently selected range and the range to be filled,\n            and should update the <code>data</code> prop. ReactCanvasGrid provides\n            the <code>repeatSelectionIntoFill</code> function as a convenience: it takes the selected range,\n            range to be filled, current data, columns, and a 'factory' function; it returns a new\n            copy of the data where the area to be filled has been overwritten with cells created by the\n            'factory' from the selected range.\n        </p>\n        <p>\n            The factory method could simply clone the source cell, or it could follow more complex logic.\n            In the below example, some cell data (the text after the slash) is treated as invariate by the\n            factory function, and some cell data (the text before the slash) is treated as copyable.\n        </p>\n        <p>\n            The factory method is passed a single <code>context</code> object, which includes information\n            on the source (from the selection) and destination (from the area to\n            fill): <code>[src|dest]RowIndex</code>, <code>[src|dest]ColIndex</code>,{' '}\n            <code>[src|dest]ColDef</code>, and <code>[src|dest]CellDef</code>.\n        </p>\n        </>\n    );\n};\n","import * as React from 'react';\nimport { ReactCanvasGrid } from 'react-canvas-grid';\nimport { FixedSizeHolder } from '../components/FixedSizeHolder';\nimport { createFakeDataAndColumns } from '../data/dataAndColumns';\n\nconst renderBackgroundLightGreen = (context: CanvasRenderingContext2D, cellBounds: ClientRect) => {\n    context.fillStyle = 'lightgreen';\n    context.fillRect(cellBounds.left, cellBounds.top, cellBounds.width, cellBounds.height);\n};\n\nexport const CustomBackgroundGrid = () => {\n    const options = { renderBackground: renderBackgroundLightGreen };\n    const { columns, rows: data } = createFakeDataAndColumns(100, 20, () => {/* no op */}, options);\n\n    return (\n        <FixedSizeHolder>\n            <ReactCanvasGrid<void>\n                columns={columns}\n                data={data}\n                rowHeight={20}\n            />\n        </FixedSizeHolder>\n    );\n};\n","import * as React from 'react';\nimport { CellDef, cellHasTextFunction, ReactCanvasGrid } from 'react-canvas-grid';\nimport { FixedSizeHolder } from '../components/FixedSizeHolder';\nimport { createFakeDataAndColumns } from '../data/dataAndColumns';\n\nconst renderTextRed = (context: CanvasRenderingContext2D, cellBounds: ClientRect, cell: CellDef<void>) => {\n    context.fillStyle = 'red';\n    const text = cellHasTextFunction(cell) ? cell.getText(cell.data) : cell.text;\n    context.fillText(text, cellBounds.left + 2, cellBounds.top + 15, cellBounds.width - 4);\n};\n\nexport const CustomTextGrid = () => {\n    const options = { renderText: renderTextRed };\n    const { columns, rows: data } = createFakeDataAndColumns(100, 20, () => {/* no op */}, options);\n\n    return (\n        <FixedSizeHolder>\n            <ReactCanvasGrid<void>\n                columns={columns}\n                data={data}\n                rowHeight={20}\n            />\n        </FixedSizeHolder>\n    );\n};\n","import * as React from 'react';\nimport { ColumnDef, DataRow, ReactCanvasGrid } from 'react-canvas-grid';\nimport { ControlsForm, InlineGroup, NumberInput } from '../components/ControlsForm';\nimport { FixedSizeHolder } from '../components/FixedSizeHolder';\nimport { createFakeDataAndColumns } from '../data/dataAndColumns';\n\ninterface DynamicDataGridState {\n    columns: ColumnDef[];\n    data: Array<DataRow<void>>;\n    numCols: number;\n    numColsInputValue: number;\n    numRows: number;\n    numRowsInputValue: number;\n    freezeFirstRowAndCol: boolean;\n    filterCols: boolean;\n}\n\nexport class DynamicDataGrid extends React.Component<{}, DynamicDataGridState> {\n    private changeColsDebounceTimeout: number | null = null;\n    private changeRowsDebounceTimeout: number | null = null;\n\n    constructor(props: {}) {\n        super(props);\n\n        this.state = getDefaultState();\n    }\n\n    public render() {\n        const shownCols = this.state.columns.filter((c, i) => !this.state.filterCols || i < 5);\n        return (\n            <>\n                <ControlsForm>\n                    <div>\n                        <InlineGroup>\n                            <label>Number of rows: </label>\n                            <NumberInput\n                                id=\"num-rows\"\n                                onChange={this.changeNumRows}\n                                value={this.state.numRowsInputValue.toString()}\n                            />\n                        </InlineGroup>\n                        <InlineGroup>\n                            <label>Number of columns: </label>\n                            <NumberInput\n                                id=\"num-cols\"\n                                onChange={this.changeNumCols}\n                                value={this.state.numColsInputValue.toString()}\n                            />\n                        </InlineGroup>\n                    </div>\n                    <div>\n                        <InlineGroup>\n                            <button id=\"first-col-to-end\" onClick={this.moveFirstColumnToEnd}>\n                                Move first column to end\n                            </button>\n                        </InlineGroup>\n                        <InlineGroup>\n                            <button id=\"modify-top-left\" onClick={this.modifyTopLeftCell}>\n                                Modify top left cell\n                            </button>\n                        </InlineGroup>\n                        <InlineGroup>\n                            <button id=\"reset\" onClick={this.reset}>Reset</button>\n                        </InlineGroup>\n                    </div>\n                    <div>\n                        <InlineGroup>\n                            <label htmlFor=\"toggle-frozen-cols\">Select to freeze row 1 &amp; column 1: </label>\n                            <input\n                                id=\"toggle-frozen-cols\"\n                                type=\"checkbox\"\n                                onChange={this.toggleFrozen}\n                                checked={this.state.freezeFirstRowAndCol}\n                            />\n                        </InlineGroup>\n                        <InlineGroup>\n                            <label htmlFor=\"toggle-filter-cols\">Select to hide columns over 5: </label>\n                            <input\n                                id=\"toggle-filter-cols\"\n                                type=\"checkbox\"\n                                onChange={this.toggleFilterCols}\n                                checked={this.state.filterCols}\n                            />\n                        </InlineGroup>\n                    </div>\n                </ControlsForm>\n\n                <FixedSizeHolder>\n                    <ReactCanvasGrid<void>\n                        columns={shownCols}\n                        data={this.state.data}\n                        rowHeight={20}\n                        frozenCols={this.state.freezeFirstRowAndCol ? 1 : 0}\n                        frozenRows={this.state.freezeFirstRowAndCol ? 1 : 0}\n                    />\n                </FixedSizeHolder>\n            </>\n        );\n    }\n\n    private changeNumRows = (event: React.ChangeEvent<HTMLInputElement>) => {\n        if (this.changeRowsDebounceTimeout) {\n            clearTimeout(this.changeRowsDebounceTimeout);\n        }\n        const numRows = event.target.valueAsNumber;\n        this.setState({ numRowsInputValue: numRows });\n        this.changeRowsDebounceTimeout = setTimeout(this.changeNumRowsDebounced, 80, numRows);\n    }\n\n    private changeNumRowsDebounced = (numRows: number) => {\n        this.changeRowsDebounceTimeout = null;\n        const { columns, rows: data } = createFakeDataAndColumns(numRows, this.state.numCols, () => {/* no op */});\n\n        this.setState({ columns, data, numRows });\n    }\n\n    private changeNumCols = (event: React.ChangeEvent<HTMLInputElement>) => {\n        if (this.changeColsDebounceTimeout) {\n            clearTimeout(this.changeColsDebounceTimeout);\n        }\n        const numCols = event.target.valueAsNumber;\n        this.setState({ numColsInputValue: numCols });\n        this.changeColsDebounceTimeout = setTimeout(this.changeNumColsDebounced, 80, numCols);\n    }\n\n    private changeNumColsDebounced = (numCols: number) => {\n        this.changeColsDebounceTimeout = null;\n        const { columns, rows: data } = createFakeDataAndColumns(this.state.numRows, numCols, () => {/* no op */});\n\n        this.setState({ columns, data, numCols });\n    }\n\n    private moveFirstColumnToEnd = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) =>  {\n        this.setState({\n            columns: [...this.state.columns.slice(1), this.state.columns[0]],\n        });\n        event.preventDefault();\n    }\n\n    private modifyTopLeftCell = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) =>  {\n        const firstColName = this.state.columns[0].fieldName;\n        this.setState({\n            data: [\n                {\n                    ...this.state.data[0],\n                    [firstColName]: {\n                        ...this.state.data[0][firstColName],\n                        getText: () => 'Modified',\n                    },\n                },\n                ...this.state.data.slice(1),\n            ],\n        });\n        event.preventDefault();\n    }\n\n    private reset = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n        this.setState(getDefaultState());\n        event.preventDefault();\n    }\n\n    private toggleFrozen = () => {\n        this.setState({\n            freezeFirstRowAndCol: !this.state.freezeFirstRowAndCol,\n        });\n    }\n\n    private toggleFilterCols = () => {\n        this.setState({\n            filterCols: !this.state.filterCols,\n        });\n    }\n}\n\nconst getDefaultState = (): DynamicDataGridState => {\n    const { columns, rows: data } = createFakeDataAndColumns(20, 100, () => {/* no op */});\n\n    return {\n        columns,\n        data,\n        numCols: 100,\n        numColsInputValue: 100,\n        numRows: 20,\n        numRowsInputValue: 20,\n        freezeFirstRowAndCol: false,\n        filterCols: false,\n    };\n};\n","import * as React from 'react';\nimport { CellDataChangeEvent, CellDef, DataRow, ReactCanvasGrid } from 'react-canvas-grid';\nimport { FixedSizeHolder } from '../components/FixedSizeHolder';\nimport { createFakeColumns, createFakeData } from '../data/dataAndColumns';\n\ntype NumPair = [number, number];\n\ninterface EditableDataGridState {\n    data: Array<DataRow<NumPair>>;\n}\n\nexport class EditableDataGrid extends React.Component<{}, EditableDataGridState> {\n    constructor(props: {}) {\n        super(props);\n\n        const options: Partial<CellDef<NumPair>> = {\n            editor: {\n                serialise: ([a, b]: NumPair) => `${a},${b}`,\n                deserialise: (text: string, prev: NumPair) => {\n                    const match = text.match(/(\\d+),(\\d+)/);\n                    if (match) {\n                        return [parseInt(match[1], 10), parseInt(match[2], 10)];\n                    } else {\n                        return prev;\n                    }\n                },\n            },\n            getText: ([a, b]: NumPair) => `${a}x${b}`,\n        };\n\n        this.state = {\n            data: createFakeData(100, 200, (x, y) => [x, y] as NumPair, options),\n        };\n    }\n\n    public render() {\n        const columns = createFakeColumns(20);\n\n        return (\n            <FixedSizeHolder>\n                <ReactCanvasGrid<NumPair>\n                    columns={columns}\n                    data={this.state.data}\n                    rowHeight={20}\n                    onCellDataChanged={this.onCellDataChanged}\n                />\n            </FixedSizeHolder>\n        );\n    }\n\n    private onCellDataChanged = (event: CellDataChangeEvent<NumPair>) => {\n        this.setState({\n            data: this.state.data.map((row, i) => {\n                if (i === event.rowIndex) {\n                    return {\n                        ...row,\n                        [event.fieldName]: {\n                            ...row[event.fieldName],\n                            data: event.newData,\n                        },\n                    };\n                } else {\n                    return row;\n                }\n            }),\n        });\n    }\n}\n","import * as React from 'react';\nimport './EventLog.css';\n\ninterface EventLogProps {\n    log: string;\n}\n\nexport class EventLog extends React.PureComponent<EventLogProps> {\n    private logRef: React.RefObject<HTMLTextAreaElement>;\n\n    constructor(props: EventLogProps) {\n        super(props);\n        this.logRef = React.createRef();\n    }\n\n    public render() {\n        return (<textarea ref={this.logRef} className=\"event-log\" value={this.props.log} readOnly />);\n    }\n\n    public componentDidUpdate() {\n        if (this.logRef.current) {\n            this.logRef.current.scrollTop = this.logRef.current.scrollHeight;\n        }\n    }\n}\n","import * as React from 'react';\nimport { CellDataChangeEvent, CellDef, ReactCanvasGrid } from 'react-canvas-grid';\nimport { EventLog } from '../components/EventLog';\nimport { FixedSizeHolder } from '../components/FixedSizeHolder';\nimport { createFakeDataAndColumns } from '../data/dataAndColumns';\n\ninterface EditEventsState {\n    eventLog: string;\n}\n\nconst options: Partial<CellDef<string>> = {\n    editor: {\n        serialise: (value: string) => value,\n        deserialise: (text: string, _: string) => text,\n    },\n    getText: (value: string) => value,\n};\nconst { columns, rows: data } = createFakeDataAndColumns(100, 20, (x, y) => `${x},${y}`, options);\n\nexport class EditEventsGrid extends React.Component<{}, EditEventsState> {\n    constructor(props: {}) {\n        super(props);\n        this.state = {\n            eventLog: '',\n        };\n    }\n\n    public render() {\n        return (\n            <>\n                <FixedSizeHolder>\n                    <ReactCanvasGrid<string>\n                        columns={columns}\n                        data={data}\n                        rowHeight={20}\n                        onCellDataChanged={this.onCellDataChanged}\n                    />\n                </FixedSizeHolder>\n                <EventLog log={this.state.eventLog} />\n            </>\n        );\n    }\n\n    private onCellDataChanged = (event: CellDataChangeEvent<string>) => {\n        const { colIndex, rowIndex, fieldName, newData } = event;\n\n        this.setState({\n            eventLog: this.state.eventLog +\n                `changed: row ${rowIndex} of column \"${fieldName}\" (index ${colIndex}) to ${newData}\\n`,\n        });\n    }\n}\n","import React, { Component } from 'react';\nimport {\n  AutofillContext,\n  CellDataChangeEvent,\n  CellDef,\n  ColumnDef,\n  DataRow,\n  getCellText,\n  ReactCanvasGrid,\n  repeatSelectionIntoFill,\n  SelectRange,\n} from 'react-canvas-grid';\nimport './Everything.css';\n\nconst numColsLarge = 250;\nconst numColsSmall = 3;\nconst numRows = 250;\n\nconst labels = [\n  {text: 'Lorem', colour: 'red'},\n  {text: 'Ipsum', colour: 'orange'},\n  {text: 'Dolor', colour: 'lightblue'},\n  {text: 'Sit', colour: 'lightgreen'},\n  {text: 'Amet', colour: 'lightpink'},\n];\n\ntype HighlightPosition = 'topleft' | 'bottomright' | 'full' | 'none';\nconst highlights: HighlightPosition[] = [\n  'topleft',\n  'bottomright',\n  'full',\n  'none', 'none', 'none', 'none', 'none', 'none', // Hacky way to make 'none' more likely\n];\n\nconst renderHeaderBackground = (context: CanvasRenderingContext2D, cellBounds: ClientRect) => {\n  context.fillStyle = '#eee';\n  context.fillRect(cellBounds.left, cellBounds.top, cellBounds.width, cellBounds.height);\n};\n\nconst renderCellBackground = (\n  context: CanvasRenderingContext2D,\n  cellBounds: ClientRect,\n  cell: CustomBgCellDef,\n) => {\n  if (cell.data.highlight !== 'full') {\n    context.fillStyle = cell.data.bgColour;\n    context.fillRect(cellBounds.left, cellBounds.top, cellBounds.width, cellBounds.height);\n  }\n\n  if (cell.data.highlight !== 'none') {\n    context.fillStyle = 'yellow';\n    if (cell.data.highlight === 'full') {\n      context.fillRect(cellBounds.left, cellBounds.top, cellBounds.width, cellBounds.height);\n    } else if (cell.data.highlight === 'topleft') {\n      context.beginPath();\n      context.moveTo(cellBounds.left, cellBounds.top);\n      context.lineTo(cellBounds.left, cellBounds.bottom);\n      context.lineTo(cellBounds.right, cellBounds.top);\n      context.closePath();\n      context.fill();\n    } else if (cell.data.highlight === 'bottomright') {\n      context.beginPath();\n      context.moveTo(cellBounds.left, cellBounds.bottom);\n      context.lineTo(cellBounds.right, cellBounds.bottom);\n      context.lineTo(cellBounds.right, cellBounds.top);\n      context.closePath();\n      context.fill();\n    }\n  }\n};\n\ninterface CustomCellData {\n  bgColour: string;\n  text: string;\n  shouldReverseText: boolean;\n  highlight: HighlightPosition;\n}\n\ntype CustomBgCellDef = CellDef<CustomCellData>;\n\ntype AllCellDataTypes = CustomCellData | null;\n\nfunction getCustomCellText(data: CustomCellData) {\n  if (data.shouldReverseText) {\n    return data.text.split('').reverse().join('');\n  } else {\n    return data.text;\n  }\n}\n\nfunction serailiseCustomData(data: CustomCellData): string {\n  return (data.shouldReverseText ? '!' : '') + data.text;\n}\n\nfunction deserialiseCustomData(value: string, oldData: CustomCellData): CustomCellData {\n  const reversed = value.startsWith('!');\n  const text = reversed ? value.slice(1) : value;\n  return {\n    ...oldData,\n    shouldReverseText: reversed,\n    text,\n  };\n}\n\nfunction createCols(numCols: number) {\n  const colDefs: ColumnDef[] = [\n    {\n      fieldName: 'date',\n      width: 80,\n    },\n  ];\n  for (let i = 0; i < numCols; i++) {\n    colDefs.push({\n      fieldName: i.toString(),\n      width: 100,\n    });\n  }\n  return colDefs;\n}\n\nfunction createData(numCols: number) {\n  const data: Array<DataRow<AllCellDataTypes>> = [];\n\n  for (let i = 0; i < numRows; i++) {\n    const row: DataRow<AllCellDataTypes> = {\n      date: {\n        text: (i + 1).toString(),\n        data: null,\n        renderBackground: renderHeaderBackground,\n      },\n    };\n    for (let j = 0; j < numCols; j++) {\n      const label = labels[Math.floor(Math.random() * labels.length)];\n      const highlight = highlights[Math.floor(Math.random() * highlights.length)];\n      if (i === 0) {\n        const cell: CustomBgCellDef = {\n          getText: getCustomCellText,\n          data: { bgColour: label.colour, highlight, text: label.text, shouldReverseText: Math.random() < 0.5 },\n          renderBackground: renderHeaderBackground,\n        };\n        row[j.toString()] = cell as CellDef<AllCellDataTypes>;\n      } else {\n        const cell: CustomBgCellDef = {\n          getText: getCustomCellText,\n          data: { bgColour: label.colour, highlight, text: label.text, shouldReverseText: Math.random() < 0.5 },\n          renderBackground: renderCellBackground,\n          editor: {\n            serialise: serailiseCustomData,\n            deserialise: deserialiseCustomData,\n          },\n        };\n        row[j.toString()] = cell as CellDef<AllCellDataTypes>;\n      }\n    }\n    data.push(row);\n  }\n  return data;\n}\n\ninterface EverythingState {\n  colDefs: ColumnDef[];\n  data: Array<DataRow<AllCellDataTypes>>;\n  selectedRange: SelectRange | null;\n  isDragging: boolean;\n  focusedCol: number | null;\n  lastKeyPress: string | null;\n}\n\nexport class Everything extends Component<{}, EverythingState> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      colDefs: createCols(numColsLarge),\n      data: createData(numColsLarge),\n      selectedRange: null,\n      isDragging: false,\n      focusedCol: null,\n      lastKeyPress: null,\n    };\n  }\n\n  public render() {\n    const colHeaders = this.state.colDefs.map((cd) => {\n      const headerRow = this.state.data[0];\n      const headerCell = headerRow[cd.fieldName];\n      const text = getCellText(headerCell);\n      return text;\n    });\n    return (\n      <React.Fragment>\n        <div className=\"App\">\n          <header className=\"App-header\">\n            <p>\n              Page header\n            </p>\n            <div>\n              {this.state.isDragging ? 'Dragging' : ''}\n              &nbsp;\n              {this.state.selectedRange ? JSON.stringify(this.state.selectedRange) : ''}\n            </div>\n            <div>{this.state.lastKeyPress}</div>\n            <button onClick={this.replaceDataLarge}>Replace data (Large)</button>\n            <button onClick={this.replaceDataSmall}>Replace data (Small)</button>\n            <button onClick={this.updateCell}>Update cell</button>\n            <label>Focus column:</label>\n            <select onChange={this.focusColumn} defaultValue={'none'}>\n              <option value={'none'}>None</option>\n              {colHeaders.map((text, i) => (\n                <option key={i} value={i}>{i} ({text})</option>\n              ))}\n            </select>\n          </header>\n          <div style={{height: '600px', width: '800px', overflow: 'scroll'}}>\n            <div style={{height: '80px', backgroundColor: 'blue'}}>\n              <span>Body header</span>\n            </div>\n            <div\n              style={{paddingLeft: '100px', paddingRight: '100px', backgroundColor: 'purple'}}\n              onKeyPress={this.onKeyPressed}\n            >\n              <ReactCanvasGrid<AllCellDataTypes>\n                cssHeight={'800px'}\n                cssWidth={'800px'}\n                columns={this.state.colDefs}\n                data={this.state.data}\n                rowHeight={20}\n                frozenRows={1}\n                frozenCols={1}\n                onSelectionChangeStart={this.selectionChanged}\n                onSelectionChangeUpdate={this.selectionChanged}\n                onSelectionChangeEnd={this.selectionFinished}\n                onSelectionCleared={this.selectionCleared}\n                onCellDataChanged={this.onCellDataChanged}\n                focusedColIndex={this.state.focusedCol}\n                shouldAllowAutofill={() => true}\n                onAutofill={this.onAutofill}\n              />\n            </div>\n            <div style={{height: '80px', backgroundColor: 'red'}}>\n              <span>Body footer</span>\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n\n  private selectionChanged = (selectedRange: SelectRange | null) => {\n    this.setState({ selectedRange, isDragging: true });\n  }\n\n  private selectionFinished = (selectedRange: SelectRange | null) => {\n    this.setState({ selectedRange, isDragging: false });\n  }\n\n  private selectionCleared = () => {\n    this.setState({ selectedRange: null, isDragging: false });\n  }\n\n  private focusColumn = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    if (event.target.value === 'none') {\n      this.setState({ focusedCol: null });\n    } else {\n      this.setState({ focusedCol: parseInt(event.target.value, 10) });\n    }\n  }\n\n  private replaceDataLarge = () => {\n    this.setState({\n      colDefs: createCols(numColsLarge),\n      data: createData(numColsLarge),\n    });\n  }\n\n  private replaceDataSmall = () => {\n    this.setState({\n      colDefs: createCols(numColsSmall),\n      data: createData(numColsSmall),\n    });\n  }\n\n  private updateCell = () => {\n    this.setState({\n      data: this.state.data.map((row, i) => {\n        if (i === 0) {\n          const label = labels[Math.floor(Math.random() * labels.length)];\n          const highlight = highlights[Math.floor(Math.random() * highlights.length)];\n          return {\n            ...row,\n            0: {\n              ...row[0],\n              data: {\n                ...row[0].data,\n                bgColour: label.colour,\n                highlight,\n                text: label.text,\n                shouldReverseText: Math.random() < 0.5,\n              },\n            },\n          };\n        } else {\n          return row;\n        }\n      }),\n    });\n  }\n\n  private onCellDataChanged = (event: CellDataChangeEvent<AllCellDataTypes>) => {\n    this.setState({\n      data: this.state.data.map((row, i) => {\n        if (i === event.rowIndex) {\n          return {\n            ...row,\n            [event.fieldName]: {\n              ...row[event.fieldName],\n              data: event.newData,\n            },\n          };\n        } else {\n          return row;\n        }\n      }),\n    });\n  }\n\n  private onKeyPressed = (event: React.KeyboardEvent<HTMLDivElement>) => {\n    this.setState({\n      lastKeyPress: event.key,\n    });\n  }\n\n  private onAutofill = (selectRange: SelectRange, fillRange: SelectRange) => {\n    const data = repeatSelectionIntoFill(\n        selectRange,\n        fillRange,\n        this.state.data,\n        this.state.colDefs,\n        autofillCell,\n    );\n    this.setState({ data });\n  }\n}\n\nfunction autofillCell(context: AutofillContext<AllCellDataTypes>): CellDef<AllCellDataTypes> {\n  if (!context.destCellDef.data || !context.srcCellDef.data) {\n    throw new Error(`Can't autofill to/from null data`);\n  }\n  return {\n      ...context.destCellDef,\n      data: {\n        ...context.destCellDef.data,\n        shouldReverseText: context.srcCellDef.data.shouldReverseText,\n        text: context.srcCellDef.data.text,\n      },\n  };\n}\n","import * as React from 'react';\nimport { ReactCanvasGrid } from 'react-canvas-grid';\nimport { ControlsForm } from '../components/ControlsForm';\nimport { FixedSizeHolder } from '../components/FixedSizeHolder';\nimport { createFakeDataAndColumns } from '../data/dataAndColumns';\n\ninterface FocusColumnGridState {\n    focusedCol: number | null;\n    freezeCols: boolean;\n}\n\nexport class FocusColumnGrid extends React.Component<{}, FocusColumnGridState> {\n    constructor(props: {}) {\n        super(props);\n\n        this.state = {\n            focusedCol: null,\n            freezeCols: false,\n        };\n    }\n\n    public render() {\n        const { columns, rows: data } = createFakeDataAndColumns(20, 100, () => {/* no op */});\n\n        return (\n            <>\n                <ControlsForm>\n                    <div>\n                        <label>Select a column to focus: </label>\n                        <select onChange={this.focusColumn} defaultValue={'none'}>\n                            <option value={'none'}>None</option>\n                            {columns.map((_, i) => (\n                                <option key={i} value={i}>{i + 1}</option>\n                            ))}\n                        </select>\n                    </div>\n                    <div>\n                        <label htmlFor=\"toggle-frozen-cols\">Select to freeze columns 1 &amp; 2: </label>\n                        <input id=\"toggle-frozen-cols\" type=\"checkbox\" onChange={this.toggleFrozenCols} />\n                    </div>\n                </ControlsForm>\n\n                <FixedSizeHolder>\n                    <ReactCanvasGrid<void>\n                        columns={columns}\n                        data={data}\n                        rowHeight={20}\n                        focusedColIndex={this.state.focusedCol}\n                        frozenCols={this.state.freezeCols ? 2 : 0}\n                    />\n                </FixedSizeHolder>\n            </>\n        );\n    }\n\n    private focusColumn = (event: React.ChangeEvent<HTMLSelectElement>) => {\n      if (event.target.value === 'none') {\n        this.setState({ focusedCol: null });\n      } else {\n        this.setState({ focusedCol: parseInt(event.target.value, 10) });\n      }\n    }\n\n    private toggleFrozenCols = () => {\n        this.setState({ freezeCols: !this.state.freezeCols });\n    }\n}\n","import * as React from 'react';\nimport { CellDef, ReactCanvasGrid } from 'react-canvas-grid';\nimport { EventLog } from '../components/EventLog';\nimport { FixedSizeHolder } from '../components/FixedSizeHolder';\nimport { createFakeDataAndColumns } from '../data/dataAndColumns';\n\ninterface KeyboardEventsState {\n    eventLog: string;\n}\n\nconst options: Partial<CellDef<string>> = {\n    editor: {\n        serialise: (value: string) => value,\n        deserialise: (text: string, _: string) => text,\n    },\n    getText: (value: string) => value,\n};\nconst { columns, rows: data } = createFakeDataAndColumns(100, 20, (x, y) => `${x},${y}`, options);\n\nexport class KeyboardEventsGrid extends React.Component<{}, KeyboardEventsState> {\n    constructor(props: {}) {\n        super(props);\n        this.state = {\n            eventLog: '',\n        };\n    }\n\n    public render() {\n        return (\n            <>\n                <FixedSizeHolder>\n                    <div onKeyUp={this.onKeyUp} style={{ height: '100%' }}>\n                        <ReactCanvasGrid<string>\n                            columns={columns}\n                            data={data}\n                            rowHeight={20}\n                        />\n                    </div>\n                </FixedSizeHolder>\n                <EventLog log={this.state.eventLog} />\n            </>\n        );\n    }\n\n    private onKeyUp = (event: React.KeyboardEvent<HTMLDivElement>) => {\n        this.setState({\n            eventLog: this.state.eventLog + `key up: ${event.key}\\n`,\n        });\n    }\n}\n","import * as React from 'react';\nimport { ReactCanvasGrid } from 'react-canvas-grid';\nimport { ControlsForm } from '../components/ControlsForm';\nimport { createFakeDataAndColumns } from '../data/dataAndColumns';\n\nexport class ResizeGrid extends React.Component<{}, { size: 'big'|'small'; }> {\n    constructor(props: {}) {\n        super(props);\n        this.state = {\n            size: 'small',\n        };\n    }\n\n    public render() {\n        const { columns, rows: data } = createFakeDataAndColumns(100, 20, () => {/* no op */});\n\n        return (\n            <>\n                <ControlsForm>\n                    <div>\n                        <label>Grid size: </label>\n                        <select onChange={this.chooseSize} value={this.state.size}>\n                            <option value={'small'}>Small</option>\n                            <option value={'big'}>Big</option>\n                        </select>\n                    </div>\n                </ControlsForm>\n                <ReactCanvasGrid<void>\n                    cssHeight={this.state.size === 'big' ? '600px' : '400px'}\n                    cssWidth={this.state.size === 'big' ? '600px' : '400px'}\n                    columns={columns}\n                    data={data}\n                    rowHeight={20}\n                />\n            </>\n        );\n    }\n\n    private chooseSize = (e: React.ChangeEvent<HTMLSelectElement>) => {\n        const value = e.target.value as 'big'|'small';\n        this.setState({\n            size: value,\n        });\n    }\n}\n","import * as React from 'react';\nimport { ReactCanvasGrid, SelectRange } from 'react-canvas-grid';\nimport { EventLog } from '../components/EventLog';\nimport { FixedSizeHolder } from '../components/FixedSizeHolder';\nimport { createFakeDataAndColumns } from '../data/dataAndColumns';\n\ninterface SelectionEventsState {\n    eventLog: string;\n}\n\nconst { columns, rows: data } = createFakeDataAndColumns(100, 20, () => {/* no op */});\n\nexport class SelectionEventsGrid extends React.Component<{}, SelectionEventsState> {\n    constructor(props: {}) {\n        super(props);\n        this.state = {\n            eventLog: '',\n        };\n    }\n\n    public render() {\n        return (\n            <>\n                <FixedSizeHolder>\n                    <ReactCanvasGrid<void>\n                        columns={columns}\n                        data={data}\n                        rowHeight={20}\n                        frozenRows={1}\n                        frozenCols={1}\n                        onSelectionChangeStart={this.start}\n                        onSelectionChangeUpdate={this.update}\n                        onSelectionChangeEnd={this.end}\n                    />\n                </FixedSizeHolder>\n                <EventLog log={this.state.eventLog} />\n            </>\n        );\n    }\n\n    private start = (range: SelectRange | null) => {\n        this.appendToLog('start', range);\n    }\n\n    private update = (range: SelectRange | null) => {\n        this.appendToLog('update', range);\n    }\n\n    private end = (range: SelectRange | null) => {\n        this.appendToLog('end', range);\n    }\n\n    private appendToLog = (eventType: 'start' | 'update' | 'end', range: SelectRange | null) => {\n        const paddedType = eventType === 'start' ?  ' start' :\n                           eventType === 'update' ? 'update' :\n                                                    '   end';\n        const newRange = range ?\n            `(${range.topLeft.x},${range.topLeft.y}) -> (${range.bottomRight.x},${range.bottomRight.y})` :\n            'none';\n        this.setState((prevState) => {\n            return { ...prevState, eventLog: prevState.eventLog + `${paddedType}: ${newRange}\\n` };\n        });\n    }\n}\n","import * as React from 'react';\nimport { AutofillGrid } from './Autofill.grid';\nimport { AutofillText } from './Autofill.text';\nimport { CustomBackgroundGrid } from './CustomBackground.grid';\nimport { CustomBackgroundText } from './CustomBackground.text';\nimport { CustomTextGrid } from './CustomText.grid';\nimport { CustomTextText } from './CustomText.text';\nimport { DynamicDataGrid } from './DynamicData.grid';\nimport { DyanmicDataText } from './DynamicData.text';\nimport { EditableDataGrid } from './Editable.grid';\nimport { EditableDataText } from './Editable.text';\nimport { EditEventsGrid } from './EditEvents.grid';\nimport { EditEventsText } from './EditEvents.text';\nimport { Everything } from './Everything.grid';\nimport { FocusColumnGrid } from './FocusColumn.grid';\nimport { FocusColumnText } from './FocusColumn.text';\nimport { FrozenCellsGrid } from './FrozenCells.grid';\nimport { FrozenCellsText } from './FrozenCells.text';\nimport { KeyboardEventsGrid } from './KeyboardEvents.grid';\nimport { KeyboardEventsText } from './KeyboardEvents.text';\nimport { ResizeGrid } from './Resize.grid';\nimport { ResizeText } from './Resize.text';\nimport { SelectionEventsGrid } from './SelectionEvents.grid';\nimport { SelectionEventsText } from './SelectionEvents.text';\nimport { SimpleGrid } from './Simple.grid';\nimport { SimpleText } from './Simple.text';\nimport { SmallGridGrid } from './SmallGrid.grid';\nimport { SmallGridText } from './SmallGrid.text';\n\ninterface ExampleMeta {\n    pathFragment: string;\n    name: string;\n    description: React.ReactNode;\n    grid: React.ComponentType;\n    text: React.ComponentType;\n    fileName: string;\n}\n\nconst exampleMeta: ExampleMeta[] = [\n    {\n        pathFragment: '/full-example',\n        name: 'Full Example',\n        description: 'A kitchen-sink example, with as many features demonstrated at once as possible.',\n        grid: Everything,\n        text: () => null,\n        fileName: 'Everything',\n    },\n    {\n        pathFragment: '/small',\n        name: 'Small Grid',\n        description: 'A basic grid setup with minimal data.',\n        grid: SmallGridGrid,\n        text: SmallGridText,\n        fileName: 'SmallGrid',\n    },\n    {\n        pathFragment: '/simple',\n        name: 'Simple Grid',\n        description: 'A basic grid setup with enough data to need to scroll',\n        grid: SimpleGrid,\n        text: SimpleText,\n        fileName: 'Simple',\n    },\n    {\n        pathFragment: '/editable',\n        name: 'Editable Data',\n        description: 'A grid with cells backed by data, made editable through a text box',\n        grid: EditableDataGrid,\n        text: EditableDataText,\n        fileName: 'Editable',\n    },\n    {\n        pathFragment: '/frozen',\n        name: 'Frozen Rows & Columns',\n        description: 'A grid with rows and columns that do not scroll',\n        grid: FrozenCellsGrid,\n        text: FrozenCellsText,\n        fileName: 'FrozenCells',\n    },\n    {\n        pathFragment: '/focused-column',\n        name: 'Column Focusing',\n        description: 'Automatically scroll to a selected column',\n        grid: FocusColumnGrid,\n        text: FocusColumnText,\n        fileName: 'FocusColumn',\n    },\n    {\n        pathFragment: '/dynamic-data',\n        name: 'Dynamic Data',\n        description: 'Update the columns and rows provided to the grid component',\n        grid: DynamicDataGrid,\n        text: DyanmicDataText,\n        fileName: 'DynamicData',\n    },\n    {\n        pathFragment: '/custom-bg',\n        name: 'Custom Background Renderer',\n        description: 'Draw cells with custom backgrounds',\n        grid: CustomBackgroundGrid,\n        text: CustomBackgroundText,\n        fileName: 'CustomBackground',\n    },\n    {\n        pathFragment: '/custom-text',\n        name: 'Custom Text Renderer',\n        description: 'Draw cells with custom text',\n        grid: CustomTextGrid,\n        text: CustomTextText,\n        fileName: 'CustomText',\n    },\n    {\n        pathFragment: '/selection-events',\n        name: 'Selection Events',\n        description: 'Respond to users changing the selected area',\n        grid: SelectionEventsGrid,\n        text: SelectionEventsText,\n        fileName: 'SelectionEvents',\n    },\n    {\n        pathFragment: '/keyboard-events',\n        name: 'Keyboard Events',\n        description: 'Respond to use of the keyboard when the grid is focused',\n        grid: KeyboardEventsGrid,\n        text: KeyboardEventsText,\n        fileName: 'KeyboardEvents',\n    },\n    {\n        pathFragment: '/edit-events',\n        name: 'Edit Events',\n        description: 'Respond to users changing the grid\\'s data',\n        grid: EditEventsGrid,\n        text: EditEventsText,\n        fileName: 'EditEvents',\n    },\n    {\n        pathFragment: '/autofill',\n        name: 'Autofill',\n        description: 'Autofill',\n        grid: AutofillGrid,\n        text: AutofillText,\n        fileName: 'Autofill',\n      },\n      {\n          pathFragment: '/resize',\n          name: 'Resize',\n          description: 'Respond to change in explicit size',\n          grid: ResizeGrid,\n          text: ResizeText,\n          fileName: 'Resize',\n        },\n];\n\nexport default exampleMeta;\n","import * as React from 'react';\nimport { ReactCanvasGrid } from 'react-canvas-grid';\n\nexport const SmallGridGrid = () => {\n    return (\n        <ReactCanvasGrid<void>\n            cssHeight={'45px'}\n            columns={[ { fieldName: 'field-one', width: 50 }, { fieldName: 'field-two', width: 50 } ]}\n            data={[{\n                'field-one': { data: undefined, text: '1A' },\n                'field-two': { data: undefined, text: '1B' },\n            },\n            {\n                'field-one': { data: undefined, text: '2A' },\n                'field-two': { data: undefined, text: '2B' },\n            }]}\n            rowHeight={20}\n        />\n    );\n};\n","import * as React from 'react';\n\nexport const SmallGridText = () => {\n    return (\n        <>\n            <h1>Small Grid</h1>\n            <p>\n                This is a minimal usage of ReactCanvasGrid: a small, read-only grid of\n                static values.\n            </p>\n        </>\n    );\n};\n","import * as React from 'react';\nimport { ReactCanvasGrid } from 'react-canvas-grid';\nimport { FixedSizeHolder } from '../components/FixedSizeHolder';\nimport { createFakeDataAndColumns } from '../data/dataAndColumns';\n\nexport const SimpleGrid = () => {\n    const { columns, rows: data } = createFakeDataAndColumns(100, 20, () => {/* no op */});\n\n    return (\n        <FixedSizeHolder>\n            <ReactCanvasGrid<void>\n                columns={columns}\n                data={data}\n                rowHeight={20}\n            />\n        </FixedSizeHolder>\n    );\n};\n","import * as React from 'react';\n\nexport const SimpleText = () => {\n    return (\n        <>\n            <h1>Simple Grid</h1>\n            <p>\n                This is a basic usage of react-canvas-grid: a read-only grid of static values, held\n                within a <code>div</code> of fixed size.\n            </p>\n            <p>\n                Note that because the <code>cssHeight</code> and <code>cssWidth</code> props of&#160;\n                <code>ReactCanvasGrid</code> default to <code>100%</code>, the grid is constrained\n                to the size of its parent. Since the data in the grid requires a larger area than\n                that, the grid becomes scrollable.\n            </p>\n        </>\n    );\n};\n","import * as React from 'react';\n\nexport const EditableDataText = () => {\n    return (\n        <>\n            <h1>Editable Data</h1>\n            <p>\n                A cell is editable if its definition includes an <code>editor</code> property.\n                If the grid also has a <code>onCellDataChanged</code> prop, that can persist\n                changes made to data to be shown on the grid.\n            </p>\n            <p>\n                The <code>editor</code> provides two functions, <code>serialise</code> and\n                &#160;<code>deserialise</code>, that translate between the <code>data</code> stored\n                on the cell definition and the text displayed in the editor <code>input</code>.\n            </p>\n            <p>\n                Displaying the inline editor is not enough, however, as react-canvas-grid does not\n                manage the data; instead, when data changes, it will call the function provided as\n                the <code>onCellDataChanged</code> prop. This function can then update the contents\n                of the <code>data</code> prop, causing the grid to render the changes.\n            </p>\n            <p>\n                Note that the text displayed in the editor need not be the same as the text\n                displayed in the cell itself (as defined by <code>text</code> or <code>getText</code>).\n                In this example, the editor text is of the form <code>A,B</code> (i.e. comma separated),\n                but cells are displayed as <code>AxB</code> (i.e. with an x).\n            </p>\n            <p>\n                To edit a cell, double click it. Invalid values will be ignored.\n            </p>\n        </>\n    );\n};\n","import * as React from 'react';\nimport { ReactCanvasGrid } from 'react-canvas-grid';\nimport { FixedSizeHolder } from '../components/FixedSizeHolder';\nimport { createFakeDataAndColumns } from '../data/dataAndColumns';\n\nexport const FrozenCellsGrid = () => {\n    const { columns, rows: data } = createFakeDataAndColumns(100, 20, () => {/* no op */});\n\n    return (\n        <FixedSizeHolder>\n            <ReactCanvasGrid<void>\n                columns={columns}\n                data={data}\n                rowHeight={20}\n                frozenRows={1}\n                frozenCols={1}\n            />\n        </FixedSizeHolder>\n    );\n};\n","import * as React from 'react';\n\nexport const FrozenCellsText = () => {\n    return (\n        <>\n            <h1>Frozen Rows &amp; Columns</h1>\n            <p>\n                By setting the <code>frozenRows</code> and <code>frozenCols</code> props, rows\n                and columns of cells can be 'frozen' - i.e. fixed in place, even as the rest of\n                the grid scrolls.\n            </p>\n            <p>\n                This can be useful for creating column or row headers.\n            </p>\n        </>\n    );\n};\n","import * as React from 'react';\n\nexport const FocusColumnText = () => {\n    return (\n        <>\n            <h1>Focused Columns</h1>\n            <p>\n                Updates to the <code>focusedColIndex</code> cause the grid to automatically scroll\n                to ensure the indicated column is displayed. The scrolling behaviour is aware of\n                frozen columns.\n            </p>\n            <p>\n                This can be useful for building a 'search' feature.\n            </p>\n        </>\n    );\n};\n","import * as React from 'react';\n\nexport const DyanmicDataText = () => {\n    return (\n        <>\n            <h1>Dynamic Data</h1>\n            <p>\n                Updates to the <code>columns</code> and <code>data</code> props cause the grid to\n                re-render with new values.\n            </p>\n            <p>\n                The selected cells are cleared if <code>columns</code> changes or the number of rows\n                (in <code>data</code>) changes. The selection is not cleared, however, if <code>columns</code>\n                &#160;stays the same and <code>data</code> is replaced with an array of the same length (even if the\n                contents within the array is different). I.e. if the <em>structure</em> of the grid has changed\n                then the selection is cleared, but if only the <em>contents</em> change then the selection is\n                retained.\n            </p>\n            <p>\n                The scroll position is maintained as long as it is valid in the newly rendered grid. If not\n                (because there are fewer columns or rows) the scroll position is truncated.\n            </p>\n        </>\n    );\n};\n","import * as React from 'react';\n\nexport const CustomBackgroundText = () => {\n    return (\n        <>\n            <h1>Custom Background Renderer</h1>\n            <p>\n                When specifying a cell definition, you can provide a <code>renderBackground</code> function\n                to customise drawing the cell's background.\n            </p>\n            <p>\n                Here, all cells use the same background renderer in order to draw the background as\n                light green.\n            </p>\n        </>\n    );\n};\n","import * as React from 'react';\n\nexport const CustomTextText = () => {\n    return (\n        <>\n            <h1>Custom Text Renderer</h1>\n            <p>\n                When specifying a cell definition, you can provide a <code>renderText</code> function\n                to customise drawing the cell's text.\n            </p>\n            <p>\n                Here, all cells use the same text renderer in order to draw the text as red.\n            </p>\n        </>\n    );\n};\n","import * as React from 'react';\n\nexport const SelectionEventsText = () => {\n    return (\n        <>\n            <h1>Selection Events</h1>\n            <p>\n                The three callbacks <code>onSelectionChange[Start|Update|End]</code> allow consumers\n                of react-canvas-grid to take action in response to the user changing the selected area.\n                This can be useful for keeping track of the selection, in order to act upon the data.\n            </p>\n            <p>\n                Note that clicking / dragging on frozen headers allows the user to select entire rows / columns.\n            </p>\n        </>\n    );\n};\n","import * as React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport const KeyboardEventsText = () => {\n    return (\n        <>\n            <h1>Keyboard Events</h1>\n            <p>\n                Keyboard events bubble up, so can be captured the parent element of the grid (when\n                the grid has focus).\n            </p>\n            <p>\n                Note that keyboard events will also bubble up when the user interacts with the\n                inline editor, which you may wish to ignore. To do so, you may wish to observe\n                the grid's <Link to=\"/examples/edit-events\">edit events</Link>.\n            </p>\n            <p>\n                Also note that the editing functionality provided in this example is incomplete;\n                changes are not persisted. To see a more complete example, see\n                the <Link to=\"/examples/editable\">Editable Data</Link> example.\n            </p>\n        </>\n    );\n};\n","import * as React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport const EditEventsText = () => {\n    return (\n        <>\n            <h1>Edit Events</h1>\n            <p>\n                The callback <code>onCellDataChanged</code> allow consumers of react-canvas-grid to\n                respond to the user making changes to the data. Typically, this is used to update the\n                data passed to the grid in the <code>data</code> prop. Without doing so, the grid's\n                data will not be changed. See the <Link to=\"/examples/editable\">Editable Data</Link> example\n                for further detail. This example does not update the data, but merely logs event.\n            </p>\n            <p>\n                Note that the callback is fired when the user hits enter on the inline editor, or when\n                the inline editor loses focus, regardless of whether the data has been changed. The\n                inline editor can be dismissed with the escape key, regardless of whether the data has\n                been changed.\n            </p>\n        </>\n    );\n};\n","import * as React from 'react';\n\nexport const ResizeText = () => {\n    return (\n        <>\n            <h1>Resizable Grid</h1>\n            <p>\n                The <code>cssWidth</code> and <code>cssHeight</code> props of react-canvas-grid control\n                the grid's width and height. Both default to '100%', but accept any value that would be\n                valid in CSS.\n            </p>\n            <p>\n                If these props are updated, the grid will resize and redraw.\n            </p>\n            <p>\n                Note, however, this is only true when <em>the value of the props passed to the grid</em> changes\n                - so, for example, the grid will not automatically resize if <code>cssWidth</code>\n                and <code>cssHeight</code> are set to percentages and their parent element changes size.\n                If the grid must be reactive to the size of a parent element, the size of the grid must be\n                set dynamically (e.g. triggered by a window resize event or via a ResizeObserver).\n            </p>\n        </>\n    );\n};\n","import * as React from 'react';\nimport { Link } from 'react-router-dom';\nimport exampleMeta from './exampleMeta';\n\nexport const Index = () => {\n    return (\n        <React.Fragment>\n            <h1>Examples</h1>\n            <ul>\n                {exampleMeta.map((meta) => (\n                    <li key={meta.pathFragment}>\n                        <h3><Link to={'/examples' + meta.pathFragment}>{meta.name}</Link></h3>\n                        <p>{meta.description}</p>\n                    </li>\n                ))}\n            </ul>\n        </React.Fragment>\n    );\n};\n","import React, { Component } from 'react';\nimport { NavLink, Route } from 'react-router-dom';\nimport './Examples.css';\nimport exampleMeta from './examples/exampleMeta';\nimport { examplePage } from './examples/ExamplePage';\nimport { Index } from './examples/Index';\n\nclass Examples extends Component<{}, {}> {\n  public render() {\n    return (\n      <div className=\"examples-container\">\n        <main className=\"examples-main\">\n          <Route exact path=\"/examples\" component={Index} />\n          {exampleMeta.map((meta) => (\n            <Route\n              key={meta.pathFragment}\n              path={'/examples' + meta.pathFragment}\n              component={examplePage(meta.text, meta.grid, meta.fileName)}\n            />\n          ))}\n        </main>\n        <nav className=\"examples-menu\">\n          <h1><NavLink to=\"/examples\">Examples</NavLink></h1>\n          <ul>\n            {exampleMeta.map((meta) => (\n              <li key={meta.pathFragment}>\n                <NavLink to={'/examples' + meta.pathFragment} activeClassName=\"selected\">{meta.name}</NavLink>\n              </li>\n            ))}\n          </ul>\n        </nav>\n      </div>\n    );\n  }\n}\n\nexport default Examples;\n","import Highlight, { defaultProps } from 'prism-react-renderer';\nimport nightOwlLight from 'prism-react-renderer/themes/nightOwlLight';\nimport * as React from 'react';\nimport './ExamplePage.css';\n\nexport const examplePage = (Text: React.ComponentType, Grid: React.ComponentType, fileName: string) => {\n    return class extends React.Component<{}, { source: string|null; showSource: boolean; }> {\n        constructor(props: {}) {\n            super(props);\n            this.state = {\n                source: null,\n                showSource: false,\n            };\n        }\n\n        public componentDidMount() {\n            fetch(process.env.PUBLIC_URL + `/examples/${fileName}.grid.tsx`)\n                .then((res) => res.text())\n                .then((source) => this.setState({source}));\n        }\n\n        public render() {\n            return (\n                <>\n                    <Text />\n                    <Grid />\n                    {this.state.source &&\n                        <button className=\"link code-toggle\" onClick={this.toggleCode}>\n                            {this.state.showSource ? 'Hide' : 'Show'} code\n                        </button>\n                    }\n                    {this.state.source && this.state.showSource &&\n                        <Highlight {...defaultProps} theme={nightOwlLight} code={this.state.source} language=\"tsx\">\n                            {({ className, style, tokens, getLineProps, getTokenProps }) => (\n                            <pre className={`code-example ${className}`} style={style}>\n                                {tokens.map((line, i) => (\n                                <div {...getLineProps({ line, key: i })}>\n                                    {line.map((token, key) => (\n                                    <span {...getTokenProps({ token, key })} />\n                                    ))}\n                                </div>\n                                ))}\n                            </pre>\n                            )}\n                        </Highlight>\n                    }\n                </>\n            );\n        }\n\n        private toggleCode = (e: React.MouseEvent) => {\n            this.setState({\n                showSource: !this.state.showSource,\n            });\n            e.preventDefault();\n        }\n    };\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"style\", {\n  type: \"text/css\"\n}, \"\\n        .feature-icon path {\\n            fill: url(#VerticalPrimaryGradient)\\n        }\\n    \");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"linearGradient\", {\n  id: \"VerticalPrimaryGradient\",\n  x1: \"0%\",\n  y1: \"0%\",\n  x2: \"0%\",\n  y2: \"100%\"\n}, /*#__PURE__*/React.createElement(\"stop\", {\n  offset: \"0%\",\n  stopColor: \"var(--primary-colour)\"\n}), /*#__PURE__*/React.createElement(\"stop\", {\n  offset: \"100%\",\n  stopColor: \"var(--primary-colour-dark)\"\n})));\n\nvar SvgFeatureIconGradient = function SvgFeatureIconGradient(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgFeatureIconGradient, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/feature-icon-gradient.c5e60777.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", null);\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M 376.32 109.701 C 369.156 102.286 295.074 203.04 282.28 221.6 C 273.974 233.65 282.805 247.268 290.376 247.497 C 307.968 247.548 310.541 237.798 324.849 215.193 C 332.033 204.661 383.592 117.749 376.32 109.701 Z\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M 281.751 250.121 C 289.458 253.645 290.923 261.109 288.724 267.638 C 285.472 277.294 278.995 286.18 270.216 289.381 C 260.413 291.975 253.766 291.186 238.437 285.254 C 249.133 283.577 262.204 267.148 264.094 259.321 C 266.032 251.292 273.695 246.437 281.751 250.121 Z\"\n});\n\nvar SvgLogo = function SvgLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 540 175\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fillOpacity: 0,\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      strokeWidth: 20\n    },\n    d: \"M 100.825 35.246 L 10.825 86.246 L 100.825 136.246\"\n  }), /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"rect\", {\n    x: 128.791,\n    y: 8.83,\n    width: 192.003,\n    height: 157.242,\n    style: {\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      strokeWidth: 15,\n      fill: \"none\"\n    }\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    style: {\n      strokeWidth: 10\n    },\n    x1: 128.505,\n    y1: 62.863,\n    x2: 320.492,\n    y2: 62.863\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    style: {\n      strokeWidth: 7\n    },\n    x1: 128.505,\n    y1: 113.059,\n    x2: 320.492,\n    y2: 113.059\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    style: {\n      strokeWidth: 10\n    },\n    x1: 196.241,\n    y1: 10.657,\n    x2: 196.241,\n    y2: 165.931\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    style: {\n      strokeWidth: 7\n    },\n    x1: 255.61,\n    y1: 10.657,\n    x2: 255.61,\n    y2: 165.881\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(0.851458, -0.150135, 0.150135, 0.851458, 87.666634, -35.230808)\",\n    style: {}\n  }, _ref3, _ref4), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fillOpacity: 0,\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      strokeWidth: 20\n    },\n    d: \"M 529.167 136.246 L 439.167 85.246 L 529.167 35.246\",\n    transform: \"matrix(-1, 0, 0, -1, 968.333984, 171.492001)\"\n  }));\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/logo.870c9de4.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M333334 148458c0-22082-27653-43009-70050-55986 9784-43213 5436-77592-13725-88599-4416-2582-9580-3805-15219-3805v15152c3125 0 5639 611 7746 1767 9240 5300 13249 25479 10124 51434-748 6387-1970 13113-3465 19976-13317-3261-27857-5775-43145-7406-9172-12570-18685-23984-28265-33972 22150-20587 42941-31866 57073-31866V1c-18685 0-43145 13317-67876 36418C141800 13454 117341 273 98656 273v15151c14064 0 34923 11211 57073 31662-9512 9988-19024 21334-28061 33904-15356 1631-29895 4144-43213 7474-1563-6794-2718-13385-3533-19704-3194-25955 747-46134 9920-51502 2038-1223 4688-1767 7813-1767V339c-5707 0-10871 1223-15355 3805-19093 11007-23373 45319-13521 88396C27518 105585 0 126444 0 148458c0 22082 27653 43009 70050 55986-9784 43213-5435 77593 13725 88599 4417 2582 9580 3805 15287 3805 18685 0 43145-13317 67876-36418 24732 22965 49191 36146 67876 36146 5707 0 10871-1223 15356-3805 19092-11007 23372-45319 13521-88395 42125-12977 69643-33904 69643-55918zm-135684 0c0-17149-13902-31050-31050-31050s-31050 13902-31050 31050 13902 31050 31050 31050c17149 0 31050-13902 31050-31050zM98588 272zm146284 102867c-2514 8765-5639 17802-9172 26838-2786-5435-5707-10871-8901-16306-3125-5436-6455-10735-9784-15899 9648 1427 18956 3193 27857 5367zm-31119 72361c-5300 9172-10735 17869-16374 25955-10124 883-20383 1359-30711 1359-10260 0-20519-476-30575-1291-5639-8085-11143-16714-16443-25819-5164-8901-9852-17937-14132-27042 4213-9105 8969-18209 14065-27110 5300-9172 10735-17869 16374-25955 10124-883 20383-1359 30711-1359 10260 0 20519 476 30575 1291 5639 8085 11143 16714 16443 25819 5164 8901 9852 17937 14133 27042-4281 9105-8969 18209-14065 27110zm21946-8833c3669 9104 6794 18209 9376 27042-8901 2174-18277 4009-27993 5435 3329-5232 6658-10599 9784-16103 3125-5435 6047-10939 8833-16374zm-68895 72496c-6319-6522-12638-13793-18889-21742 6115 272 12366 476 18685 476 6387 0 12706-136 18889-476-6115 7949-12434 15219-18685 21742zm-50550-40019c-9648-1427-18956-3193-27857-5368 2514-8765 5639-17801 9172-26838 2786 5435 5707 10871 8901 16307 3193 5435 6455 10735 9784 15899zm50211-141392c6319 6523 12638 13793 18889 21742-6115-272-12366-476-18685-476-6387 0-12706 136-18889 476 6115-7949 12434-15219 18685-21742zm-50279 40019c-3329 5232-6658 10599-9784 16103-3125 5435-6047 10871-8833 16306-3669-9104-6794-18209-9376-27042 8901-2106 18277-3941 27993-5367zm-61489 85066c-24052-10259-39611-23712-39611-34380 0-10667 15559-24188 39611-34380 5843-2514 12230-4756 18820-6863 3873 13317 8969 27178 15287 41378-6251 14133-11279 27925-15083 41174-6726-2107-13113-4417-19024-6931zm36554 97092c-9241-5300-13249-25479-10124-51434 747-6387 1970-13113 3465-19976 13317 3261 27857 5775 43144 7406 9173 12570 18685 23984 28265 33972-22150 20587-42941 31866-57073 31866-3058-68-5639-680-7678-1835zm161164-51773c3193 25954-747 46134-9920 51502-2038 1223-4688 1767-7814 1767-14064 0-34923-11211-57073-31662 9512-9988 19024-21334 28061-33904 15356-1631 29896-4144 43213-7474 1563 6862 2786 13453 3533 19772zm26158-45319c-5843 2514-12230 4756-18820 6863-3873-13317-8969-27178-15287-41378 6251-14132 11279-27925 15084-41174 6726 2106 13113 4417 19092 6930 24052 10260 39611 23713 39611 34380-68 10667-15627 24188-39680 34380z\"\n});\n\nvar SvgReactJs = function SvgReactJs(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 333334 296848\",\n    shapeRendering: \"geometricPrecision\",\n    textRendering: \"geometricPrecision\",\n    imageRendering: \"optimizeQuality\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgReactJs, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/react-js.28144579.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M885 4922c72-56 177-43 233 29s43 177-29 233l-751 583-6 768 905-51 500-795c49-77 151-101 228-52s101 151 52 228l-543 863c-27 46-76 79-134 82l-1166 65h-10c-91 0-165-75-165-166l8-1012c-4-53 18-108 64-143l814-632zm1424-1836c378-1129 887-1929 1603-2433C4656 130 5611-69 6863 22c86 6 153 77 154 162 121 1355-142 2317-703 3045-539 700-1349 1174-2354 1571v1323c0 65-37 121-92 148l-1023 632c-78 48-180 24-228-54-13-21-20-43-23-65-226-1731-467-1814-1883-2304-169-59-352-122-475-166-86-30-132-125-101-211 7-19 16-35 28-50l674-961c34-48 89-73 143-70l1328 65zm2546-1611c193 0 367 78 493 204s204 300 204 493c0 192-78 367-204 493s-300 204-493 204-367-78-493-204-204-300-204-493 78-367 204-493 300-204 493-204zm332 365c-85-85-203-138-332-138-130 0-247 53-332 138s-138 203-138 332c0 130 53 247 138 332s203 138 332 138c130 0 247-53 332-138s138-203 138-332c0-130-53-247-138-332zM4102 924c-677 477-1157 1258-1516 2376-19 74-88 127-168 123l-1363-66-504 718c106 37 189 66 267 93 1509 522 1823 630 2068 2321l740-457V4688h1c0-66 40-129 106-154 1001-385 1801-837 2317-1507 492-639 731-1488 646-2683-1103-61-1945 123-2595 581z\",\n  fillRule: \"nonzero\"\n});\n\nvar SvgRocketLaunchLines = function SvgRocketLaunchLines(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 7046 6928\",\n    shapeRendering: \"geometricPrecision\",\n    textRendering: \"geometricPrecision\",\n    imageRendering: \"optimizeQuality\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgRocketLaunchLines, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/rocket-launch-lines.262e49c2.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M267860 212637h17137v-43813c0-848-355-1627-927-2199-571-571-1351-927-2199-927H177219v46939h17120c5416 0 9846 4430 9846 9846v39382c0 5415-4430 9846-9846 9846h-55628c-5415 0-9845-4430-9845-9846v-39382c0-5415 4430-9846 9845-9846h17121v-46939H51180c-849 0-1629 355-2200 926s-926 1351-926 2200v43813h17419c5416 0 9846 4430 9846 9846v39382c0 5415-4430 9846-9846 9846H9845c-5415 0-9846-4430-9846-9846v-39382c0-5415 4431-9846 9846-9846h16893v-43813c0-6732 2747-12845 7171-17270 4425-4424 10538-7171 17270-7171h104652V59074h-17121c-5415 0-9845-4430-9845-9846V9846c0-5415 4430-9846 9845-9846h55628c5416 0 9846 4430 9846 9846v39382c0 5415-4430 9846-9846 9846h-17120v85309h104652c6732 0 12845 2748 17269 7172 4425 4425 7172 10539 7172 17269v43813h17175c5415 0 9846 4430 9846 9846v39382c0 5415-4431 9846-9846 9846h-55628c-5415 0-9846-4430-9846-9846v-39382c0-5415 4430-9846 9846-9846z\"\n});\n\nvar SvgStructure = function SvgStructure(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 333334 271710\",\n    shapeRendering: \"geometricPrecision\",\n    textRendering: \"geometricPrecision\",\n    imageRendering: \"optimizeQuality\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgStructure, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/structure.c98a3d06.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport autofill from './assets/autofill.png';\nimport customRender from './assets/custom-render.png';\nimport { ReactComponent as FeatureIconGradient } from './assets/feature-icon-gradient.svg';\nimport frozenRowsCols from './assets/frozen-rows-cols.png';\nimport inlineEdit from './assets/inline-edit.png';\nimport { ReactComponent as RCGLogo } from './assets/logo.svg';\nimport { ReactComponent as ReactLogo } from './assets/react-js.svg';\nimport { ReactComponent as Rocket } from './assets/rocket-launch-lines.svg';\nimport selectionRange from './assets/selection-range.png';\nimport { ReactComponent as Structure } from './assets/structure.svg';\nimport './Home.css';\n\nconst Home = () => {\n    return (\n        <>\n            <div className=\"hero-wrapper\">\n                <RCGLogo className=\"logo-svg\" />\n                <h1>react-canvas-grid<br/><span className=\"warning\">(beta)</span></h1>\n                <div className=\"install-instructions-wrapper\">\n                    <div className=\"install-instructions\">\n                        <code><span className=\"prompt\">&gt; </span>npm install --save react-canvas-grid</code>\n                    </div>\n                </div>\n            </div>\n            <div className=\"features\">\n                <FeatureIconGradient style={{width: 0, height: 0}} />\n                <div className=\"feature\">\n                    <div className=\"feature-icon-sizer\">\n                        <ReactLogo className=\"feature-icon\" />\n                    </div>\n                    <h3>React-first</h3>\n                    <p>\n                        Built from the ground up for React, ReactCanvasGrid is designed for a simple\n                        developer experience, giving you power without getting in your way.\n                    </p>\n                </div>\n                <div className=\"feature\">\n                    <div className=\"feature-icon-sizer\">\n                        <Rocket className=\"feature-icon\" />\n                    </div>\n                    <h3>Performant</h3>\n                    <p>\n                        Powered by the canvas element, ReactCanvasGrid is fast - even with large data\n                        sets or complex visuals. It only draws what's visible, and only redraws what's\n                        changed, giving the user a smooth experience.\n                    </p>\n                </div>\n                <div className=\"feature\">\n                    <div className=\"feature-icon-sizer\">\n                        <Structure className=\"feature-icon\" />\n                    </div>\n                    <h3>Rich data friendly</h3>\n                    <p>\n                        First-class support for complex data values, allowing you to easily manage\n                        compound data, metadata, or anything else!\n                    </p>\n                </div>\n            </div>\n            <div className=\"capabilities\">\n                <Capability\n                    title=\"Customisable Rendering\"\n                    img={{\n                        src: customRender,\n                        alt: 'Customised rendering of cells, showing header cells and multi-coloured data cells',\n                    }}\n                    examples={[\n                        { text: 'Custom Background', path: '/examples/custom-bg' },\n                        { text: 'Custom Text', path: '/examples/custom-text' },\n                        { text: 'Full Example', path: '/examples/full-example' },\n                    ]}\n                >\n                    <p>\n                        If you can draw it in a canvas element, you can draw it in ReactCanvasGrid.\n                        All cell rendering (background, text, you name it) is fully customisable on a\n                        per-cell basis.\n                    </p>\n                </Capability>\n                <Capability\n                    title=\"Inline Editing\"\n                    img={{\n                        src: inlineEdit,\n                        alt: 'A text input aligned with the grid, allowing user modification of cell data',\n                    }}\n                    examples={[\n                        { text: 'Editable Data', path: '/examples/editable' },\n                        { text: 'Edit Events', path: '/examples/edit-events' },\n                        { text: 'Full Example', path: '/examples/full-example' },\n                    ]}\n                >\n                    <>\n                    <p>\n                        Data can be altered directly through the text-based inline editor. Complex data\n                        is marshalled to / from a string by custom serialisers / deserialisers.\n                    </p>\n                    <p>\n                        Of course, you own the data, not ReactCanvasGrid, so your app can provide users\n                        other means of editing data if you so choose.\n                    </p>\n                    </>\n                </Capability>\n                <Capability\n                    title=\"Frozen Cells\"\n                    img={{\n                        src: frozenRowsCols,\n                        alt: 'The top-left of a scrolled grid, where the first row and column are still visible',\n                    }}\n                    examples={[\n                        { text: 'Frozen Rows & Columns', path: '/examples/frozen' },\n                        { text: 'Full Example', path: '/examples/full-example' },\n                    ]}\n                >\n                    <>\n                    <p>\n                        Freeze as many rows or columns as you need - be it zero (i.e. no row / column headers),\n                        one, or more. Frozen rows / columns do not scroll with the rest of the grid, and selecting\n                        them selects the entire row, column or grid.\n                    </p>\n                    <p>\n                        Note that frozen rows and columns are not rendered differently by default, but can be\n                        customised just like any other cell.\n                    </p>\n                    </>\n                </Capability>\n                <Capability\n                    title=\"Range Selection\"\n                    img={{\n                        src: selectionRange,\n                        alt: 'A grid with a 2x2 selection highlighted',\n                    }}\n                    examples={[\n                        { text: 'Selection Events', path: '/examples/selection-events' },\n                        { text: 'Full Example', path: '/examples/full-example' },\n                    ]}\n                >\n                    <p>\n                        A single rectangular range of cells can be selected (by either keyboard or mouse). Your\n                        application can provide callbacks to listen for various phases of the selection state change\n                        cycle.\n                    </p>\n                </Capability>\n                <Capability\n                    title=\"Column Focusing\"\n                    examples={[\n                        { text: 'Column Focusing', path: '/examples/focused-column' },\n                        { text: 'Full Example', path: '/examples/full-example' },\n                    ]}\n                >\n                    <>\n                    <p>\n                        Declaratively focusing a column will cause ReactCanvasGrid to scroll to bring that column\n                        in to view. This can be integrated with an external search component.\n                    </p>\n                    </>\n                </Capability>\n                <Capability\n                    title=\"Autofill\"\n                    img={{\n                        src: autofill,\n                        alt: 'A grid with a 2x2 selection and another 2x2 area to the right highlighted for autofill',\n                    }}\n                    examples={[\n                        { text: 'Autofill', path: '/examples/autofill' },\n                        { text: 'Full Example', path: '/examples/full-example' },\n                    ]}\n                >\n                    <>\n                    <p>\n                        Drag a selection range to autofill the new area. A callback will be invoked to allow your\n                        application to update the data. ReactCanvasGrid also provides a convenience function to help\n                        simplify modifying your data. It's also possible to dynamically determine whether autofilling\n                        should be enabled for a given selection range.\n                    </p>\n                    </>\n                </Capability>\n            </div>\n        </>\n    );\n};\n\ninterface CapabilityProps {\n    title: string;\n    img?: { src: string; alt: string; };\n    examples: Array<{ text: string; path: string; }>;\n}\nconst Capability: React.FC<CapabilityProps> = (props) => {\n    return (\n        <div className=\"capability\">\n            <h3>{props.title}</h3>\n            <div className=\"capability-details\">\n                {props.img && <img src={props.img.src} alt={props.img.alt} />}\n                <div>\n                    {props.children}\n                    {props.examples.length > 0 && <div className=\"example-links\">\n                        See: {props.examples\n                            .map<React.ReactNode>((e) => <Link key={e.path} to={e.path}>{e.text}</Link>)\n                            .reduce((acc, el) => [acc, ' | ', el])}\n                    </div>}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Home;\n","import React from 'react';\nimport { HashRouter, NavLink, Route } from 'react-router-dom';\nimport './App.css';\nimport Examples from './Examples';\nimport Home from './Home';\n\nconst App = () => {\n    return (\n        <HashRouter>\n            <div className=\"app-container\">\n                <nav className=\"top-nav\">\n                    <span className=\"top-nav-item\"><NavLink exact to=\"/\">Home</NavLink></span>\n                    <span className=\"top-nav-item\"><NavLink to=\"/examples\">Examples</NavLink></span>\n                    <span className=\"top-nav-item\">\n                        <a href=\"https://github.com/rowanhill/react-canvas-grid/\">GitHub</a>\n                    </span>\n                </nav>\n                <main>\n                    <Route exact path=\"/\" component={Home} />\n                    <Route path=\"/examples\" component={Examples} />\n                </main>\n            </div>\n        </HashRouter>\n    );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}